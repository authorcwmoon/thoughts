<!DOCTYPE html><html lang="en"><head><link href="/static/favicons/favicon.ico" rel="shortcut icon"/><link href="/static/favicons/site.webmanifest" rel="manifest"/><link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin=""/><link rel="preconnect" href="https://cdn.usefathom.com" crossorigin=""/><link href="/static/favicons/apple-touch-icon.png" rel="apple-touch-icon" sizes="180x180"/><link href="/static/favicons/favicon-32x32.png" rel="icon" sizes="32x32" type="image/png"/><link href="/static/favicons/favicon-16x16.png" rel="icon" sizes="16x16" type="image/png"/><link color="#4a9885" href="/static/favicons/safari-pinned-tab.svg" rel="mask-icon"/><meta charSet="utf-8"/><meta content="IE=edge" http-equiv="X-UA-Compatible"/><meta content="width=device-width, initial-scale=1" name="viewport"/><meta content="#ffffff" name="theme-color"/><meta content="#ffffff" name="msapplication-TileColor"/><meta content="/static/favicons/browserconfig.xml" name="msapplication-config"/><meta content="14d2e73487fa6c71" name="yandex-verification"/><meta content="eZSdmzAXlLkKhNJzfgwDqWORghxnJ8qR9_CHdAh5-xw" name="google-site-verification"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:site" content="@leeerob"/><meta name="twitter:creator" content="@leeerob"/><meta property="og:image:width" content="1280"/><meta property="og:image:height" content="720"/><meta property="og:locale" content="en_IE"/><title>Real-Time Blog Post Views With React and Firebase â€“ Lee Robinson</title><meta name="robots" content="index,follow"/><meta name="googlebot" content="index,follow"/><meta name="description" content="Want more accurate page view counts? Learn how to create your own microservice for tracking real-time view counts using Firebase and then visualize those counts using React."/><meta property="og:url" content="https://leerob.io/blog/real-time-post-views"/><meta property="og:type" content="article"/><meta property="article:published_time" content="2019-08-21T00:00:00.000Z"/><meta property="og:title" content="Real-Time Blog Post Views With React and Firebase"/><meta property="og:description" content="Want more accurate page view counts? Learn how to create your own microservice for tracking real-time view counts using Firebase and then visualize those counts using React."/><meta property="og:image" content="https://leerob.io/static/images/real-time-post-views/banner.jpg"/><meta property="og:image:alt" content="Real-Time Blog Post Views With React and Firebase"/><link rel="canonical" href="https://leerob.io/blog/real-time-post-views"/><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "Article",
    "mainEntityOfPage": {
      "@type": "WebPage",
      "@id": "https://leerob.io/blog/real-time-post-views"
    },
    "headline": "Real-Time Blog Post Views With React and Firebase",
    "image": [
      "[object Object]"
     ],
    "datePublished": "2019-08-21T00:00:00.000Z",
    "dateModified": "2019-08-21T00:00:00.000Z",
    "author": {
      "@type": "Person",
      "name": "Lee Robinson"
    },
    "publisher": {
      "@type": "Organization",
      "name": "Lee Robinson",
      "logo": {
        "@type": "ImageObject",
        "url": "/static/favicons/android-chrome-192x192.png"
      }
    },
    "description": "Want more accurate page view counts? Learn how to create your own microservice for tracking real-time view counts using Firebase and then visualize those counts using React."
  }</script><meta name="next-head-count" content="27"/><noscript data-n-css="true"></noscript><link rel="preload" href="/_next/static/chunks/main-2cc49d93d482d84792e3.js" as="script"/><link rel="preload" href="/_next/static/chunks/webpack-be4ef87a65561c94e9ab.js" as="script"/><link rel="preload" href="/_next/static/chunks/framework.4df82c4704a0136f6a4b.js" as="script"/><link rel="preload" href="/_next/static/chunks/commons.3b42515caf842d5ab116.js" as="script"/><link rel="preload" href="/_next/static/chunks/523a06839f15d78e0982bd9e4702a336e84e0beb.797c01331b5670d8b6a9.js" as="script"/><link rel="preload" href="/_next/static/chunks/8a2cce8d32d4a46d77b103d4ae61b72b298cbc13.24fb7bf37ec09d3116a5.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/_app-54d71b082eedd36a6785.js" as="script"/><link rel="preload" href="/_next/static/chunks/76e9bb1e2b1c25c76d9849b27c7dee34ed2cfbde.b3362f08c0b5490ab27e.js" as="script"/><link rel="preload" href="/_next/static/chunks/8c8a7e375cfd3e73b66c823b4d4c3ac8ceeee6a2.0d778311861edd316128.js" as="script"/><link rel="preload" href="/_next/static/chunks/05d6c871555fb0d24fe57f9b1cef3fde70bdfa85.77af1318c49c25ece418.js" as="script"/><link rel="preload" href="/_next/static/chunks/fbfc3d82b5302c9a3d540f1f745b2fc442c9bea1.a1e93f9c45227e867129.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/blog/real-time-post-views-2510d578fabc01450482.js" as="script"/></head><body><div id="__next"><style data-emotion-css="ezux4g">html{line-height:1.15;-webkit-text-size-adjust:100%;}body{margin:0;}main{display:block;}h1{font-size:2em;margin:0.67em 0;}hr{box-sizing:content-box;height:0;overflow:visible;}pre{font-family:monospace,monospace;font-size:1em;}a{background-color:transparent;}abbr[title]{border-bottom:none;-webkit-text-decoration:underline;text-decoration:underline;-webkit-text-decoration:underline dotted;-webkit-text-decoration:underline dotted;text-decoration:underline dotted;}b,strong{font-weight:bolder;}code,kbd,samp{font-family:monospace,monospace;font-size:1em;}small{font-size:80%;}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline;}sub{bottom:-0.25em;}sup{top:-0.5em;}img{border-style:none;}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0;}button,input{overflow:visible;}button,select{text-transform:none;}button::-moz-focus-inner,[type="button"]::-moz-focus-inner,[type="reset"]::-moz-focus-inner,[type="submit"]::-moz-focus-inner{border-style:none;padding:0;}fieldset{padding:0.35em 0.75em 0.625em;}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal;}progress{vertical-align:baseline;}textarea{overflow:auto;}[type="checkbox"],[type="radio"]{box-sizing:border-box;padding:0;}[type="number"]::-webkit-inner-spin-button,[type="number"]::-webkit-outer-spin-button{-webkit-appearance:none !important;}input[type="number"]{-moz-appearance:textfield;}[type="search"]{-webkit-appearance:textfield;outline-offset:-2px;}[type="search"]::-webkit-search-decoration{-webkit-appearance:none !important;}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit;}details{display:block;}summary{display:list-item;}template{display:none;}[hidden]{display:none !important;}html{box-sizing:border-box;font-family:sans-serif;}*,*::before,*::after{box-sizing:border-box;}blockquote,dl,dd,h1,h2,h3,h4,h5,h6,hr,figure,p,pre{margin:0;}button{background:transparent;padding:0;}fieldset{margin:0;padding:0;}ol,ul{margin:0;padding:0;}html{font-family:Libre Baskerville,serif;line-height:1.5;-webkit-font-smoothing:antialiased;-webkit-text-size-adjust:100%;text-rendering:optimizelegibility;}hr{border-top-width:1px;}img{border-style:solid;}textarea{resize:vertical;}button,[role="button"]{cursor:pointer;}button::-moz-focus-inner{border:0 !important;}table{border-collapse:collapse;}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit;}a{color:inherit;-webkit-text-decoration:inherit;text-decoration:inherit;}button,input,optgroup,select,textarea{padding:0;line-height:inherit;color:inherit;}pre,code,kbd,samp{font-family:Libre Baskerville,serif;}img,svg,video,canvas,audio,iframe,embed,object{display:block;vertical-align:middle;}img,video{max-width:100%;height:auto;}html{line-height:1.5;color:#1A202C;}*,*::before,*::after{border-width:0;border-style:solid;border-color:#E2E8F0;}input:-ms-input-placeholder,textarea:-ms-input-placeholder{color:#A0AEC0;}input::-ms-input-placeholder,textarea::-ms-input-placeholder{color:#A0AEC0;}input::-webkit-input-placeholder,textarea::-webkit-input-placeholder{color:#A0AEC0;}input::-moz-placeholder,textarea::-moz-placeholder{color:#A0AEC0;}input:-ms-input-placeholder,textarea:-ms-input-placeholder{color:#A0AEC0;}input::placeholder,textarea::placeholder{color:#A0AEC0;}</style><style data-emotion-css="r2phdd">code{white-space:pre;}code[class*='language-'],pre[class*='language-']{color:#1A202C;background:none;font-family:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;text-align:left;word-spacing:normal;word-break:normal;word-wrap:normal;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;width:100%;}pre[class*='language-']{padding-top:1rem;padding-bottom:1rem;padding-left:1rem;padding-right:1rem;margin:1.5rem 0;overflow:auto;min-width:100%;font-size:0.9rem;white-space:nowrap;}:not(pre) > code[class*='language-'],pre[class*='language-']{background:#F7FAFC;border:1px solid #E2E8F0;border-radius:0.5rem;}:not(pre) > code[class*='language-']{padding:0.1em;border-radius:0.3em;white-space:normal;}.token.comment,.token.prolog,.token.doctype,.token.cdata{color:slategray;}.token.punctuation{color:#999;}.token.namespace{opacity:0.7;}.token.property,.token.tag,.token.boolean,.token.number,.token.constant,.token.symbol,.token.deleted{color:#905;}.token.selector,.token.attr-name,.token.string,.token.char,.token.builtin,.token.inserted{color:#690;}.token.operator,.token.entity,.token.url,.language-css .token.string,.style .token.string{color:#9a6e3a;}.token.atrule,.token.attr-value,.token.keyword{color:#07a;}.token.function,.token.class-name{color:#dd4a68;}.token.regex,.token.important,.token.variable{color:#e90;}.token.important,.token.bold{font-weight:bold;}.token.italic{font-style:italic;}.token.entity{cursor:help;}.mdx-marker{display:block;margin-left:-1rem;margin-right:-1rem;padding-left:1rem;padding-right:1rem;background-color:#E2E8F0;box-shadow:inset 3px 0px 0 0px #2a69ac;min-width:-webkit-fit-content;min-width:-moz-fit-content;min-width:fit-content;}.remark-code-title{padding:0.5rem 1rem;font-family:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;background:#E2E8F0;color:#1A202C;border:1px solid #E2E8F0;border-top-left-radius:0.5rem;border-top-right-radius:0.5rem;font-size:0.8rem;font-weight:600;margin-bottom:0;width:100%;}.remark-code-title + pre{border-top-left-radius:0;border-top-right-radius:0;margin-top:0;}code[class*='language-'],pre[class*='language-']{color:#1A202C;}:not(pre) > code[class*='language-'],pre[class*='language-']{background:#F7FAFC;border:1px solid #E2E8F0;}.mdx-marker{background-color:hsla(204,45%,96%,1);}*{box-sizing:border-box;margin:0;padding:0;}body,html{font-family:props => props.theme.fonts.main;height:100%;}::selection{background-color:#47a3f3;color:#fefefe;}html{min-width:360px;-webkit-scroll-behavior:smooth;-moz-scroll-behavior:smooth;-ms-scroll-behavior:smooth;scroll-behavior:smooth;}#__next{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;min-height:100vh;background:white;}</style><style data-emotion-css="19npd2y">.css-19npd2y{position:-webkit-sticky;position:sticky;z-index:10;top:0;-webkit-backdrop-filter:saturate(180%) blur(20px);backdrop-filter:saturate(180%) blur(20px);-webkit-transition:background-color 0.1 ease-in-out;transition:background-color 0.1 ease-in-out;}</style><style data-emotion-css="jnvpmc">.css-jnvpmc{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;max-width:900px;width:100%;background-color:rgba(255,255,255,0.8);padding:2rem;margin-top:0;margin-bottom:2rem;margin-left:auto;margin-right:auto;position:-webkit-sticky;position:sticky;z-index:10;top:0;-webkit-backdrop-filter:saturate(180%) blur(20px);backdrop-filter:saturate(180%) blur(20px);-webkit-transition:background-color 0.1 ease-in-out;transition:background-color 0.1 ease-in-out;}@media screen and (min-width:30em){.css-jnvpmc{margin-top:2rem;}}</style><nav class="css-jnvpmc"><style data-emotion-css="e1cvkh">.css-e1cvkh{border-radius:0.25rem;font-weight:semibold;display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-appearance:none;-moz-appearance:none;appearance:none;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-transition:all 250ms;transition:all 250ms;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;position:relative;white-space:nowrap;vertical-align:middle;line-height:1.2;outline:none;height:2.5rem;min-width:2.5rem;font-size:1rem;padding-left:1rem;padding-right:1rem;background-color:#EDF2F7;padding:0;}.css-e1cvkh:hover{background-color:#E2E8F0;}.css-e1cvkh:focus{box-shadow:0 0 0 3px rgba(66,153,225,0.6);}.css-e1cvkh:active,.css-e1cvkh[data-active=true]{background-color:#CBD5E0;}.css-e1cvkh:disabled,.css-e1cvkh:disabled:focus,.css-e1cvkh:disabled:hover,.css-e1cvkh[aria-disabled=true],.css-e1cvkh[aria-disabled=true]:focus,.css-e1cvkh[aria-disabled=true]:hover{opacity:0.4;cursor:not-allowed;box-shadow:none;}</style><button type="button" aria-label="Toggle dark mode" class="css-e1cvkh"><style data-emotion-css="1im46kq">.css-1im46kq{width:1em;height:1em;color:currentColor;display:inline-block;vertical-align:middle;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;-webkit-backface-visibility:hidden;backface-visibility:hidden;}.css-1im46kq:not(:root){overflow:hidden;}</style><svg viewBox="0 0 24 24" focusable="false" role="presentation" aria-hidden="true" class="css-1im46kq"><path fill="currentColor" d="M21.4,13.7C20.6,13.9,19.8,14,19,14c-5,0-9-4-9-9c0-0.8,0.1-1.6,0.3-2.4c0.1-0.3,0-0.7-0.3-1 c-0.3-0.3-0.6-0.4-1-0.3C4.3,2.7,1,7.1,1,12c0,6.1,4.9,11,11,11c4.9,0,9.3-3.3,10.6-8.1c0.1-0.3,0-0.7-0.3-1 C22.1,13.7,21.7,13.6,21.4,13.7z"></path></svg></button><div class="css-0"><style data-emotion-css="e8wno0">.css-e8wno0{border-radius:0.25rem;font-weight:semibold;display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-appearance:none;-moz-appearance:none;appearance:none;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-transition:all 250ms;transition:all 250ms;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;position:relative;white-space:nowrap;vertical-align:middle;line-height:1.2;outline:none;height:2.5rem;min-width:2.5rem;font-size:1rem;padding-left:1rem;padding-right:1rem;color:inherit;padding:0.25rem;}@media screen and (min-width:30em){.css-e8wno0{padding:1rem;}}.css-e8wno0:hover{background-color:#EDF2F7;}.css-e8wno0:focus{box-shadow:0 0 0 3px rgba(66,153,225,0.6);}.css-e8wno0:active,.css-e8wno0[data-active=true]{background-color:#E2E8F0;}.css-e8wno0:disabled,.css-e8wno0:disabled:focus,.css-e8wno0:disabled:hover,.css-e8wno0[aria-disabled=true],.css-e8wno0[aria-disabled=true]:focus,.css-e8wno0[aria-disabled=true]:hover{opacity:0.4;cursor:not-allowed;box-shadow:none;}</style><a type="button" href="/dashboard" class="css-e8wno0">Dashboard</a><a type="button" href="/blog" class="css-e8wno0">Blog</a><a type="button" href="/about" class="css-e8wno0">About</a><a type="button" href="/" class="css-e8wno0">Home</a></div></nav><style data-emotion-css="8dowvo">.css-8dowvo{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;background-color:#fff;color:#000;padding-left:2rem;padding-right:2rem;}</style><main class="css-8dowvo"><style data-emotion-css="oerei3">.css-oerei3{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;margin:0 auto 4rem auto;max-width:700px;width:100%;}</style><article class="css-oerei3"><style data-emotion-css="1mpvj6s">.css-1mpvj6s{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;-webkit-box-pack:start;-webkit-justify-content:flex-start;-ms-flex-pack:start;justify-content:flex-start;max-width:700px;width:100%;margin-bottom:2rem;}</style><div class="css-1mpvj6s"><style data-emotion-css="izb4lh">.css-izb4lh{font-size:2.25rem;line-height:1.25;font-weight:800;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";-webkit-letter-spacing:-0.025em;-moz-letter-spacing:-0.025em;-ms-letter-spacing:-0.025em;letter-spacing:-0.025em;margin-bottom:0.5rem;}@media screen and (min-width:48em){.css-izb4lh{font-size:3rem;}}</style><h1 class="css-izb4lh">Real-Time Blog Post Views With React and Firebase</h1><style data-emotion-css="1e4wgo2">.css-1e4wgo2{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:initial;-webkit-box-align:initial;-ms-flex-align:initial;align-items:initial;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;margin-top:0.5rem;width:100%;margin-bottom:1rem;}@media screen and (min-width:30em){.css-1e4wgo2{-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}}</style><div class="css-1e4wgo2"><style data-emotion-css="70qvj9">.css-70qvj9{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}</style><div class="css-70qvj9"><style data-emotion-css="cd6pp5">.css-cd6pp5{font-size:calc(1.5rem / 2.5);line-height:1.5rem;vertical-align:top;display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;border-radius:9999px;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;position:relative;width:1.5rem;height:1.5rem;background-color:#7c7fa9;color:#1A202C;margin-right:0.5rem;}</style><div class="css-cd6pp5"><style data-emotion-css="1c23ut5">.css-1c23ut5{text-align:center;text-transform:uppercase;font-weight:700;width:1.5rem;height:1.5rem;}</style><div aria-label="Lee Robinson" class="css-1c23ut5">LR</div></div><style data-emotion-css="kmw5g9">.css-kmw5g9{font-family:Libre Baskerville,serif;font-size:0.875rem;color:#2D3748;}</style><p class="css-kmw5g9">Lee Robinson / <!-- -->August 21, 2019</p></div><style data-emotion-css="1cgj2c8">.css-1cgj2c8{font-family:Libre Baskerville,serif;font-size:0.875rem;color:#718096;min-width:100px;margin-top:0.5rem;}@media screen and (min-width:30em){.css-1cgj2c8{margin-top:0;}}</style><p class="css-1cgj2c8">8 min read<!-- --> â€¢ <!-- -->â€“â€“â€“ views</p></div></div><style data-emotion-css="gj0z5j">.css-gj0z5j{font-family:Libre Baskerville,serif;margin-top:1rem;line-height:1.625;margin-bottom:2rem;}</style><p class="css-gj0z5j"><style data-emotion-css="cw6lli">.css-cw6lli{-webkit-transition:all 0.15s ease-out;transition:all 0.15s ease-out;cursor:pointer;-webkit-text-decoration:none;text-decoration:none;outline:none;color:hsl(208,99%,44%);}.css-cw6lli:hover{-webkit-text-decoration:underline;text-decoration:underline;}.css-cw6lli:focus{box-shadow:0 0 0 3px rgba(66,153,225,0.6);}.css-cw6lli:disabled,.css-cw6lli:disabled:focus,.css-cw6lli:disabled:hover,.css-cw6lli[aria-disabled=true],.css-cw6lli[aria-disabled=true]:focus,.css-cw6lli[aria-disabled=true]:hover{opacity:0.4;cursor:not-allowed;-webkit-text-decoration:none;text-decoration:none;}</style><a target="_blank" rel="noopener noreferrer" href="https://github.com/timqian/chart.xkcd" class="css-cw6lli"><img src="/static/images/real-time-post-views/chart.png" alt="Blog Post Views"/></a></p><p class="css-gj0z5j">One metric for a website&#x27;s success is the amount of traffic it receives.
For a blog, this translates to page views. Articles with lots of views indicate the content your readers care most about.
This helps drive future articles.</p><p class="css-gj0z5j">Most people measure view counts via analytics (like <a target="_blank" rel="noopener noreferrer" href="https://analytics.google.com/analytics/web/" class="css-cw6lli">Google Analytics</a>).
However, with the rise of ad-blocking browser extensions, these counts are likely <a target="_blank" rel="noopener noreferrer" href="https://moz.com/blog/analytics-black-holes" class="css-cw6lli">~10% off</a> (especially if your target market is tech).
What if we could have better accuracy, better performance, and better privacy for our users?</p><style data-emotion-css="kknk9a">.css-kknk9a{-webkit-scroll-margin-top:100px;-moz-scroll-margin-top:100px;-ms-scroll-margin-top:100px;scroll-margin-top:100px;-webkit-scroll-snap-margin:100px;-moz-scroll-snap-margin:100px;-ms-scroll-snap-margin:100px;scroll-snap-margin:100px;}.css-kknk9a[id]{pointer-events:none;}.css-kknk9a[id]:before{display:block;height:6rem;margin-top:-6rem;visibility:hidden;content:"";}.css-kknk9a[id]:hover a{opacity:1;}</style><style data-emotion-css="1f99qqg">.css-1f99qqg{font-size:1.25rem;line-height:1.25;font-weight:800;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";margin-bottom:1em;margin-top:2em;-webkit-scroll-margin-top:100px;-moz-scroll-margin-top:100px;-ms-scroll-margin-top:100px;scroll-margin-top:100px;-webkit-scroll-snap-margin:100px;-moz-scroll-snap-margin:100px;-ms-scroll-snap-margin:100px;scroll-snap-margin:100px;}@media screen and (min-width:48em){.css-1f99qqg{font-size:1.5rem;}}.css-1f99qqg[id]{pointer-events:none;}.css-1f99qqg[id]:before{display:block;height:6rem;margin-top:-6rem;visibility:hidden;content:"";}.css-1f99qqg[id]:hover a{opacity:1;}</style><h2 id="table-of-contents" class="css-1f99qqg"><style data-emotion-css="12m0k8p">.css-12m0k8p{pointer-events:auto;}</style><div class="css-12m0k8p">Table of Contents<style data-emotion-css="1evxenp">.css-1evxenp{color:#3182ce;font-weight:600;outline:none;opacity:0;margin-left:0.375rem;}.css-1evxenp:focus{opacity:1;box-shadow:0 0 0 3px rgba(66,153,225,0.6);}</style><a aria-label="anchor" href="#table-of-contents" class="css-1evxenp">#</a></div></h2><style data-emotion-css="f9izp6">.css-f9izp6{padding-top:0.5rem;padding-left:1rem;margin-left:0.5rem;margin-bottom:2rem;}</style><ol class="css-f9izp6"><style data-emotion-css="1fu0ejk">.css-1fu0ejk{padding-bottom:0.25rem;}</style><li class="css-1fu0ejk"><a href="/blog/real-time-post-views#who-is-this-for" class="css-cw6lli">Who Is This For?</a></li><li class="css-1fu0ejk"><a href="/blog/real-time-post-views#technical-overview" class="css-cw6lli">Technical Overview</a></li><li class="css-1fu0ejk"><a href="/blog/real-time-post-views#setting-up-firebase" class="css-cw6lli">Setting Up Firebase</a></li><li class="css-1fu0ejk"><a href="/blog/real-time-post-views#creating-the-microservice" class="css-cw6lli">Creating The Microservice</a></li><li class="css-1fu0ejk"><a href="/blog/real-time-post-views#deploying-and-testing-view-counts" class="css-cw6lli">Deploying and Testing View Counts</a></li><li class="css-1fu0ejk"><a href="/blog/real-time-post-views#lazy-loading-firebase-client-side" class="css-cw6lli">Lazy-Loading Firebase Client Side</a></li><li class="css-1fu0ejk"><a href="/blog/real-time-post-views#real-time-view-count-updates" class="css-cw6lli">Real-Time View Count Updates</a></li><li class="css-1fu0ejk"><a href="/blog/real-time-post-views#conclusion" class="css-cw6lli">Conclusion</a></li></ol><h2 id="who-is-this-for" class="css-1f99qqg"><div class="css-12m0k8p">Who Is This for?<a aria-label="anchor" href="#who-is-this-for" class="css-1evxenp">#</a></div></h2><p class="css-gj0z5j">Anyone running their own blog, whether that&#x27;s using
vanilla React or a static-site generator like <a target="_blank" rel="noopener noreferrer" href="https://www.gatsbyjs.com/" class="css-cw6lli">Gatsby</a> or <a target="_blank" rel="noopener noreferrer" href="https://nextjs.org/features/static-exporting" class="css-cw6lli">Next.js</a>.</p><h2 id="technical-overview" class="css-1f99qqg"><div class="css-12m0k8p">Technical Overview<a aria-label="anchor" href="#technical-overview" class="css-1evxenp">#</a></div></h2><style data-emotion-css="a1xtsk">.css-a1xtsk{font-size:1.25rem;line-height:1.25;font-weight:800;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";margin-bottom:1em;margin-top:2em;-webkit-scroll-margin-top:100px;-moz-scroll-margin-top:100px;-ms-scroll-margin-top:100px;scroll-margin-top:100px;-webkit-scroll-snap-margin:100px;-moz-scroll-snap-margin:100px;-ms-scroll-snap-margin:100px;scroll-snap-margin:100px;}.css-a1xtsk[id]{pointer-events:none;}.css-a1xtsk[id]:before{display:block;height:6rem;margin-top:-6rem;visibility:hidden;content:"";}.css-a1xtsk[id]:hover a{opacity:1;}</style><h3 id="objective" class="css-a1xtsk"><div class="css-12m0k8p">Objective<a aria-label="anchor" href="#objective" class="css-1evxenp">#</a></div></h3><p class="css-gj0z5j">Display a real-time view count for a given blog post.
This should not block the page load and should log views asynchronously.
The client should automatically update when it receives a new count from the server.</p><h3 id="server" class="css-a1xtsk"><div class="css-12m0k8p">Server<a aria-label="anchor" href="#server" class="css-1evxenp">#</a></div></h3><p class="css-gj0z5j">To track views, we will be creating a serverless microservice with <a target="_blank" rel="noopener noreferrer" href="https://github.com/zeit/micro" class="css-cw6lli">Micro</a> and a <a target="_blank" rel="noopener noreferrer" href="https://firebase.google.com/docs/database" class="css-cw6lli">Firebase Realtime Database</a>.
Given an ID query parameter (<style data-emotion-css="gsdies">.css-gsdies{display:inline-block;font-family:Libre Baskerville,serif;font-size:0.84em;padding-left:0.2em;padding-right:0.2em;border-radius:0.125rem;background-color:#fefcbf;color:#744210;}</style><code class="css-gsdies">/?id=$id</code>) our microservice should increment views for the corresponding post in Firebase.
It should also prevent abuse by logging IPs.</p><h3 id="client" class="css-a1xtsk"><div class="css-12m0k8p">Client<a aria-label="anchor" href="#client" class="css-1evxenp">#</a></div></h3><p class="css-gj0z5j">Our client application should <a target="_blank" rel="noopener noreferrer" href="https://nextjs.org/learn/excel/lazy-loading-components" class="css-cw6lli">lazy-load</a> the <a target="_blank" rel="noopener noreferrer" href="https://firebase.google.com/docs/reference/js" class="css-cw6lli">Firebase JavaScript SDK</a> on page load and subscribe to view counts.
When it receives a new count, the counter should highlight and update.</p><p class="css-gj0z5j">We can host and deploy this entire solution <strong>for free</strong> using Firebase&#x27;s <a target="_blank" rel="noopener noreferrer" href="https://firebase.google.com/pricing/" class="css-cw6lli">free tier</a> and <a target="_blank" rel="noopener noreferrer" href="https://vercel.com" class="css-cw6lli">Vercel</a>. Amazing.</p><h2 id="setting-up-firebase" class="css-1f99qqg"><div class="css-12m0k8p">Setting up Firebase<a aria-label="anchor" href="#setting-up-firebase" class="css-1evxenp">#</a></div></h2><ol class="css-f9izp6"><li class="css-1fu0ejk">If you do not have a Firebase account, create one first.</li><li class="css-1fu0ejk">Create a new project.</li><li class="css-1fu0ejk">Navigate to &quot;Database&quot; and click &quot;Create Database&quot;.
<img src="/static/images/real-time-post-views/firebase/step1.png" alt="Create Firebase Database"/></li><li class="css-1fu0ejk">Start in test mode and click next.
<img src="/static/images/real-time-post-views/firebase/step2.png" alt="Create Firebase Database"/></li><li class="css-1fu0ejk">Choose your database location and click done.
<img src="/static/images/real-time-post-views/firebase/step3.png" alt="Create Firebase Database"/></li><li class="css-1fu0ejk">In the top left, click on &quot;Project Settings&quot;.
<img src="/static/images/real-time-post-views/firebase/step4.png" alt="Create Firebase Database"/></li><li class="css-1fu0ejk">Navigate to &quot;Service Accounts&quot; tab and click &quot;Generate new private key&quot;. Save the <code class="css-gsdies">.json</code> file. You will need this later.
<img src="/static/images/real-time-post-views/firebase/step5.png" alt="Create Firebase Database"/></li></ol><p class="css-gj0z5j">We&#x27;re finished! ðŸŽ‰ You have successfully set up a realtime database, as well as generated credentials for your microservice to connect to the database.</p><h2 id="creating-the-microservice" class="css-1f99qqg"><div class="css-12m0k8p">Creating the Microservice<a aria-label="anchor" href="#creating-the-microservice" class="css-1evxenp">#</a></div></h2><style data-emotion-css="13clxh3">.css-13clxh3 > *:first-of-type{margin-top:0;margin-left:8px;}</style><style data-emotion-css="hb9g3i">.css-hb9g3i{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;position:relative;overflow:hidden;padding-left:0.75rem;padding-right:1rem;padding-top:0.75rem;padding-bottom:0.75rem;background-color:#ebf8ff;border-left:4px solid;border-color:#3182ce;margin-top:1rem;width:98%;margin-bottom:2rem;}.css-hb9g3i > *:first-of-type{margin-top:0;margin-left:8px;}</style><div class="css-hb9g3i"><style data-emotion-css="n85a83">.css-n85a83{font-family:Libre Baskerville,serif;margin-top:1rem;line-height:1.625;}</style><p class="css-n85a83">Update 2020: I&#x27;ve switched my microservice to an <a target="_blank" rel="noopener noreferrer" href="https://github.com/leerob/leerob.io/blob/master/pages/api/increment-views.js" class="css-cw6lli">API route</a> inside my Next.js application. If you&#x27;re using Next.js, I would recommend this approach.</p></div><p class="css-gj0z5j">This blog post was inspired by Guillermo Rauch&#x27;s <a target="_blank" rel="noopener noreferrer" href="https://github.com/rauchg/blog" class="css-cw6lli">blog</a>, where he open-sourced <a target="_blank" rel="noopener noreferrer" href="https://github.com/rauchg/blog-views" class="css-cw6lli">his code</a>. I&#x27;ve updated some things but this is largely inspired by his work ðŸŽ‰</p><p class="css-gj0z5j">You can view the entire source code <a target="_blank" rel="noopener noreferrer" href="https://github.com/leerob/blog-views" class="css-cw6lli">here</a>. I&#x27;ll be explaining some key concepts for how the microservice works.</p><h3 id="connecting-to-firebase" class="css-a1xtsk"><div class="css-12m0k8p">Connecting to Firebase<a aria-label="anchor" href="#connecting-to-firebase" class="css-1evxenp">#</a></div></h3><p class="css-gj0z5j">Before we can log views, we need to connect to our Firebase Realtime Database.
Place your <code class="css-gsdies">service-account.json</code> in the root of the repo.
This file is inside <code class="css-gsdies">.gitignore</code> so it won&#x27;t be committed to GitHub. We can connect to the database using <a target="_blank" rel="noopener noreferrer" href="" class="css-cw6lli">firebase-admin</a>. Make sure you update the <code class="css-gsdies">databaseURL</code>.</p><pre class="language-js" mb="8"><code class="language-js"><span class="token keyword">const</span> admin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;firebase-admin&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> join <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;path&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> cert <span class="token operator">=</span> <span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#x27;../service-account.json&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

admin<span class="token punctuation">.</span><span class="token method function property-access">initializeApp</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  credential<span class="token punctuation">:</span> admin<span class="token punctuation">.</span><span class="token property-access">credential</span><span class="token punctuation">.</span><span class="token method function property-access">cert</span><span class="token punctuation">(</span>cert<span class="token punctuation">)</span><span class="token punctuation">,</span>
  databaseURL<span class="token punctuation">:</span> <span class="token string">&#x27;https://your-blog.firebaseio.com&#x27;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span><span class="token property-access">exports</span> <span class="token operator">=</span> admin<span class="token punctuation">.</span><span class="token method function property-access">database</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><h3 id="tracking-views" class="css-a1xtsk"><div class="css-12m0k8p">Tracking Views<a aria-label="anchor" href="#tracking-views" class="css-1evxenp">#</a></div></h3><p class="css-gj0z5j">To track a view, we need to look at the database for <code class="css-gsdies">views -&gt; id</code>.</p><pre class="language-js" mb="8"><code class="language-js"><span class="token keyword">const</span> db <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;./db&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span><span class="token method-variable function-variable method function property-access">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token function">incrementViews</span><span class="token punctuation">(</span><span class="token parameter">id</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> ref <span class="token operator">=</span> db<span class="token punctuation">.</span><span class="token method function property-access">ref</span><span class="token punctuation">(</span><span class="token string">&#x27;views&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">child</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> ref<span class="token punctuation">.</span><span class="token method function property-access">transaction</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">currentViews</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// if it has never been set it returns null</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>currentViews <span class="token operator">===</span> <span class="token keyword null nil">null</span><span class="token punctuation">)</span> currentViews <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> currentViews <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><h3 id="putting-it-all-together" class="css-a1xtsk"><div class="css-12m0k8p">Putting It All Together<a aria-label="anchor" href="#putting-it-all-together" class="css-1evxenp">#</a></div></h3><p class="css-gj0z5j">The entry point into the application sets CORS headers, checks for a valid request, parses the <code class="css-gsdies">id</code> query parameter, and increments the value for the given <code class="css-gsdies">id</code>. Make sure to update the URL for your blog.</p><pre class="language-js" mb="8"><code class="language-js"><span class="token keyword">const</span> verify <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;./lib/verify&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> parse <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;url&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> increment <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;./lib/increment-views&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span><span class="token method-variable function-variable method function property-access">exports</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> orig <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token property-access">headers</span><span class="token punctuation">.</span><span class="token property-access">origin</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token language-regex">https:<span class="token escape">\/</span><span class="token escape">\/</span><span class="token group">(</span><span class="token charclass">.</span><span class="token quantifier">*</span><span class="token special-escape escape">\.</span><span class="token group">)</span><span class="token quantifier">?</span>leerob<span class="token special-escape escape">\.</span>io</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span><span class="token method function property-access">test</span><span class="token punctuation">(</span>orig<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    res<span class="token punctuation">.</span><span class="token method function property-access">setHeader</span><span class="token punctuation">(</span><span class="token string">&#x27;Access-Control-Allow-Origin&#x27;</span><span class="token punctuation">,</span> orig<span class="token punctuation">)</span><span class="token punctuation">;</span>
    res<span class="token punctuation">.</span><span class="token method function property-access">setHeader</span><span class="token punctuation">(</span><span class="token string">&#x27;Access-Control-Allow-Methods&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;GET&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// ensure no duplicate views</span>
  <span class="token function">verify</span><span class="token punctuation">(</span>req<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span>
    query<span class="token punctuation">:</span> <span class="token punctuation">{</span> id <span class="token punctuation">}</span>
  <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">parse</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span><span class="token property-access">url</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> err <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&#x27;Missing `id` parameter&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    err<span class="token punctuation">.</span><span class="token property-access">statusCode</span> <span class="token operator">=</span> <span class="token number">400</span><span class="token punctuation">;</span>
    <span class="token keyword">throw</span> err<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">const</span> <span class="token punctuation">{</span> snapshot <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">increment</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span> total<span class="token punctuation">:</span> snapshot<span class="token punctuation">.</span><span class="token method function property-access">val</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><h2 id="deploying-and-testing-view-counts" class="css-1f99qqg"><div class="css-12m0k8p">Deploying and Testing View Counts<a aria-label="anchor" href="#deploying-and-testing-view-counts" class="css-1evxenp">#</a></div></h2><p class="css-gj0z5j">After you&#x27;ve <a target="_blank" rel="noopener noreferrer" href="https://github.com/leerob/blog-views" class="css-cw6lli">cloned the repo</a> and followed the steps above to substitute your values, run <code class="css-gsdies">yarn dev</code> to start the microservice.</p><p class="css-gj0z5j">Using your favorite REST client or your browser, you can now hit <code class="css-gsdies">http://localhost:3000?id=blog-post</code> to log a view.</p><p class="css-gj0z5j"><img src="/static/images/real-time-post-views/microservice.jpg" alt="Testing Microservice"/></p><p class="css-gj0z5j">We can confirm it was logged correctly by checking Firebase.</p><p class="css-gj0z5j"><img src="/static/images/real-time-post-views/testing-database.png" alt="Testing Firebase"/></p><h3 id="deployment-with-vercel" class="css-a1xtsk"><div class="css-12m0k8p">Deployment with Vercel<a aria-label="anchor" href="#deployment-with-vercel" class="css-1evxenp">#</a></div></h3><p class="css-gj0z5j">We can configure our microservice to deploy with <a target="_blank" rel="noopener noreferrer" href="https://vercel.com" class="css-cw6lli">Vercel</a> through a <code class="css-gsdies">vercel.json</code> file.
Update the <code class="css-gsdies">name</code> and <code class="css-gsdies">alias</code> to be unique for your microservice.</p><pre class="language-json" mb="8"><code class="language-json"><span class="token punctuation">{</span>
  <span class="token property">&quot;version&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
  <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;your-blog-views&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;alias&quot;</span><span class="token operator">:</span> <span class="token string">&quot;your-blog-views&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;builds&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> <span class="token property">&quot;src&quot;</span><span class="token operator">:</span> <span class="token string">&quot;index.js&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;use&quot;</span><span class="token operator">:</span> <span class="token string">&quot;now-micro&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><p class="css-gj0z5j">After installing the <a target="_blank" rel="noopener noreferrer" href="https://vercel.com/download" class="css-cw6lli">Vercel CLI</a>, you can deploy in <em>one command</em> ðŸš€</p><pre class="language-bash" mb="8"><code class="language-bash">$ vc --prod
</code></pre><p class="css-gj0z5j">You should now be able to hit <code class="css-gsdies">https://your-blog-views.now.sh/</code>.</p><h2 id="lazy-loading-firebase-client-side" class="css-1f99qqg"><div class="css-12m0k8p">Lazy-Loading Firebase Client Side<a aria-label="anchor" href="#lazy-loading-firebase-client-side" class="css-1evxenp">#</a></div></h2><p class="css-gj0z5j">Firebase is a large module. In fact, it&#x27;s larger than <code class="css-gsdies">react</code>, <code class="css-gsdies">react-dom</code> and <code class="css-gsdies">next</code> <em>combined</em>.
We only want to load the parts of Firebase we need (<code class="css-gsdies">firebase/app</code> and <code class="css-gsdies">firebase/database</code>) and we don&#x27;t want to block the page load.</p><p class="css-gj0z5j">Let&#x27;s lazy-load the Firebase JavaScript SDK.</p><pre class="language-js" mb="8"><code class="language-js"><span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">loadDb</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> firebase <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword module">import</span><span class="token punctuation">(</span><span class="token string">&#x27;firebase/app&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">await</span> <span class="token keyword module">import</span><span class="token punctuation">(</span><span class="token string">&#x27;firebase/database&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    firebase<span class="token punctuation">.</span><span class="token method function property-access">initializeApp</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      databaseURL<span class="token punctuation">:</span> <span class="token string">&#x27;https://your-blog.firebaseio.com&#x27;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">/*
     * We skip the &quot;already exists&quot; message which is
     * not an actual error when we&#x27;re hot-reloading.
     */</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token language-regex">already exists</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span><span class="token method function property-access">test</span><span class="token punctuation">(</span>error<span class="token punctuation">.</span><span class="token property-access">message</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">error</span><span class="token punctuation">(</span><span class="token string">&#x27;Firebase initialization error&#x27;</span><span class="token punctuation">,</span> error<span class="token punctuation">.</span><span class="token property-access">stack</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> firebase<span class="token punctuation">.</span><span class="token method function property-access">database</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">ref</span><span class="token punctuation">(</span><span class="token string">&#x27;views&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><h2 id="real-time-view-count-updates" class="css-1f99qqg"><div class="css-12m0k8p">Real-Time View Count Updates<a aria-label="anchor" href="#real-time-view-count-updates" class="css-1evxenp">#</a></div></h2><p class="css-gj0z5j">Now that our microservice is deployed, we can instruct our client to asynchronously log a view when the page loads. We also need to subscribe to the view counts for the given blog post ID so the client updates every time the value changes.</p><p class="css-gj0z5j">Let&#x27;s create a <code class="css-gsdies">&lt;ViewCounter /&gt;</code> component.</p><p class="css-gj0z5j"><strong>Note</strong>: The <code class="css-gsdies">&lt;Views /&gt;</code> component will be created next.</p><pre class="language-jsx" mb="8"><code class="language-jsx"><span class="token keyword module">import</span> <span class="token maybe-class-name">React</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> useState<span class="token punctuation">,</span> useEffect <span class="token punctuation">}</span> <span class="token keyword module">from</span> <span class="token string">&#x27;react&#x27;</span><span class="token punctuation">;</span>

<span class="token keyword module">import</span> loadDb <span class="token keyword module">from</span> <span class="token string">&#x27;../lib/load-db&#x27;</span><span class="token punctuation">;</span>

<span class="token keyword module">import</span> <span class="token maybe-class-name">Views</span> <span class="token keyword module">from</span> <span class="token string">&#x27;./views&#x27;</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">ViewCounter</span></span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> id <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>views<span class="token punctuation">,</span> setViews<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">&#x27;&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// Subscribe to view count updates</span>
  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token function-variable function">onViews</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">newViews</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token function">setViews</span><span class="token punctuation">(</span>newViews<span class="token punctuation">.</span><span class="token method function property-access">val</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> db<span class="token punctuation">;</span>

    <span class="token keyword">const</span> <span class="token function-variable function">fetchData</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
      db <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">loadDb</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      db<span class="token punctuation">.</span><span class="token method function property-access">child</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">on</span><span class="token punctuation">(</span><span class="token string">&#x27;value&#x27;</span><span class="token punctuation">,</span> onViews<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token function">fetchData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token function">cleanup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      db<span class="token punctuation">.</span><span class="token method function property-access">child</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">off</span><span class="token punctuation">(</span><span class="token string">&#x27;value&#x27;</span><span class="token punctuation">,</span> onViews<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>id<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// Asynchronously log a view</span>
  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token function-variable function">registerView</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span>
      <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">https://your-blog-views.now.sh/?id=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token function">encodeURIComponent</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token function">registerView</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>id<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Views</span></span> <span class="token attr-name">views</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>views<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token maybe-class-name">ViewCounter</span><span class="token punctuation">;</span>
</code></pre><p class="css-gj0z5j">Now, let&#x27;s look at <code class="css-gsdies">&lt;Views /&gt;</code>.
This component should accept a prop <code class="css-gsdies">views</code> and display a formatted string that highlights when the value updates.</p><ul class="css-f9izp6"><li class="css-1fu0ejk">For styling, I&#x27;m using <a target="_blank" rel="noopener noreferrer" href="https://www.styled-components.com/" class="css-cw6lli">styled-components</a>.</li><li class="css-1fu0ejk">For formatting, I&#x27;m using <a target="_blank" rel="noopener noreferrer" href="https://www.npmjs.com/package/comma-number" class="css-cw6lli">comma-number</a>.</li></ul><p class="css-gj0z5j">First, let&#x27;s look at the styles. A <code class="css-gsdies">highlight</code> prop controls a CSS animation.</p><pre class="language-cs" mb="8"><code class="language-cs"><span class="token keyword">const</span> highlightBackgound <span class="token operator">=</span> keyframes`
    <span class="token keyword">from</span> <span class="token punctuation">{</span>
        background<span class="token operator">-</span>color<span class="token punctuation">:</span> yellow<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    to <span class="token punctuation">{</span>
        background<span class="token operator">-</span>color<span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
`<span class="token punctuation">;</span>

<span class="token keyword">const</span> StyledViews <span class="token operator">=</span> styled<span class="token punctuation">.</span>span`
    font<span class="token operator">-</span>size<span class="token punctuation">:</span> <span class="token number">0.9</span>em<span class="token punctuation">;</span>
    text<span class="token operator">-</span>transform<span class="token punctuation">:</span> uppercase<span class="token punctuation">;</span>
    letter<span class="token operator">-</span>spacing<span class="token punctuation">:</span> <span class="token number">0.04</span>em<span class="token punctuation">;</span>

    $<span class="token punctuation">{</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
        props<span class="token punctuation">.</span>highlight <span class="token operator">&amp;&amp;</span>
        css`
            animation<span class="token operator">-</span>name<span class="token punctuation">:</span> $<span class="token punctuation">{</span>highlightBackgound<span class="token punctuation">}</span><span class="token punctuation">;</span>
            animation<span class="token operator">-</span>duration<span class="token punctuation">:</span> <span class="token number">1</span>s<span class="token punctuation">;</span>
        `<span class="token punctuation">}</span>
`<span class="token punctuation">;</span>
</code></pre><p class="css-gj0z5j">When a new <code class="css-gsdies">views</code> prop is passed to the component, it sets the highlight state to <code class="css-gsdies">true</code>.
After 2 seconds, it resets the highlight state.</p><pre class="language-jsx" mb="8"><code class="language-jsx"><span class="token keyword module">import</span> format <span class="token keyword module">from</span> <span class="token string">&#x27;comma-number&#x27;</span><span class="token punctuation">;</span>
<span class="token keyword module">import</span> <span class="token maybe-class-name">React</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> useState<span class="token punctuation">,</span> useEffect <span class="token punctuation">}</span> <span class="token keyword module">from</span> <span class="token string">&#x27;react&#x27;</span><span class="token punctuation">;</span>
<span class="token keyword module">import</span> styled<span class="token punctuation">,</span> <span class="token punctuation">{</span> css<span class="token punctuation">,</span> keyframes <span class="token punctuation">}</span> <span class="token keyword module">from</span> <span class="token string">&#x27;styled-components&#x27;</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">Views</span></span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>highlight<span class="token punctuation">,</span> setHighlight<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>props<span class="token punctuation">.</span><span class="token property-access">views</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">setHighlight</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token function">setHighlight</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>props<span class="token punctuation">.</span><span class="token property-access">views</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> formattedViews <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token function">format</span><span class="token punctuation">(</span>props<span class="token punctuation">.</span><span class="token property-access">views</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> views</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Container</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">StyledViews</span></span> <span class="token attr-name">highlight</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>highlight<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string"> - </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>
        props<span class="token punctuation">.</span><span class="token property-access">views</span> <span class="token operator">&amp;&amp;</span> formattedViews
      <span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">StyledViews</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Container</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token maybe-class-name">Views</span><span class="token punctuation">;</span>
</code></pre><p class="css-gj0z5j">Finally, we can consume the view counter in our blog post and pass in the ID.</p><pre class="language-jsx" mb="8"><code class="language-jsx"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">ViewCounter</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>post-id<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre><p class="css-gj0z5j">You can see a completed client-side example by checking out <a target="_blank" rel="noopener noreferrer" href="https://github.com/leerob/leerob.io" class="css-cw6lli">this blog post&#x27;s source code</a>.</p><h2 id="conclusion" class="css-1f99qqg"><div class="css-12m0k8p">Conclusion<a aria-label="anchor" href="#conclusion" class="css-1evxenp">#</a></div></h2><p class="css-gj0z5j">It works! ðŸŽ‰</p><p class="css-gj0z5j"><img src="/static/images/real-time-post-views/example.gif" alt="Blog Post Views Example Gif"/></p><p class="css-gj0z5j">I was able to migrate my page views from Google Analytics into Firebase via their web interface.</p><p class="css-gj0z5j"><img src="/static/images/real-time-post-views/blog-post-views.png" alt="Blog Post Views"/></p><p class="css-gj0z5j"><strong>Note</strong>: If your site receives a lot of traffic, you&#x27;ll need to upgrade from the Spark plan (free) to Blaze (pay-as-you-go).
On Spark, you can only have 100 simultaneous connections. With Blaze, you can have 100k.</p><p class="css-gj0z5j"><img src="/static/images/real-time-post-views/db-usage.png" alt="Database Usage"/></p><style data-emotion-css="1m95vvf">.css-1m95vvf{border:1px solid;border-color:#90cdf4;background-color:#ebf8ff;border-radius:4px;padding:1.5rem;margin-top:1rem;margin-bottom:1rem;width:100%;}</style><div class="css-1m95vvf"><style data-emotion-css="34ubhd">.css-34ubhd{font-size:1.25rem;line-height:1.25;font-weight:800;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";margin-bottom:0.5rem;}@media screen and (min-width:48em){.css-34ubhd{font-size:1.5rem;}}</style><h5 class="css-34ubhd">Subscribe to the newsletter</h5><style data-emotion-css="l2iagl">.css-l2iagl{font-family:Libre Baskerville,serif;}</style><p class="css-l2iagl">Get emails from me about web development, tech, and early access to new articles.</p><style data-emotion-css="1vgnk4f">.css-1vgnk4f{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;position:relative;margin-top:1rem;}</style><div class="css-1vgnk4f"><style data-emotion-css="1ga4kqw">.css-1ga4kqw{width:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;position:relative;-webkit-transition:all 0.2s;transition:all 0.2s;outline:none;-webkit-appearance:none;-moz-appearance:none;appearance:none;font-size:1rem;padding-left:1rem;padding-right:1rem;height:2.5rem;border-radius:0.25rem;border:1px solid;border-color:inherit;background-color:#fff;}.css-1ga4kqw:hover{border-color:#CBD5E0;}.css-1ga4kqw:focus{z-index:1;border-color:#3182ce;box-shadow:0 0 0 1px #3182ce;}.css-1ga4kqw:disabled,.css-1ga4kqw:disabled:focus,.css-1ga4kqw:disabled:hover,.css-1ga4kqw[aria-disabled=true],.css-1ga4kqw[aria-disabled=true]:focus,.css-1ga4kqw[aria-disabled=true]:hover{opacity:0.4;cursor:not-allowed;}.css-1ga4kqw[aria-invalid=true]{border-color:#e53e3e;box-shadow:0 0 0 1px #e53e3e;}.css-1ga4kqw[aria-readonly=true],.css-1ga4kqw[readonly]{background-color:transparent;box-shadow:none !important;-webkit-user-select:all;-moz-user-select:all;-ms-user-select:all;user-select:all;}</style><input type="email" aria-label="Email for newsletter" placeholder="tim@apple.com" class="css-1ga4kqw"/><style data-emotion-css="1fs9xe6">.css-1fs9xe6{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;position:absolute;height:2.5rem;width:6.75rem;font-size:1rem;top:0;z-index:2;right:0;}</style><div class="css-1fs9xe6"><style data-emotion-css="y5019p">.css-y5019p{border-radius:0.25rem;font-weight:800;display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-appearance:none;-moz-appearance:none;appearance:none;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-transition:all 250ms;transition:all 250ms;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;position:relative;white-space:nowrap;vertical-align:middle;line-height:1.2;outline:none;height:1.75rem;min-width:2rem;font-size:0.875rem;padding-left:0.75rem;padding-right:0.75rem;background-color:#EDF2F7;}.css-y5019p:hover{background-color:#E2E8F0;}.css-y5019p:focus{box-shadow:0 0 0 3px rgba(66,153,225,0.6);}.css-y5019p:active,.css-y5019p[data-active=true]{background-color:#CBD5E0;}.css-y5019p:disabled,.css-y5019p:disabled:focus,.css-y5019p:disabled:hover,.css-y5019p[aria-disabled=true],.css-y5019p[aria-disabled=true]:focus,.css-y5019p[aria-disabled=true]:hover{opacity:0.4;cursor:not-allowed;box-shadow:none;}</style><button aria-disabled="false" type="button" class="css-y5019p">Subscribe</button></div></div></div><style data-emotion-css="8fkoyy">.css-8fkoyy{margin-bottom:2rem;}</style><div class="css-8fkoyy"><style data-emotion-css="u5zpo1">.css-u5zpo1{-webkit-transition:all 0.15s ease-out;transition:all 0.15s ease-out;cursor:pointer;-webkit-text-decoration:none;text-decoration:none;outline:none;}.css-u5zpo1:hover{-webkit-text-decoration:underline;text-decoration:underline;}.css-u5zpo1:focus{box-shadow:0 0 0 3px rgba(66,153,225,0.6);}.css-u5zpo1:disabled,.css-u5zpo1:disabled:focus,.css-u5zpo1:disabled:hover,.css-u5zpo1[aria-disabled=true],.css-u5zpo1[aria-disabled=true]:focus,.css-u5zpo1[aria-disabled=true]:hover{opacity:0.4;cursor:not-allowed;-webkit-text-decoration:none;text-decoration:none;}</style><a target="_blank" rel="noopener noreferrer" href="https://mobile.twitter.com/search?q=https%3A%2F%2Fleerob.io%2Fblog%2Freal-time-post-views" class="css-u5zpo1">Discuss on Twitter</a> â€¢ <a target="_blank" rel="noopener noreferrer" href="https://github.com/leerob/leerob.io/edit/master/pages/blog/real-time-post-views.mdx" class="css-u5zpo1">Edit on GitHub</a></div><iframe title="Comments" src="https://fastfeedback.io/embed/BLspD6y8Bfn73LLm7nvW/real-time-post-views?theme=light" style="width:1px;min-width:100%"></iframe></article><style data-emotion-css="15wb3ll">.css-15wb3ll{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin-bottom:1rem;}</style><div class="css-15wb3ll"><style data-emotion-css="qm92kb">.css-qm92kb{margin-bottom:1rem;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;border:1px solid;border-radius:8px;border-color:#E2E8F0;padding:0.5rem;width:300px;}</style><div class="css-qm92kb"><style data-emotion-css="9hgyva animation-ao00sx">.css-9hgyva{border-color:#EDF2F7 !important;box-shadow:none !important;opacity:0.7;background:#EDF2F7;background-clip:padding-box !important;cursor:default;color:transparent !important;-webkit-animation:0.8s linear infinite alternate animation-ao00sx;animation:0.8s linear infinite alternate animation-ao00sx;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}.css-9hgyva::before,.css-9hgyva::after,.css-9hgyva *{visibility:hidden !important;}@-webkit-keyframes animation-ao00sx{from{border-color:#EDF2F7;background:#EDF2F7;}to{border-color:#A0AEC0;background:#A0AEC0;}}@keyframes animation-ao00sx{from{border-color:#EDF2F7;background:#EDF2F7;}to{border-color:#A0AEC0;background:#A0AEC0;}}</style><style data-emotion-css="3gh2pg">.css-3gh2pg{border-radius:2px;border-color:#EDF2F7 !important;box-shadow:none !important;opacity:0.7;background:#EDF2F7;background-clip:padding-box !important;cursor:default;color:transparent !important;-webkit-animation:0.8s linear infinite alternate animation-ao00sx;animation:0.8s linear infinite alternate animation-ao00sx;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}.css-3gh2pg::before,.css-3gh2pg::after,.css-3gh2pg *{visibility:hidden !important;}</style><div class="css-3gh2pg"><style data-emotion-css="1febq2i">.css-1febq2i{height:60px;width:60px;border-radius:8px;}</style><img alt="Spotify album cover" class="css-1febq2i"/></div><style data-emotion-css="138w5om">.css-138w5om{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;margin-left:0.75rem;}</style><div class="css-138w5om"><style data-emotion-css="ki2axk">.css-ki2axk{-webkit-transition:all 0.15s ease-out;transition:all 0.15s ease-out;cursor:pointer;-webkit-text-decoration:none;text-decoration:none;outline:none;font-weight:700;max-width:190px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;margin-bottom:0;}.css-ki2axk:hover{-webkit-text-decoration:underline;text-decoration:underline;}.css-ki2axk:focus{box-shadow:0 0 0 3px rgba(66,153,225,0.6);}.css-ki2axk:disabled,.css-ki2axk:disabled:focus,.css-ki2axk:disabled:hover,.css-ki2axk[aria-disabled=true],.css-ki2axk[aria-disabled=true]:focus,.css-ki2axk[aria-disabled=true]:hover{opacity:0.4;cursor:not-allowed;-webkit-text-decoration:none;text-decoration:none;}</style><a target="_blank" rel="noopener noreferrer" class="css-ki2axk"></a><style data-emotion-css="bg6kna">.css-bg6kna{font-family:Libre Baskerville,serif;color:#718096;max-width:190px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;}</style><p class="css-bg6kna"></p></div><style data-emotion-css="9n4tpm">.css-9n4tpm{width:1em;height:1em;color:currentColor;display:inline-block;vertical-align:middle;margin-left:auto;margin-top:0.25rem;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;-webkit-backface-visibility:hidden;backface-visibility:hidden;}.css-9n4tpm:not(:root){overflow:hidden;}</style><svg viewBox="0 0 168 168" focusable="false" role="presentation" class="css-9n4tpm"><path fill="#1ED760" d="M83.996.277C37.747.277.253 37.77.253 84.019c0 46.251 37.494 83.741 83.743 83.741 46.254 0 83.744-37.49 83.744-83.741 0-46.246-37.49-83.738-83.745-83.738l.001-.004zm38.404 120.78a5.217 5.217 0 01-7.18 1.73c-19.662-12.01-44.414-14.73-73.564-8.07a5.222 5.222 0 01-6.249-3.93 5.213 5.213 0 013.926-6.25c31.9-7.291 59.263-4.15 81.337 9.34 2.46 1.51 3.24 4.72 1.73 7.18zm10.25-22.805c-1.89 3.075-5.91 4.045-8.98 2.155-22.51-13.839-56.823-17.846-83.448-9.764-3.453 1.043-7.1-.903-8.148-4.35a6.538 6.538 0 014.354-8.143c30.413-9.228 68.222-4.758 94.072 11.127 3.07 1.89 4.04 5.91 2.15 8.976v-.001zm.88-23.744c-26.99-16.031-71.52-17.505-97.289-9.684-4.138 1.255-8.514-1.081-9.768-5.219a7.835 7.835 0 015.221-9.771c29.581-8.98 78.756-7.245 109.83 11.202a7.823 7.823 0 012.74 10.733c-2.2 3.722-7.02 4.949-10.73 2.739z"></path></svg></div><div><a target="_blank" rel="noopener noreferrer" href="https://twitter.com/leeerob" title="Twitter" class="css-u5zpo1"><style data-emotion-css="119ms3i">.css-119ms3i{border-radius:0.25rem;font-weight:semibold;display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-appearance:none;-moz-appearance:none;appearance:none;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-transition:all 250ms;transition:all 250ms;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;position:relative;white-space:nowrap;vertical-align:middle;line-height:1.2;outline:none;height:3rem;min-width:3rem;font-size:1.125rem;padding-left:1.5rem;padding-right:1.5rem;color:#718096;padding:0;}.css-119ms3i:hover{background-color:#EDF2F7;}.css-119ms3i:focus{box-shadow:0 0 0 3px rgba(66,153,225,0.6);}.css-119ms3i:active,.css-119ms3i[data-active=true]{background-color:#E2E8F0;}.css-119ms3i:disabled,.css-119ms3i:disabled:focus,.css-119ms3i:disabled:hover,.css-119ms3i[aria-disabled=true],.css-119ms3i[aria-disabled=true]:focus,.css-119ms3i[aria-disabled=true]:hover{opacity:0.4;cursor:not-allowed;box-shadow:none;}</style><button type="button" aria-label="Twitter" class="css-119ms3i"><style data-emotion-css="1im46kq">.css-1im46kq{width:1em;height:1em;color:currentColor;display:inline-block;vertical-align:middle;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;-webkit-backface-visibility:hidden;backface-visibility:hidden;}.css-1im46kq:not(:root){overflow:hidden;}</style><svg viewBox="0 0 24 24" focusable="false" role="presentation" aria-hidden="true" class="css-1im46kq"><g fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"></path></g></svg></button></a><a target="_blank" rel="noopener noreferrer" href="https://github.com/leerob" title="GitHub" class="css-u5zpo1"><button type="button" aria-label="GitHub" class="css-119ms3i"><svg viewBox="0 0 24 24" focusable="false" role="presentation" aria-hidden="true" class="css-1im46kq"><g fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path></g></svg></button></a><a target="_blank" rel="noopener noreferrer" href="https://www.linkedin.com/in/leeerob" title="LinkedIn" class="css-u5zpo1"><button type="button" aria-label="LinkedIn" class="css-119ms3i"><svg viewBox="0 0 24 24" focusable="false" role="presentation" aria-hidden="true" class="css-1im46kq"><g fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"></path><rect x="2" y="9" width="4" height="12"></rect><circle cx="4" cy="4" r="2"></circle></g></svg></button></a><a target="_blank" rel="noopener noreferrer" href="https://www.youtube.com/channel/UCZMli3czZnd1uoc1ShTouQw" title="YouTube" class="css-u5zpo1"><button type="button" aria-label="YouTube" class="css-119ms3i"><svg viewBox="0 0 24 24" focusable="false" role="presentation" aria-hidden="true" class="css-1im46kq"><g fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22.54 6.42a2.78 2.78 0 00-1.94-2C18.88 4 12 4 12 4s-6.88 0-8.6.46a2.78 2.78 0 00-1.94 2A29 29 0 001 11.75a29 29 0 00.46 5.33A2.78 2.78 0 003.4 19c1.72.46 8.6.46 8.6.46s6.88 0 8.6-.46a2.78 2.78 0 001.94-2 29 29 0 00.46-5.25 29 29 0 00-.46-5.33z"></path><path d="M9.75 15.02l5.75-3.27-5.75-3.27v6.54z"></path></g></svg></button></a><a target="_blank" rel="noopener noreferrer" href="mailto:me@leerob.io" title="Email" class="css-u5zpo1"><button type="button" aria-label="Email" class="css-119ms3i"><svg viewBox="0 0 24 24" focusable="false" role="presentation" aria-hidden="true" class="css-1im46kq"><g fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path><polyline points="22,6 12,13 2,6"></polyline></g></svg></button></a></div><div><style data-emotion-css="1m6osz9">.css-1m6osz9{-webkit-transition:all 0.15s ease-out;transition:all 0.15s ease-out;cursor:pointer;-webkit-text-decoration:none;text-decoration:none;outline:none;font-size:0.875rem;color:#718096;min-width:100px;margin-right:0.5rem;}.css-1m6osz9:hover{-webkit-text-decoration:underline;text-decoration:underline;}.css-1m6osz9:focus{box-shadow:0 0 0 3px rgba(66,153,225,0.6);}.css-1m6osz9:disabled,.css-1m6osz9:disabled:focus,.css-1m6osz9:disabled:hover,.css-1m6osz9[aria-disabled=true],.css-1m6osz9[aria-disabled=true]:focus,.css-1m6osz9[aria-disabled=true]:hover{opacity:0.4;cursor:not-allowed;-webkit-text-decoration:none;text-decoration:none;}</style><a title="Uses" href="/uses" class="css-1m6osz9">/uses</a><a target="_blank" rel="noopener noreferrer" href="https://photos.leerob.io/" title="Photos" class="css-1m6osz9">/photos</a><a title="Newsletter" href="/newsletter" class="css-1m6osz9">/newsletter</a></div></div></main></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{}},"page":"/blog/real-time-post-views","query":{},"buildId":"ePONoJkV65a1oR7YI4gfn","nextExport":true,"autoExport":true,"isFallback":false}</script><script nomodule="" src="/_next/static/chunks/polyfills-51493a27929bfbeeb103.js"></script><script src="/_next/static/chunks/main-2cc49d93d482d84792e3.js" async=""></script><script src="/_next/static/chunks/webpack-be4ef87a65561c94e9ab.js" async=""></script><script src="/_next/static/chunks/framework.4df82c4704a0136f6a4b.js" async=""></script><script src="/_next/static/chunks/commons.3b42515caf842d5ab116.js" async=""></script><script src="/_next/static/chunks/523a06839f15d78e0982bd9e4702a336e84e0beb.797c01331b5670d8b6a9.js" async=""></script><script src="/_next/static/chunks/8a2cce8d32d4a46d77b103d4ae61b72b298cbc13.24fb7bf37ec09d3116a5.js" async=""></script><script src="/_next/static/chunks/pages/_app-54d71b082eedd36a6785.js" async=""></script><script src="/_next/static/chunks/76e9bb1e2b1c25c76d9849b27c7dee34ed2cfbde.b3362f08c0b5490ab27e.js" async=""></script><script src="/_next/static/chunks/8c8a7e375cfd3e73b66c823b4d4c3ac8ceeee6a2.0d778311861edd316128.js" async=""></script><script src="/_next/static/chunks/05d6c871555fb0d24fe57f9b1cef3fde70bdfa85.77af1318c49c25ece418.js" async=""></script><script src="/_next/static/chunks/fbfc3d82b5302c9a3d540f1f745b2fc442c9bea1.a1e93f9c45227e867129.js" async=""></script><script src="/_next/static/chunks/pages/blog/real-time-post-views-2510d578fabc01450482.js" async=""></script><script src="/_next/static/ePONoJkV65a1oR7YI4gfn/_buildManifest.js" async=""></script><script src="/_next/static/ePONoJkV65a1oR7YI4gfn/_ssgManifest.js" async=""></script></body></html>