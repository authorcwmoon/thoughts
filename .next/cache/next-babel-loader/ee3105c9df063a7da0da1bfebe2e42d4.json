{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = Index;\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/esm/asyncToGenerator\"));\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _Author = _interopRequireDefault(require(\"../components/Author\"));\n\nvar _Layout = _interopRequireDefault(require(\"../components/Layout\"));\n\nvar _BasicMeta = _interopRequireDefault(require(\"../components/meta/BasicMeta\"));\n\nvar _JsonLdMeta = _interopRequireDefault(require(\"../components/meta/JsonLdMeta\"));\n\nvar _OpenGraphMeta = _interopRequireDefault(require(\"../components/meta/OpenGraphMeta\"));\n\nvar _TwitterCardMeta = _interopRequireDefault(require(\"../components/meta/TwitterCardMeta\"));\n\nvar _SocialList = require(\"../components/SocialList\");\n\nvar _Subscribe = _interopRequireDefault(require(\"../components/Subscribe\"));\n\nvar _TagButton = _interopRequireDefault(require(\"../components/TagButton\"));\n\nvar _authors = require(\"../lib/authors\");\n\nvar _tags = require(\"../lib/tags\");\n\nvar _Date = _interopRequireDefault(require(\"../components/Date\"));\n\nvar _core = require(\"@chakra-ui/core\");\n\nvar _jsxFileName = \"/Users/christian/thoughts/src/layouts/index.tsx\";\nimport _JSXStyle from \"styled-jsx/style\";\nimport React from \"react\";\nvar __jsx = React.createElement;\n\nfunction Index(_ref) {\n  var _this = this;\n\n  var title = _ref.title,\n      date = _ref.date,\n      slug = _ref.slug,\n      author = _ref.author,\n      tags = _ref.tags,\n      description = _ref.description,\n      readtime = _ref.readtime;\n  var keywords = tags.map(function (it) {\n    return (0, _tags.getTag)(it).name;\n  });\n  var authorName = (0, _authors.getAuthor)(author).name;\n\n  var verify = require('./lib/verify');\n\n  var _require = require('url'),\n      parse = _require.parse;\n\n  var increment = require('./lib/increment-views');\n\n  module.exports = /*#__PURE__*/function () {\n    var _ref2 = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee(req, res) {\n      var orig, _parse, id, err, _yield$increment, snapshot;\n\n      return _regenerator[\"default\"].wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              orig = req.headers.origin;\n\n              if (/https:\\/\\/(.*\\.)?leerob\\.io/.test(orig)) {\n                res.setHeader('Access-Control-Allow-Origin', orig);\n                res.setHeader('Access-Control-Allow-Methods', 'GET');\n              } // ensure no duplicate views\n\n\n              verify(req);\n              _parse = parse(req.url, true), id = _parse.query.id;\n\n              if (id) {\n                _context.next = 8;\n                break;\n              }\n\n              err = new Error('Missing `id` parameter');\n              err.statusCode = 400;\n              throw err;\n\n            case 8:\n              _context.next = 10;\n              return increment(id);\n\n            case 10:\n              _yield$increment = _context.sent;\n              snapshot = _yield$increment.snapshot;\n              return _context.abrupt(\"return\", {\n                total: snapshot.val()\n              });\n\n            case 13:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function (_x, _x2) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  return function (_ref3) {\n    var content = _ref3.children;\n    return __jsx(_Layout[\"default\"], {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 7\n      }\n    }, __jsx(_BasicMeta[\"default\"], {\n      url: \"/posts/\".concat(slug),\n      title: title,\n      keywords: keywords,\n      description: description,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 9\n      }\n    }), __jsx(_TwitterCardMeta[\"default\"], {\n      url: \"/posts/\".concat(slug),\n      title: title,\n      description: description,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 9\n      }\n    }), __jsx(_OpenGraphMeta[\"default\"], {\n      url: \"/posts/\".concat(slug),\n      title: title,\n      description: description,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 9\n      }\n    }), __jsx(_JsonLdMeta[\"default\"], {\n      url: \"/posts/\".concat(slug),\n      title: title,\n      keywords: keywords,\n      date: date,\n      author: authorName,\n      description: description,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 9\n      }\n    }), __jsx(_core.Stack, {\n      as: \"article\",\n      spacing: 8,\n      justifyContent: \"center\",\n      alignItems: \"flex-start\",\n      m: \"0 auto 4rem auto\",\n      maxWidth: \"700px\",\n      w: \"100%\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 9\n      }\n    }, __jsx(_core.Flex, {\n      flexDirection: \"column\",\n      justifyContent: \"flex-start\",\n      alignItems: \"flex-start\",\n      maxWidth: \"700px\",\n      w: \"100%\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 9\n      }\n    }, __jsx(_core.Heading, {\n      letterSpacing: \"tight\",\n      mb: 2,\n      as: \"h1\",\n      size: \"2xl\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 12\n      }\n    }, title), __jsx(_core.Flex, {\n      justify: \"space-between\",\n      align: ['initial', 'center'],\n      direction: ['column', 'row'],\n      mt: 2,\n      w: \"100%\",\n      mb: 4,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 11\n      }\n    }, __jsx(_core.Flex, {\n      align: \"center\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 13\n      }\n    }, __jsx(_core.Avatar, {\n      size: \"xs\",\n      name: \"C.W. Moon\",\n      src: \"https://bit.ly/34WFAj1\",\n      mr: 2,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 15\n      }\n    }), __jsx(_core.Text, {\n      fontSize: \"sm\",\n      color: \"fafafa\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 16\n      }\n    }, __jsx(_Author[\"default\"], {\n      author: (0, _authors.getAuthor)(author),\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 16\n      }\n    }), \" / \", __jsx(_Date[\"default\"], {\n      date: date,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 16\n      }\n    }), \" / \", readtime, \" min read \")))), content, __jsx(\"article\", {\n      className: \"jsx-2512541463\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 11\n      }\n    }, __jsx(\"ul\", {\n      className: \"jsx-2512541463\" + \" \" + \"tag-list\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 13\n      }\n    }, tags.map(function (it, i) {\n      return __jsx(\"li\", {\n        key: i,\n        className: \"jsx-2512541463\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 17\n        }\n      }, __jsx(_TagButton[\"default\"], {\n        tag: (0, _tags.getTag)(it),\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 19\n        }\n      }));\n    }))), __jsx(_Subscribe[\"default\"], {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 11\n      }\n    })), __jsx(\"footer\", {\n      className: \"jsx-2512541463\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 11\n      }\n    }, __jsx(\"div\", {\n      className: \"jsx-2512541463\" + \" \" + \"social-list\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 13\n      }\n    }, __jsx(_SocialList.SocialList, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 15\n      }\n    }))), __jsx(_JSXStyle, {\n      id: \"2512541463\",\n      __self: _this\n    }, \".container.jsx-2512541463{display:block;max-width:36rem;width:100%;margin:0 auto;padding:0 1.5rem;box-sizing:border-box;}.metadata.jsx-2512541463 div.jsx-2512541463{display:inline-block;margin-right:0.5rem;}article.jsx-2512541463{-webkit-flex:1 0 auto;-ms-flex:1 0 auto;flex:1 0 auto;}.tag-list.jsx-2512541463{list-style:none;text-align:right;margin:1.75rem 0 0 0;padding:0;}.tag-list.jsx-2512541463 li.jsx-2512541463{display:inline-block;margin-left:0.5rem;}.social-list.jsx-2512541463{margin-top:3rem;text-align:center;}@media (min-width:769px){.container.jsx-2512541463{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9jaHJpc3RpYW4vdGhvdWdodHMvc3JjL2xheW91dHMvaW5kZXgudHN4Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQWtMVyxBQUc2QixBQVFPLEFBSVAsQUFHRSxBQU1LLEFBSUwsQUFNRCxjQTlCQyxFQWVDLEFBVUMsS0FqQkUsQUFhRCxTQXBCUixHQWVVLENBVXZCLE1BSkEsQ0FwQmdCLEFBT2hCLGFBR0EsQUFLWSxDQWRPLFNBZW5CLFFBZHdCLEVBMkJFLG9CQTFCMUIsMERBMkJFIiwiZmlsZSI6Ii9Vc2Vycy9jaHJpc3RpYW4vdGhvdWdodHMvc3JjL2xheW91dHMvaW5kZXgudHN4Iiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEhlYWQgZnJvbSBcIm5leHQvaGVhZFwiO1xuaW1wb3J0IFJlYWN0IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHN0eWxlcyBmcm9tIFwiLi4vLi4vcHVibGljL3N0eWxlcy9jb250ZW50Lm1vZHVsZS5jc3NcIjtcbmltcG9ydCBBdXRob3IgZnJvbSBcIi4uL2NvbXBvbmVudHMvQXV0aG9yXCI7XG5pbXBvcnQgTGF5b3V0IGZyb20gXCIuLi9jb21wb25lbnRzL0xheW91dFwiO1xuaW1wb3J0IEJhc2ljTWV0YSBmcm9tIFwiLi4vY29tcG9uZW50cy9tZXRhL0Jhc2ljTWV0YVwiO1xuaW1wb3J0IEpzb25MZE1ldGEgZnJvbSBcIi4uL2NvbXBvbmVudHMvbWV0YS9Kc29uTGRNZXRhXCI7XG5pbXBvcnQgT3BlbkdyYXBoTWV0YSBmcm9tIFwiLi4vY29tcG9uZW50cy9tZXRhL09wZW5HcmFwaE1ldGFcIjtcbmltcG9ydCBUd2l0dGVyQ2FyZE1ldGEgZnJvbSBcIi4uL2NvbXBvbmVudHMvbWV0YS9Ud2l0dGVyQ2FyZE1ldGFcIjtcbmltcG9ydCB7IFNvY2lhbExpc3QgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9Tb2NpYWxMaXN0XCI7XG5pbXBvcnQgU3Vic2NyaWJlIGZyb20gXCIuLi9jb21wb25lbnRzL1N1YnNjcmliZVwiO1xuaW1wb3J0IFRhZ0J1dHRvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9UYWdCdXR0b25cIjtcbmltcG9ydCB7IGdldEF1dGhvciB9IGZyb20gXCIuLi9saWIvYXV0aG9yc1wiO1xuaW1wb3J0IHsgZ2V0VGFnIH0gZnJvbSBcIi4uL2xpYi90YWdzXCI7XG5pbXBvcnQgRGF0ZSBmcm9tIFwiLi4vY29tcG9uZW50cy9EYXRlXCI7XG4vLyBpbXBvcnQgVmlld0NvdW50ZXIgZnJvbSAnLi4vY29tcG9uZW50cy9WaWV3Q291bnRlcic7XG5pbXBvcnQge1xuICB1c2VDb2xvck1vZGUsXG4gIEhlYWRpbmcsXG4gIFRleHQsXG4gIEZsZXgsXG4gIFN0YWNrLFxuICBBdmF0YXIsXG4gIExpbmssXG4gIEJveFxufSBmcm9tICdAY2hha3JhLXVpL2NvcmUnO1xuaW1wb3J0IElmcmFtZVJlc2l6ZXIgZnJvbSAnaWZyYW1lLXJlc2l6ZXItcmVhY3QnO1xuaW1wb3J0IHsgcGFyc2VJU08sIGZvcm1hdElTTyB9IGZyb20gJ2RhdGUtZm5zJztcblxuXG5cblxuXG50eXBlIFByb3BzID0ge1xuICB0aXRsZTogc3RyaW5nO1xuICBkYXRlOiBEYXRlO1xuICBzbHVnOiBzdHJpbmc7XG4gIGRlc2NyaXB0aW9uOiBzdHJpbmc7XG4gIHRhZ3M6IHN0cmluZ1tdO1xuICBhdXRob3I6IHN0cmluZztcbiAgcmVhZHRpbWU6IHN0cmluZztcbn07XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBJbmRleCh7XG4gIHRpdGxlLFxuICBkYXRlLFxuICBzbHVnLFxuICBhdXRob3IsXG4gIHRhZ3MsXG4gIGRlc2NyaXB0aW9uLFxuICByZWFkdGltZSxcbn06IFByb3BzKSB7XG4gIGNvbnN0IGtleXdvcmRzID0gdGFncy5tYXAoKGl0KSA9PiBnZXRUYWcoaXQpLm5hbWUpO1xuICBjb25zdCBhdXRob3JOYW1lID0gZ2V0QXV0aG9yKGF1dGhvcikubmFtZTtcblxuICBjb25zdCB2ZXJpZnkgPSByZXF1aXJlKCcuL2xpYi92ZXJpZnknKTtcbiAgY29uc3Qge3BhcnNlfSA9IHJlcXVpcmUoJ3VybCcpO1xuICBjb25zdCBpbmNyZW1lbnQgPSByZXF1aXJlKCcuL2xpYi9pbmNyZW1lbnQtdmlld3MnKTtcbiAgXG4gIG1vZHVsZS5leHBvcnRzID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgICBjb25zdCBvcmlnID0gcmVxLmhlYWRlcnMub3JpZ2luO1xuICAgICAgaWYgKC9odHRwczpcXC9cXC8oLipcXC4pP2xlZXJvYlxcLmlvLy50ZXN0KG9yaWcpKSB7XG4gICAgICAgICAgcmVzLnNldEhlYWRlcignQWNjZXNzLUNvbnRyb2wtQWxsb3ctT3JpZ2luJywgb3JpZyk7XG4gICAgICAgICAgcmVzLnNldEhlYWRlcignQWNjZXNzLUNvbnRyb2wtQWxsb3ctTWV0aG9kcycsICdHRVQnKTtcbiAgICAgIH1cbiAgXG4gICAgICAvLyBlbnN1cmUgbm8gZHVwbGljYXRlIHZpZXdzXG4gICAgICB2ZXJpZnkocmVxKTtcbiAgICAgIGNvbnN0IHtcbiAgICAgICAgICBxdWVyeToge2lkfVxuICAgICAgfSA9IHBhcnNlKHJlcS51cmwsIHRydWUpO1xuICBcbiAgICAgIGlmICghaWQpIHtcbiAgICAgICAgICBjb25zdCBlcnIgPSBuZXcgRXJyb3IoJ01pc3NpbmcgYGlkYCBwYXJhbWV0ZXInKTtcbiAgICAgICAgICBlcnIuc3RhdHVzQ29kZSA9IDQwMDtcbiAgICAgICAgICB0aHJvdyBlcnI7XG4gICAgICB9XG4gIFxuICAgICAgY29uc3Qge3NuYXBzaG90fSA9IGF3YWl0IGluY3JlbWVudChpZCk7XG4gICAgICByZXR1cm4ge3RvdGFsOiBzbmFwc2hvdC52YWwoKX07XG4gIH07XG5cbiAgcmV0dXJuICh7IGNoaWxkcmVuOiBjb250ZW50IH0pID0+IHtcbiAgICByZXR1cm4gKFxuICAgICAgPExheW91dD5cbiAgICAgICAgXG4gICAgICAgIDxCYXNpY01ldGFcbiAgICAgICAgICB1cmw9e2AvcG9zdHMvJHtzbHVnfWB9XG4gICAgICAgICAgdGl0bGU9e3RpdGxlfVxuICAgICAgICAgIGtleXdvcmRzPXtrZXl3b3Jkc31cbiAgICAgICAgICBkZXNjcmlwdGlvbj17ZGVzY3JpcHRpb259XG4gICAgICAgIC8+XG4gICAgICAgIDxUd2l0dGVyQ2FyZE1ldGFcbiAgICAgICAgICB1cmw9e2AvcG9zdHMvJHtzbHVnfWB9XG4gICAgICAgICAgdGl0bGU9e3RpdGxlfVxuICAgICAgICAgIGRlc2NyaXB0aW9uPXtkZXNjcmlwdGlvbn1cbiAgICAgICAgLz5cbiAgICAgICAgPE9wZW5HcmFwaE1ldGFcbiAgICAgICAgICB1cmw9e2AvcG9zdHMvJHtzbHVnfWB9XG4gICAgICAgICAgdGl0bGU9e3RpdGxlfVxuICAgICAgICAgIGRlc2NyaXB0aW9uPXtkZXNjcmlwdGlvbn1cbiAgICAgICAgLz5cbiAgICAgICAgPEpzb25MZE1ldGFcbiAgICAgICAgICB1cmw9e2AvcG9zdHMvJHtzbHVnfWB9XG4gICAgICAgICAgdGl0bGU9e3RpdGxlfVxuICAgICAgICAgIGtleXdvcmRzPXtrZXl3b3Jkc31cbiAgICAgICAgICBkYXRlPXtkYXRlfVxuICAgICAgICAgIGF1dGhvcj17YXV0aG9yTmFtZX1cbiAgICAgICAgICBkZXNjcmlwdGlvbj17ZGVzY3JpcHRpb259XG4gICAgICAgIC8+XG4gICAgICAgXG5cbiAgICAgICAgPFN0YWNrXG4gICAgICAgIGFzPVwiYXJ0aWNsZVwiXG4gICAgICAgIHNwYWNpbmc9ezh9XG4gICAgICAgIGp1c3RpZnlDb250ZW50PVwiY2VudGVyXCJcbiAgICAgICAgYWxpZ25JdGVtcz1cImZsZXgtc3RhcnRcIlxuICAgICAgICBtPVwiMCBhdXRvIDRyZW0gYXV0b1wiXG4gICAgICAgIG1heFdpZHRoPVwiNzAwcHhcIlxuICAgICAgICB3PVwiMTAwJVwiXG4gICAgICA+XG4gICAgICAgIDxGbGV4XG4gICAgICAgICAgZmxleERpcmVjdGlvbj1cImNvbHVtblwiXG4gICAgICAgICAganVzdGlmeUNvbnRlbnQ9XCJmbGV4LXN0YXJ0XCJcbiAgICAgICAgICBhbGlnbkl0ZW1zPVwiZmxleC1zdGFydFwiXG4gICAgICAgICAgbWF4V2lkdGg9XCI3MDBweFwiXG4gICAgICAgICAgdz1cIjEwMCVcIlxuICAgICAgICA+XG4gICAgICAgICAgIDxIZWFkaW5nIGxldHRlclNwYWNpbmc9XCJ0aWdodFwiIG1iPXsyfSBhcz1cImgxXCIgc2l6ZT1cIjJ4bFwiPlxuICAgICAgICAgICAge3RpdGxlfVxuICAgICAgICAgIDwvSGVhZGluZz5cbiAgICAgICAgICA8RmxleFxuICAgICAgICAgICAganVzdGlmeT1cInNwYWNlLWJldHdlZW5cIlxuICAgICAgICAgICAgYWxpZ249e1snaW5pdGlhbCcsICdjZW50ZXInXX1cbiAgICAgICAgICAgIGRpcmVjdGlvbj17Wydjb2x1bW4nLCAncm93J119XG4gICAgICAgICAgICBtdD17Mn1cbiAgICAgICAgICAgIHc9XCIxMDAlXCJcbiAgICAgICAgICAgIG1iPXs0fVxuICAgICAgICAgID5cbiAgICAgICAgICAgIDxGbGV4IGFsaWduPVwiY2VudGVyXCI+XG4gICAgICAgICAgICAgIDxBdmF0YXJcbiAgICAgICAgICAgICAgICBzaXplPVwieHNcIlxuICAgICAgICAgICAgICAgIG5hbWU9XCJDLlcuIE1vb25cIlxuICAgICAgICAgICAgICAgIHNyYz1cImh0dHBzOi8vYml0Lmx5LzM0V0ZBajFcIlxuICAgICAgICAgICAgICAgIG1yPXsyfVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgPFRleHQgZm9udFNpemU9XCJzbVwiIGNvbG9yPVwiZmFmYWZhXCI+XG4gICAgICAgICAgICAgICA8QXV0aG9yIGF1dGhvcj17Z2V0QXV0aG9yKGF1dGhvcil9IC8+XG4gICAgICAgICAgICAgICB7YCAvIGB9XG4gICAgICAgICAgICAgICA8RGF0ZSAgZGF0ZT17ZGF0ZX0gLz5cbiAgICAgICAgICAgICAgIHtgIC8gYH0gXG4gICAgICAgICAgICAgICB7cmVhZHRpbWV9XG4gICAgICAgICAgICAgICB7YCBtaW4gcmVhZCBgfSBcbiAgICAgICAgICAgICAgICA8L1RleHQ+XG4gICAgICAgICAgICAgICAgey8qIDxWaWV3Q291bnRlciBpZD17c2x1Z30gLz4gKi99XG5cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgPC9GbGV4PlxuICAgICAgICAgICAgPC9GbGV4PlxuICAgICAgICAgICAgPC9GbGV4PlxuICAgICAgICAgICAge2NvbnRlbnR9XG4gICAgICAgICAgPGFydGljbGU+XG4gICAgICAgICAgICA8dWwgY2xhc3NOYW1lPXtcInRhZy1saXN0XCJ9PlxuICAgICAgICAgICAgICB7dGFncy5tYXAoKGl0LCBpKSA9PiAoXG4gICAgICAgICAgICAgICAgPGxpIGtleT17aX0+XG4gICAgICAgICAgICAgICAgICA8VGFnQnV0dG9uIHRhZz17Z2V0VGFnKGl0KX0gLz5cbiAgICAgICAgICAgICAgICA8L2xpPlxuICAgICAgICAgICAgICApKX1cbiAgICAgICAgICAgIDwvdWw+XG4gICAgICAgICAgPC9hcnRpY2xlPlxuICAgICAgICAgIDxTdWJzY3JpYmUvPlxuXG4gICAgICAgICAgPC9TdGFjaz5cbiAgICAgICAgICA8Zm9vdGVyPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9e1wic29jaWFsLWxpc3RcIn0+XG4gICAgICAgICAgICAgIDxTb2NpYWxMaXN0IC8+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Zvb3Rlcj5cbiAgICAgICAgPHN0eWxlIGpzeD5cbiAgICAgICAgICB7YFxuICAgICAgICAgICAgLmNvbnRhaW5lciB7XG4gICAgICAgICAgICAgIGRpc3BsYXk6IGJsb2NrO1xuICAgICAgICAgICAgICBtYXgtd2lkdGg6IDM2cmVtO1xuICAgICAgICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgICAgICAgbWFyZ2luOiAwIGF1dG87XG4gICAgICAgICAgICAgIHBhZGRpbmc6IDAgMS41cmVtO1xuICAgICAgICAgICAgICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLm1ldGFkYXRhIGRpdiB7XG4gICAgICAgICAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgICAgICAgICAgICAgbWFyZ2luLXJpZ2h0OiAwLjVyZW07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhcnRpY2xlIHtcbiAgICAgICAgICAgICAgZmxleDogMSAwIGF1dG87XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAudGFnLWxpc3Qge1xuICAgICAgICAgICAgICBsaXN0LXN0eWxlOiBub25lO1xuICAgICAgICAgICAgICB0ZXh0LWFsaWduOiByaWdodDtcbiAgICAgICAgICAgICAgbWFyZ2luOiAxLjc1cmVtIDAgMCAwO1xuICAgICAgICAgICAgICBwYWRkaW5nOiAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLnRhZy1saXN0IGxpIHtcbiAgICAgICAgICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xuICAgICAgICAgICAgICBtYXJnaW4tbGVmdDogMC41cmVtO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLnNvY2lhbC1saXN0IHtcbiAgICAgICAgICAgICAgbWFyZ2luLXRvcDogM3JlbTtcbiAgICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBAbWVkaWEgKG1pbi13aWR0aDogNzY5cHgpIHtcbiAgICAgICAgICAgICAgLmNvbnRhaW5lciB7XG4gICAgICAgICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgYH1cbiAgICAgICAgPC9zdHlsZT5cbiAgICAgICBcbiAgICAgIDwvTGF5b3V0PlxuICAgICk7XG4gIH07XG59XG4iXX0= */\\n/*@ sourceURL=/Users/christian/thoughts/src/layouts/index.tsx */\"));\n  };\n}\n\n_c = Index;\n\nvar _c;\n\n$RefreshReg$(_c, \"Index\");","map":{"version":3,"sources":["/Users/christian/thoughts/src/layouts/index.tsx"],"names":["Index","title","date","slug","author","tags","description","readtime","keywords","map","it","name","authorName","verify","require","parse","increment","module","exports","req","res","orig","headers","origin","test","setHeader","url","id","query","err","Error","statusCode","snapshot","total","val","content","children","i"],"mappings":"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","sourcesContent":["import Head from \"next/head\";\nimport React from \"react\";\nimport styles from \"../../public/styles/content.module.css\";\nimport Author from \"../components/Author\";\nimport Layout from \"../components/Layout\";\nimport BasicMeta from \"../components/meta/BasicMeta\";\nimport JsonLdMeta from \"../components/meta/JsonLdMeta\";\nimport OpenGraphMeta from \"../components/meta/OpenGraphMeta\";\nimport TwitterCardMeta from \"../components/meta/TwitterCardMeta\";\nimport { SocialList } from \"../components/SocialList\";\nimport Subscribe from \"../components/Subscribe\";\nimport TagButton from \"../components/TagButton\";\nimport { getAuthor } from \"../lib/authors\";\nimport { getTag } from \"../lib/tags\";\nimport Date from \"../components/Date\";\n// import ViewCounter from '../components/ViewCounter';\nimport {\n  useColorMode,\n  Heading,\n  Text,\n  Flex,\n  Stack,\n  Avatar,\n  Link,\n  Box\n} from '@chakra-ui/core';\nimport IframeResizer from 'iframe-resizer-react';\nimport { parseISO, formatISO } from 'date-fns';\n\n\n\n\n\ntype Props = {\n  title: string;\n  date: Date;\n  slug: string;\n  description: string;\n  tags: string[];\n  author: string;\n  readtime: string;\n};\nexport default function Index({\n  title,\n  date,\n  slug,\n  author,\n  tags,\n  description,\n  readtime,\n}: Props) {\n  const keywords = tags.map((it) => getTag(it).name);\n  const authorName = getAuthor(author).name;\n\n  const verify = require('./lib/verify');\n  const {parse} = require('url');\n  const increment = require('./lib/increment-views');\n  \n  module.exports = async (req, res) => {\n      const orig = req.headers.origin;\n      if (/https:\\/\\/(.*\\.)?leerob\\.io/.test(orig)) {\n          res.setHeader('Access-Control-Allow-Origin', orig);\n          res.setHeader('Access-Control-Allow-Methods', 'GET');\n      }\n  \n      // ensure no duplicate views\n      verify(req);\n      const {\n          query: {id}\n      } = parse(req.url, true);\n  \n      if (!id) {\n          const err = new Error('Missing `id` parameter');\n          err.statusCode = 400;\n          throw err;\n      }\n  \n      const {snapshot} = await increment(id);\n      return {total: snapshot.val()};\n  };\n\n  return ({ children: content }) => {\n    return (\n      <Layout>\n        \n        <BasicMeta\n          url={`/posts/${slug}`}\n          title={title}\n          keywords={keywords}\n          description={description}\n        />\n        <TwitterCardMeta\n          url={`/posts/${slug}`}\n          title={title}\n          description={description}\n        />\n        <OpenGraphMeta\n          url={`/posts/${slug}`}\n          title={title}\n          description={description}\n        />\n        <JsonLdMeta\n          url={`/posts/${slug}`}\n          title={title}\n          keywords={keywords}\n          date={date}\n          author={authorName}\n          description={description}\n        />\n       \n\n        <Stack\n        as=\"article\"\n        spacing={8}\n        justifyContent=\"center\"\n        alignItems=\"flex-start\"\n        m=\"0 auto 4rem auto\"\n        maxWidth=\"700px\"\n        w=\"100%\"\n      >\n        <Flex\n          flexDirection=\"column\"\n          justifyContent=\"flex-start\"\n          alignItems=\"flex-start\"\n          maxWidth=\"700px\"\n          w=\"100%\"\n        >\n           <Heading letterSpacing=\"tight\" mb={2} as=\"h1\" size=\"2xl\">\n            {title}\n          </Heading>\n          <Flex\n            justify=\"space-between\"\n            align={['initial', 'center']}\n            direction={['column', 'row']}\n            mt={2}\n            w=\"100%\"\n            mb={4}\n          >\n            <Flex align=\"center\">\n              <Avatar\n                size=\"xs\"\n                name=\"C.W. Moon\"\n                src=\"https://bit.ly/34WFAj1\"\n                mr={2}\n              />\n               <Text fontSize=\"sm\" color=\"fafafa\">\n               <Author author={getAuthor(author)} />\n               {` / `}\n               <Date  date={date} />\n               {` / `} \n               {readtime}\n               {` min read `} \n                </Text>\n                {/* <ViewCounter id={slug} /> */}\n\n            \n            </Flex>\n            </Flex>\n            </Flex>\n            {content}\n          <article>\n            <ul className={\"tag-list\"}>\n              {tags.map((it, i) => (\n                <li key={i}>\n                  <TagButton tag={getTag(it)} />\n                </li>\n              ))}\n            </ul>\n          </article>\n          <Subscribe/>\n\n          </Stack>\n          <footer>\n            <div className={\"social-list\"}>\n              <SocialList />\n            </div>\n          </footer>\n        <style jsx>\n          {`\n            .container {\n              display: block;\n              max-width: 36rem;\n              width: 100%;\n              margin: 0 auto;\n              padding: 0 1.5rem;\n              box-sizing: border-box;\n            }\n            .metadata div {\n              display: inline-block;\n              margin-right: 0.5rem;\n            }\n            article {\n              flex: 1 0 auto;\n            }\n            .tag-list {\n              list-style: none;\n              text-align: right;\n              margin: 1.75rem 0 0 0;\n              padding: 0;\n            }\n            .tag-list li {\n              display: inline-block;\n              margin-left: 0.5rem;\n            }\n            .social-list {\n              margin-top: 3rem;\n              text-align: center;\n            }\n\n            @media (min-width: 769px) {\n              .container {\n                display: flex;\n                flex-direction: column;\n              }\n            }\n          `}\n        </style>\n       \n      </Layout>\n    );\n  };\n}\n"]},"metadata":{},"sourceType":"script"}