{"ast":null,"code":"var __jsx = React.createElement;\nimport React, { useState, useEffect } from 'react';\nimport format from 'comma-number';\nimport { Flex } from '@chakra-ui/core';\nimport { realtimeDb } from '../lib/db';\n\nconst ViewCounter = ({\n  id\n}) => {\n  const {\n    0: views,\n    1: setViews\n  } = useState('');\n  useEffect(() => {\n    const onViews = newViews => setViews(newViews.val());\n\n    let db;\n\n    const fetchData = async () => {\n      db = await realtimeDb();\n      db.child(id).on('value', onViews);\n    };\n\n    fetchData();\n    return () => {\n      if (db) {\n        db.child(id).off('value', onViews);\n      }\n    };\n  }, [id]);\n  useEffect(() => {\n    const registerView = () => fetch(`.netlify/functions/increment-views?id=${encodeURIComponent(id)}`);\n\n    registerView();\n  }, [id]);\n  return __jsx(Flex, null, \"`$\", views ? format(views) : '–––', \" views`\");\n};\n\nexport default ViewCounter;","map":null,"metadata":{},"sourceType":"module"}