_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[35],{NhNq:function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/blog/graphql-at-hy-vee",function(){return t("tiWE")}])},tiWE:function(e,a,t){"use strict";t.r(a),t.d(a,"frontMatter",(function(){return r})),t.d(a,"default",(function(){return O}));var n=t("wx14"),c=t("Ff2n"),s=t("q1tI"),o=t.n(s),p=t("7ljp"),b=t("ZDfL"),r=(o.a.createElement,{title:"GraphQL at Hy-Vee",publishedAt:"2019-10-30",summary:"Learn about how we've adopted GraphQL at Hy-Vee to improve developer efficiency and enhance our user experience.",image:"/static/images/graphql-at-hy-vee/banner.jpg",wordCount:967,readingTime:{text:"5 min read",minutes:4.805,time:288299.99999999994,words:961},__resourcePath:"blog/graphql-at-hy-vee.mdx",__scans:{},layout:"index"}),m={frontMatter:r},j=b.a;function O(e){var a=e.components,t=Object(c.a)(e,["components"]);return Object(p.b)(j,Object(n.a)({},m,t,{components:a,mdxType:"MDXLayout"}),Object(p.b)("p",null,Object(p.b)("img",Object(n.a)({parentName:"p"},{src:"/static/images/graphql-at-hy-vee/banner.jpg",alt:"GraphQL at Hy-Vee"}))),Object(p.b)("p",null,"APIs are the backbone of Hy-Vee."),Object(p.b)("p",null,"Products, locations, lists, coupons - the data sources that power our company are all powered through APIs."),Object(p.b)("p",null,"We\u2019ve traditionally used a ",Object(p.b)("a",Object(n.a)({parentName:"p"},{href:"https://restfulapi.net/"}),"RESTful")," approach to creating APIs. Over the past 6 months, we\u2019ve adopted ",Object(p.b)("a",Object(n.a)({parentName:"p"},{href:"https://graphql.org/learn/"}),"GraphQL")," for every new microservice API we create."),Object(p.b)("p",null,"Why? Let\u2019s find out."),Object(p.b)("h2",{id:"what-is-graphql"},"What Is\xa0GraphQL?"),Object(p.b)("blockquote",null,Object(p.b)("p",{parentName:"blockquote"},"GraphQL is a query language for your API, and a server-side runtime for executing queries by using a type system you define for your data. GraphQL isn't tied to any specific database or storage engine, but is instead backed by your existing code and data.")),Object(p.b)("p",null,"Let\u2019s unpack that a bit. It\u2019s an open-source ",Object(p.b)("a",Object(n.a)({parentName:"p"},{href:"https://graphql.github.io/graphql-spec/June2018/"}),"specification")," for how to query your APIs. It\u2019s language/framework agnostic, which means it works with almost every language you can imagine."),Object(p.b)("p",null,"Simply put, ",Object(p.b)("strong",{parentName:"p"},"GraphQL makes it easier for us to create performant, scalable APIs.")),Object(p.b)("p",null,Object(p.b)("img",Object(n.a)({parentName:"p"},{src:"/static/images/graphql-at-hy-vee/app.png",alt:"Hy-Vee Aisles Online Mobile App"}))),Object(p.b)("h2",{id:"what-problem-are-we-trying-to-solve"},"What Problem Are We Trying to Solve?"),Object(p.b)("p",null,"A few months ago, we launched our new Aisles Online mobile app (",Object(p.b)("a",Object(n.a)({parentName:"p"},{href:"https://apps.apple.com/us/app/hy-vee-aisles-online/id1401371704"}),"iOS")," and ",Object(p.b)("a",Object(n.a)({parentName:"p"},{href:"https://play.google.com/store/apps/details?id=com.hyvee.grocery&hl=en_US"}),"Android"),"). In the process of evaluating which tech to use, we identified a major requirement:"),Object(p.b)("p",null,Object(p.b)("strong",{parentName:"p"},"The application needed to be blazing fast. Pages should load quickly and interactions should appear to happen in near real-time.")),Object(p.b)("p",null,"When our home screen loads, it needs to retrieve data from a variety of places. This would typically require a handful of API calls. This can be slow."),Object(p.b)("p",null,"Enter GraphQL. With a single query, we can fetch data about our customer, products, locations, and more. It\u2019s blazing fast. Plus, we can utilize ",Object(p.b)("a",Object(n.a)({parentName:"p"},{href:"https://www.apollographql.com/docs/react/features/optimistic-ui/"}),"Optimistic UI")," to make interactions feel instantaneous."),Object(p.b)("h2",{id:"fetching-data"},"Fetching Data"),Object(p.b)("p",null,"Let\u2019s say we\u2019re dealing with a user\u2019s shopping lists. When our page loads, we want to load all of the users' lists."),Object(p.b)("pre",{className:"language-graphql"},Object(p.b)("code",Object(n.a)({parentName:"pre"},{className:"language-graphql"}),Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"query")," ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n  lists ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n    listId\n    name\n    isPrimary\n    lastModified\n    listItems ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n      isChecked\n      listItemId\n      productId\n    ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n  ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n")),Object(p.b)("p",null,"This request will only fetch what is needed. The response conforms to the same structure as the query and returns a JSON object."),Object(p.b)("pre",{className:"language-graphql"},Object(p.b)("code",Object(n.a)({parentName:"pre"},{className:"language-graphql"}),Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n  ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'"data"'),Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),":")," ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n    ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'"lists"'),Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),":")," ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"["),"\n      ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n        ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'"listId"'),Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),":")," ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'"d2bf5976-c4e0-4e4a-833a-8bc32549aeff"'),Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),","),"\n        ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'"name"'),Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),":")," ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'"My List"'),Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),","),"\n        ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'"isPrimary"'),Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),":")," ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token boolean"}),"true"),Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),","),"\n        ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'"lastModified"'),Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),":")," ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'"2019-09-09T20:03:55.607Z"'),Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),","),"\n        ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'"listItems"'),Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),":")," ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"["),"\n          ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n            ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'"isChecked"'),Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),":")," ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token boolean"}),"false"),Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),","),"\n            ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'"listItemId"'),Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),":")," ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'"69381a3c-89fe-4f42-a14e-8da955aa9dce"'),Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),","),"\n            ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'"productId"'),Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),":")," ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token number"}),"123"),"\n          ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n        ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"]"),"\n      ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n    ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"]"),"\n  ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n")),Object(p.b)("p",null,"There are a variety of other options available on the list model we can add or remove as necessary. GraphQL will only return what we explicitly asked for."),Object(p.b)("h2",{id:"modifying-data"},"Modifying Data"),Object(p.b)("p",null,"If fetching is the equivalent of a GET request, a ",Object(p.b)("a",Object(n.a)({parentName:"p"},{href:"https://graphql.org/learn/queries/"}),"Mutation")," is the equivalent of a PUT or POST request. Here\u2019s a simple example of how we might create a new shopping list."),Object(p.b)("pre",{className:"language-graphql"},Object(p.b)("code",Object(n.a)({parentName:"pre"},{className:"language-graphql"}),Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"mutation")," ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n  createList",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"("),"\n    ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token attr-name"}),"createListInput"),Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),":")," ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n      ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token attr-name"}),"listId"),Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),":")," ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'"415cefed-1624-4977-96c3-f835ad2369d4"'),"\n      ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token attr-name"}),"name"),Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),":")," ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'"Snacks"'),"\n      ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token attr-name"}),"created"),Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),":")," ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'"2018-10-05T14:48:00.000Z"'),"\n      ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token attr-name"}),"lastModified"),Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),":")," ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'"2018-10-05T14:48:00.000Z"'),"\n      ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token attr-name"}),"isPrimary"),Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),":")," ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token boolean"}),"false"),"\n      ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token attr-name"}),"isRemoved"),Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),":")," ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token boolean"}),"false"),"\n    ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n  ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),")")," ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n    listId\n    name\n    isPrimary\n    lastModified\n    listItems ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n      listItemId\n    ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n  ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n")),Object(p.b)("p",null,"If successful, this mutation will return a JSON response of the fields we\u2019ve defined above."),Object(p.b)("pre",{className:"language-graphql"},Object(p.b)("code",Object(n.a)({parentName:"pre"},{className:"language-graphql"}),Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n  ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'"data"'),Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),":")," ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n    ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'"createList"'),Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),":")," ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n      ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'"listId"'),Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),":")," ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'"415cefed-1624-4977-96c3-f835ad2369d4"'),Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),","),"\n      ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'"name"'),Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),":")," ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'"Snacks"'),Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),","),"\n      ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'"isPrimary"'),Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),":")," ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token boolean"}),"false"),Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),","),"\n      ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'"lastModified"'),Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),":")," ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'"2018-10-05T14:48:00.000Z"'),Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),","),"\n      ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'"listItems"'),Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),":")," ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"["),Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"]"),"\n    ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n  ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n")),Object(p.b)("h2",{id:"graphql-api"},"GraphQL API"),Object(p.b)("p",null,"As the number of our microservice APIs began to grow, we recognized a problem. We had followed best practices for creating APIs with a ",Object(p.b)("a",Object(n.a)({parentName:"p"},{href:"https://en.wikipedia.org/wiki/Single_responsibility_principle"}),"single responsibility"),", but this meant we had multiple entry points to retrieve data. Clients had to stitch together resources from each of these APIs to paint the full picture. There had to be a ",Object(p.b)("a",Object(n.a)({parentName:"p"},{href:"https://principledgraphql.com/"}),"better way"),"."),Object(p.b)("p",null,"Enter the GraphQL API. Unlike our other APIs, the ",Object(p.b)("strong",{parentName:"p"},"GraphQL API is not backed by a database.")," This API acts as a proxy between all of our other services, providing one unified schema. This led to an improved developer experience for our consumers and the ability to easily stitch together pieces of information across multiple APIs. We currently have almost 10 different graphs being combined into one simple interface for developers."),Object(p.b)("p",null,"With the GraphQL API, we can easily link a list item to a product, which is a completely separate API. Since the list item contains a ",Object(p.b)("inlineCode",{parentName:"p"},"productId"),", we can make a query to fetch the product."),Object(p.b)("pre",{className:"language-graphql"},Object(p.b)("code",Object(n.a)({parentName:"pre"},{className:"language-graphql"}),Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"query")," ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n  product",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"("),Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token attr-name"}),"productId"),Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),":")," ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token variable"}),"$productId"),Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),")")," ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n    productId\n    productImages",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"("),Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token attr-name"}),"where"),Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),":")," ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{")," ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token attr-name"}),"isPrimary"),Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),":")," ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token boolean"}),"true"),Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),",")," ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token attr-name"}),"size"),Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),":")," ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token variable"}),"$size")," ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),")")," ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n      size\n      uri\n      isPrimary\n    ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n  ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n")),Object(p.b)("p",null,"This allows us to retrieve the associated product image for the list item."),Object(p.b)("pre",{className:"language-graphql"},Object(p.b)("code",Object(n.a)({parentName:"pre"},{className:"language-graphql"}),Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n  ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'"data"'),Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),":")," ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n    ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'"product"'),Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),":")," ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n      ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'"productId"'),Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),":")," ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'"37191"'),Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),","),"\n      ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'"productImages"'),Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),":")," ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"["),"\n        ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n          ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'"size"'),Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),":")," ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'"THUMBNAIL"'),Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),","),"\n          ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'"uri"'),Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),":")," ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'"https://example.com/image-123.jpg"'),Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),","),"\n          ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'"isPrimary"'),Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),":")," ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token boolean"}),"true"),"\n        ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n      ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"]"),"\n    ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n  ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n")),Object(p.b)("p",null,"To achieve the GraphQL API, we\u2019re using a custom solution - but it\u2019s similar to the idea behind ",Object(p.b)("a",Object(n.a)({parentName:"p"},{href:"https://blog.apollographql.com/apollo-federation-f260cf525d21"}),"Apollo Federation"),"."),Object(p.b)("pre",{className:"language-js"},Object(p.b)("code",Object(n.a)({parentName:"pre"},{className:"language-js"}),Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"const")," ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{")," ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token maybe-class-name"}),"ApolloGateway")," ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}")," ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),"=")," ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token function"}),"require"),Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"("),Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),"'@apollo/gateway'"),Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),")"),Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),";"),"\n\n",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"const")," gateway ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),"=")," ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"new")," ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token class-name"}),"ApolloGateway"),Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"("),Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n  serviceList",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),":")," ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"["),"\n    ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{")," name",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),":")," ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),"'accounts'"),Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),",")," url",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),":")," ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),"'accounts-api.company.com/graphql'")," ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),","),"\n    ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{")," name",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),":")," ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),"'reviews'"),Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),",")," url",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),":")," ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),"'reviews-api.company.com/graphql'")," ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),","),"\n    ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{")," name",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),":")," ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),"'products'"),Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),",")," url",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),":")," ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),"'products-api.company.com/graphql'")," ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),","),"\n    ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{")," name",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),":")," ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),"'inventory'"),Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),",")," url",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),":")," ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),"'inventory-api.company.com/graphql'")," ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n  ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"]"),"\n",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),")"),Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),";"),"\n")),Object(p.b)("h2",{id:"consuming-our-apis"},"Consuming Our\xa0APIs"),Object(p.b)("p",null,"All new web applications at Hy-Vee are being created with ",Object(p.b)("a",Object(n.a)({parentName:"p"},{href:"https://reactjs.org/"}),"React"),". For our mobile applications, this means ",Object(p.b)("a",Object(n.a)({parentName:"p"},{href:"https://facebook.github.io/react-native/"}),"React Native"),". Thus, we needed a solution that would work across both web and mobile to consume GraphQL."),Object(p.b)("p",null,Object(p.b)("a",Object(n.a)({parentName:"p"},{href:"https://www.apollographql.com/docs/react/"}),"Apollo Client")," is a complete state management library for JavaScript apps. Write a GraphQL query and Apollo Client will take care of requesting and caching your data, as well as updating your UI."),Object(p.b)("p",null,"The ",Object(p.b)("inlineCode",{parentName:"p"},"useQuery")," ",Object(p.b)("a",Object(n.a)({parentName:"p"},{href:"https://www.apollographql.com/docs/react/api/react-hooks/"}),"hook")," provides a concise way to query your APIs."),Object(p.b)("pre",{className:"language-jsx"},Object(p.b)("code",Object(n.a)({parentName:"pre"},{className:"language-jsx"}),Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"function")," ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token function"}),Object(p.b)("span",Object(n.a)({parentName:"span"},{className:"token maybe-class-name"}),"Lists")),Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"("),Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),")")," ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n  ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"const")," ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{")," loading",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),",")," error",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),",")," data ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}")," ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),"=")," ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token function"}),"useQuery"),Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"("),Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token constant"}),"GET_LISTS"),Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),")"),Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),";"),"\n\n  ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"if")," ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"("),"loading",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),")")," ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"return")," ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),"'Loading...'"),Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),";"),"\n  ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"if")," ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"("),"error",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),")")," ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"return")," ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token template-string"}),Object(p.b)("span",Object(n.a)({parentName:"span"},{className:"token template-punctuation string"}),"`"),Object(p.b)("span",Object(n.a)({parentName:"span"},{className:"token string"}),"Error! "),Object(p.b)("span",Object(n.a)({parentName:"span"},{className:"token interpolation"}),Object(p.b)("span",Object(n.a)({parentName:"span"},{className:"token interpolation-punctuation punctuation"}),"${"),"error",Object(p.b)("span",Object(n.a)({parentName:"span"},{className:"token punctuation"}),"."),Object(p.b)("span",Object(n.a)({parentName:"span"},{className:"token property-access"}),"message"),Object(p.b)("span",Object(n.a)({parentName:"span"},{className:"token interpolation-punctuation punctuation"}),"}")),Object(p.b)("span",Object(n.a)({parentName:"span"},{className:"token template-punctuation string"}),"`")),Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),";"),"\n\n  ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"return")," ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"("),"\n    ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token tag"}),Object(p.b)("span",Object(n.a)({parentName:"span"},{className:"token tag"}),Object(p.b)("span",Object(n.a)({parentName:"span"},{className:"token punctuation"}),"<"),"ul"),Object(p.b)("span",Object(n.a)({parentName:"span"},{className:"token punctuation"}),">")),Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token plain-text"}),"\n      "),Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"data",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"."),Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token property-access"}),"lists"),Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"."),Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token method function property-access"}),"map"),Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"("),Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"("),Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token parameter"}),"list"),Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),")")," ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token arrow operator"}),"=>")," ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"("),"\n        ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token tag"}),Object(p.b)("span",Object(n.a)({parentName:"span"},{className:"token tag"}),Object(p.b)("span",Object(n.a)({parentName:"span"},{className:"token punctuation"}),"<"),"li")," ",Object(p.b)("span",Object(n.a)({parentName:"span"},{className:"token attr-name"}),"key"),Object(p.b)("span",Object(n.a)({parentName:"span"},{className:"token script language-javascript"}),Object(p.b)("span",Object(n.a)({parentName:"span"},{className:"token script-punctuation punctuation"}),"="),Object(p.b)("span",Object(n.a)({parentName:"span"},{className:"token punctuation"}),"{"),"list",Object(p.b)("span",Object(n.a)({parentName:"span"},{className:"token punctuation"}),"."),Object(p.b)("span",Object(n.a)({parentName:"span"},{className:"token property-access"}),"listId"),Object(p.b)("span",Object(n.a)({parentName:"span"},{className:"token punctuation"}),"}")),Object(p.b)("span",Object(n.a)({parentName:"span"},{className:"token punctuation"}),">")),Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"list",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"."),Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token property-access"}),"name"),Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token tag"}),Object(p.b)("span",Object(n.a)({parentName:"span"},{className:"token tag"}),Object(p.b)("span",Object(n.a)({parentName:"span"},{className:"token punctuation"}),"</"),"li"),Object(p.b)("span",Object(n.a)({parentName:"span"},{className:"token punctuation"}),">")),"\n      ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),")"),Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),")"),Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token plain-text"}),"\n    "),Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token tag"}),Object(p.b)("span",Object(n.a)({parentName:"span"},{className:"token tag"}),Object(p.b)("span",Object(n.a)({parentName:"span"},{className:"token punctuation"}),"</"),"ul"),Object(p.b)("span",Object(n.a)({parentName:"span"},{className:"token punctuation"}),">")),"\n  ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),")"),Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),";"),"\n",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n")),Object(p.b)("h2",{id:"conclusion"},"Conclusion"),Object(p.b)("p",null,"Adopting GraphQL has been a huge win for developer productivity and ultimately our user experience."),Object(p.b)("p",null,"Common issues like ",Object(p.b)("a",Object(n.a)({parentName:"p"},{href:"https://github.com/graphql/dataloader"}),"batching requests")," and ",Object(p.b)("a",Object(n.a)({parentName:"p"},{href:"https://www.apollographql.com/docs/react/advanced/caching/"}),"caching")," have already been solved through the amazing open-source community around GraphQL. We\u2019ve even started experimenting with TypeScript and ",Object(p.b)("a",Object(n.a)({parentName:"p"},{href:"https://github.com/apollographql/apollo-tooling"}),"auto-generating types")," based on our GraphQL schemas."),Object(p.b)("p",null,"GraphQL at Hy-Vee is here to stay\u200a\u2014\u200aand it\u2019s only getting better \ud83d\ude80"))}O.isMDXComponent=!0}},[["NhNq",1,2,0,3,4,5,6,7,8]]]);