_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[73],{"P+SL":function(e,a,t){"use strict";var n=t("q1tI"),c=t.n(n),s=t("mf32"),o=t("BMxC"),b=t("pboS"),p=t("Weur"),r=t("w0db"),m=t("sK1y"),l=c.a.createElement;a.a=function(e){var a=e.header,t=e.link,n=e.metric,c=Object(s.b)().colorMode;return l(o.a,{border:"1px solid",borderColor:{light:"gray.200",dark:"gray.700"}[c],borderRadius:8,p:4,minW:"300px"},l(b.a,{href:t,isExternal:!0},l(p.a,{align:"center"},a,l(r.a,{name:"external-link",mx:2}))),l(m.a,{mt:2,fontSize:"3xl",fontWeight:"bold",lineHeight:"short"},n||"-"))}},dad4:function(e,a,t){"use strict";var n=t("q1tI"),c=t.n(n),s=t("VtrM"),o=t("6WYK"),b=t.n(o),p=t("hoFu"),r=t("QtGK"),m=t("P+SL"),l=c.a.createElement;a.a=function(){var e=Object(s.a)("/api/unsplash",r.a).data,a=b()(null===e||void 0===e?void 0:e.downloads),t=b()(null===e||void 0===e?void 0:e.views),n="https://unsplash.com/@leerob";return l(p.a,{columns:[1,1,2],spacing:4,mb:4},l(m.a,{header:"Unsplash Downloads",link:n,metric:a}),l(m.a,{header:"Unsplash Views",link:n,metric:t}))}},hoFu:function(e,a,t){"use strict";var n=t("pVnL"),c=t.n(n),s=t("8OQS"),o=t.n(s),b=t("q1tI"),p=t.n(b),r=t("BMxC"),m=Object(b.forwardRef)((function(e,a){var t=e.gap,n=e.rowGap,s=e.columnGap,b=e.autoFlow,m=e.autoRows,l=e.autoColumns,j=e.templateRows,u=e.templateColumns,O=e.templateAreas,i=e.area,N=e.column,d=e.row,k=o()(e,["gap","rowGap","columnGap","autoFlow","autoRows","autoColumns","templateRows","templateColumns","templateAreas","area","column","row"]);return p.a.createElement(r.a,c()({ref:a,display:"grid",gridArea:i,gridTemplateAreas:O,gridGap:t,gridRowGap:n,gridColumnGap:s,gridAutoColumns:l,gridColumn:N,gridRow:d,gridAutoFlow:b,gridAutoRows:m,gridTemplateRows:j,gridTemplateColumns:u},k))}));m.displayName="Grid";var l=m,j=function(e){return"number"===typeof e?e+"px":e},u=Object(b.forwardRef)((function(e,a){var t=e.columns,n=e.spacingX,s=e.spacingY,b=e.spacing,r=e.minChildWidth,m=o()(e,["columns","spacingX","spacingY","spacing","minChildWidth"]),u=r?function e(a){if(Array.isArray(a))return a.map(e);if(null!==a&&"object"===typeof a&&Object.keys(a).length>0){var t={};for(var n in a)t[n]="repeat(auto-fit, minmax("+j(a[n])+", 1fr))";return t}return null!=a?"repeat(auto-fit, minmax("+j(a)+", 1fr))":null}(r):function e(a){if(Array.isArray(a))return a.map(e);if(null!==a&&"object"===typeof a&&Object.keys(a).length>0){var t={};for(var n in a)t[n]="repeat("+a[n]+", 1fr)";return t}return null!=a?"repeat("+a+", 1fr)":null}(t);return p.a.createElement(l,c()({ref:a,gap:b,columnGap:n,rowGap:s,templateColumns:u},m))}));u.displayName="SimpleGrid";a.a=u},i3ol:function(e,a,t){"use strict";t.r(a),t.d(a,"frontMatter",(function(){return l})),t.d(a,"default",(function(){return O}));var n=t("wx14"),c=t("Ff2n"),s=t("q1tI"),o=t.n(s),b=t("7ljp"),p=t("ZDfL"),r=t("dad4"),m=t("qh8W"),l=(o.a.createElement,{title:"Create a Dashboard with Next.js API Routes - Unsplash API",publishedAt:"2020-02-04",summary:"Learn how to use Next.js API routes to integrate with the Unsplash API and retrieve statistics about a user.",image:"/static/images/dashboard.jpg",wordCount:544,readingTime:{text:"3 min read",minutes:2.71,time:162600,words:542},__resourcePath:"blog/unsplash-api-nextjs.mdx",__scans:{},layout:"index"}),j={frontMatter:l},u=p.a;function O(e){var a=e.components,t=Object(c.a)(e,["components"]);return Object(b.b)(u,Object(n.a)({},j,t,{components:a,mdxType:"MDXLayout"}),Object(b.b)("blockquote",null,Object(b.b)("p",{parentName:"blockquote"},"In this series, you will learn how to ",Object(b.b)("a",Object(n.a)({parentName:"p"},{href:"/dashboard"}),"create a dashboard")," using Next.js API routes and integrate with third-party APIs.")),Object(b.b)(r.a,{mdxType:"Unsplash"}),Object(b.b)("h2",{id:"overview"},"Overview"),Object(b.b)("p",null,Object(b.b)("a",Object(n.a)({parentName:"p"},{href:"https://unsplash.com"}),"Unsplash")," is the largest source of high-quality images on the internet.\nAmateur and professional photographers give back by allowing their photos to be used ",Object(b.b)("a",Object(n.a)({parentName:"p"},{href:"https://unsplash.com/license"}),"100% free")," for commercial and non-commercial usage."),Object(b.b)("p",null,"They also provide a ",Object(b.b)("a",Object(n.a)({parentName:"p"},{href:"https://unsplash.com/developers"}),"fantastic API"),", which gives you access to millions of photographs and a variety of metrics.\nAs an ",Object(b.b)("a",Object(n.a)({parentName:"p"},{href:"https://unsplash.com/@leerob"}),"Unsplash contributor"),", I wanted to see how many times my photos have been viewed and downloaded."),Object(b.b)("h2",{id:"getting-access-to-unsplash"},"Getting Access to Unsplash"),Object(b.b)("p",null,"To gain access to the Unsplash API, you need to:"),Object(b.b)("ul",null,Object(b.b)("li",{parentName:"ul"},Object(b.b)("a",Object(n.a)({parentName:"li"},{href:"https://unsplash.com/documentation#creating-a-developer-account"}),"Create an account.")),Object(b.b)("li",{parentName:"ul"},"Go to ",Object(b.b)("a",Object(n.a)({parentName:"li"},{href:"https://unsplash.com/oauth/applications"}),"your applications"),"."),Object(b.b)("li",{parentName:"ul"},"Click \u201cNew Application.\u201d"),Object(b.b)("li",{parentName:"ul"},"Accept the terms of usage."),Object(b.b)("li",{parentName:"ul"},"Fill in the required details."),Object(b.b)("li",{parentName:"ul"},"Retrieve the secret key for your new application.")),Object(b.b)("p",null,Object(b.b)("strong",{parentName:"p"},"That's it!")," \ud83c\udf89 You now have access to make requests to the Unsplash API with your secret key."),Object(b.b)("h2",{id:"creating-an-environment-variable"},"Creating an Environment Variable"),Object(b.b)("p",null,"To securely access the API, we need to include the secret with each request.\nWe also ",Object(b.b)("em",{parentName:"p"},"do not")," want to commit secrets to git. Thus, we should use an environment variable."),Object(b.b)("p",null,"Since I'm deploying with ",Object(b.b)("a",Object(n.a)({parentName:"p"},{href:"https://vercel.com"}),"Vercel"),", I can add the secret via their CLI."),Object(b.b)("pre",{className:"language-bash"},Object(b.b)("code",Object(n.a)({parentName:"pre"},{className:"language-bash"}),"$ vc secret ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token function"}),"add")," unsplash-access-token\n")),Object(b.b)("p",null,"To reference it locally when using ",Object(b.b)("inlineCode",{parentName:"p"},"vc dev")," it needs to be added to your ",Object(b.b)("inlineCode",{parentName:"p"},".env")," file."),Object(b.b)("pre",{className:"language-bash"},Object(b.b)("code",Object(n.a)({parentName:"pre"},{className:"language-bash"}),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token assign-left variable"}),"UNSPLASH_ACCESS_TOKEN"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),"="),"042d344\n")),Object(b.b)("p",null,"Finally, we need to add our new secret to ",Object(b.b)("inlineCode",{parentName:"p"},"vercel.json"),"."),Object(b.b)("div",{className:"remark-code-title"},"vercel.json"),Object(b.b)("pre",{className:"language-json"},Object(b.b)("code",Object(n.a)({parentName:"pre"},{className:"language-json"}),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n  ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token property"}),'"env"'),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),":")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n    ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token property"}),'"UNSPLASH_ACCESS_KEY"'),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),":")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'"@unsplash-access-key"'),"\n  ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n")),Object(b.b)("p",null,"We can now reference the secret via ",Object(b.b)("inlineCode",{parentName:"p"},"process.env.UNSPLASH_ACCESS_KEY")," in our API route."),Object(b.b)("h2",{id:"creating-the-api-route"},"Creating the API Route"),Object(b.b)("p",null,"Let's start by creating a new API route at ",Object(b.b)("inlineCode",{parentName:"p"},"pages/api/unsplash.js"),"."),Object(b.b)("pre",{className:"language-js"},Object(b.b)("code",Object(n.a)({parentName:"pre"},{className:"language-js"}),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword module"}),"export")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword module"}),"default")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"("),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token parameter"}),"req",Object(b.b)("span",Object(n.a)({parentName:"span"},{className:"token punctuation"}),",")," res"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),")")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token arrow operator"}),"=>")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n  ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"return")," res",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"."),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token method function property-access"}),"status"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"("),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token number"}),"200"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),")"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"."),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token method function property-access"}),"json"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"("),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),")"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),";"),"\n",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),";"),"\n")),Object(b.b)("p",null,"To make server-side requests to Unsplash, we can install the ",Object(b.b)("a",Object(n.a)({parentName:"p"},{href:"https://github.com/unsplash/unsplash-js"}),"unsplash-js")," library."),Object(b.b)("pre",{className:"language-bash"},Object(b.b)("code",Object(n.a)({parentName:"pre"},{className:"language-bash"}),"$ ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token function"}),"yarn")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token function"}),"add")," unsplash-js\n")),Object(b.b)("p",null,"Then, we can initialize ",Object(b.b)("inlineCode",{parentName:"p"},"unsplash-js")," inside our API route."),Object(b.b)("pre",{className:"language-js"},Object(b.b)("code",Object(n.a)({parentName:"pre"},{className:"language-js"}),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword module"}),"import")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token maybe-class-name"}),"Unsplash"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),",")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{")," toJson ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword module"}),"from")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),"'unsplash-js'"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),";"),"\n\n",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"let")," unsplash",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),";"),"\n\n",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword module"}),"export")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword module"}),"default")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"async")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"("),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token parameter"}),"_",Object(b.b)("span",Object(n.a)({parentName:"span"},{className:"token punctuation"}),",")," res"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),")")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token arrow operator"}),"=>")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n  ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"if")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"("),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),"!"),"unsplash",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),")")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n    unsplash ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),"=")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"new")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token class-name"}),"Unsplash"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"("),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n      accessKey",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),":")," process",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"."),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token property-access"}),"env"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"."),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token constant"}),"UNSPLASH_ACCESS_KEY"),"\n    ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),")"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),";"),"\n  ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n\n  ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"return")," res",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"."),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token method function property-access"}),"status"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"("),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token number"}),"200"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),")"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"."),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token method function property-access"}),"json"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"("),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),")"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),";"),"\n",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),";"),"\n")),Object(b.b)("p",null,"Finally, we want to pull statistics for a given user and return the total number of downloads and views."),Object(b.b)("pre",{className:"language-js"},Object(b.b)("code",Object(n.a)({parentName:"pre"},{className:"language-js"}),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword module"}),"import")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token maybe-class-name"}),"Unsplash"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),",")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{")," toJson ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword module"}),"from")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),"'unsplash-js'"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),";"),"\n\n",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"let")," unsplash",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),";"),"\n\n",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword module"}),"export")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword module"}),"default")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"async")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"("),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token parameter"}),"_",Object(b.b)("span",Object(n.a)({parentName:"span"},{className:"token punctuation"}),",")," res"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),")")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token arrow operator"}),"=>")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n  ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"if")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"("),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),"!"),"unsplash",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),")")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n    unsplash ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),"=")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"new")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token class-name"}),"Unsplash"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"("),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n      accessKey",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),":")," process",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"."),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token property-access"}),"env"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"."),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token constant"}),"UNSPLASH_ACCESS_KEY"),"\n    ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),")"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),";"),"\n  ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n\n  ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"const")," userStats ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),"=")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"await")," unsplash",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"."),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token property-access"}),"users"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"."),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token method function property-access"}),"statistics"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"("),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),"'leerob'"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),")"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),";"),"\n  ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"const")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{")," downloads",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),",")," views ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),"=")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"await")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token function"}),"toJson"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"("),"userStats",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),")"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),";"),"\n\n  ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"return")," res",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"."),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token method function property-access"}),"status"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"("),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token number"}),"200"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),")"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"."),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token method function property-access"}),"json"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"("),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n    downloads",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),":")," downloads",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"."),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token property-access"}),"total"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),","),"\n    views",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),":")," views",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"."),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token property-access"}),"total"),"\n  ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),")"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),";"),"\n",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),";"),"\n")),Object(b.b)("h2",{id:"example"},"Example"),Object(b.b)("p",null,"The two cards below talk to ",Object(b.b)("inlineCode",{parentName:"p"},"/api/unsplash")," and pull back stats about my Unsplash account."),Object(b.b)("p",null,Object(b.b)("em",{parentName:"p"},"Bonus"),": You can cache the API route with the ",Object(b.b)("a",Object(n.a)({parentName:"p"},{href:"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Cache-Control"}),"cache-control")," header."),Object(b.b)("pre",{className:"language-bash"},Object(b.b)("code",Object(n.a)({parentName:"pre"},{className:"language-bash"}),"Cache-Control: public, max-age",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),"="),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token number"}),"120"),", stale-while-revalidate",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),"="),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token number"}),"60"),"\n")),Object(b.b)(r.a,{mdxType:"Unsplash"}),Object(b.b)("h2",{id:"keep-reading"},"Keep Reading"),Object(b.b)("p",null,Object(b.b)("strong",{parentName:"p"},"Create a Dashboard with Next.js API Routes")),Object(b.b)("ul",null,Object(b.b)("li",{parentName:"ul"},"Part 1 - ",Object(b.b)("a",Object(n.a)({parentName:"li"},{href:"/blog/unsplash-api-nextjs"}),"Unsplash API")),Object(b.b)("li",{parentName:"ul"},"Part 2 - ",Object(b.b)("a",Object(n.a)({parentName:"li"},{href:"/blog/youtube-api-nextjs"}),"YouTube API")),Object(b.b)("li",{parentName:"ul"},"Part 3 - ",Object(b.b)("a",Object(n.a)({parentName:"li"},{href:"/blog/google-analytics-api-nextjs"}),"Google Analytics API")),Object(b.b)("li",{parentName:"ul"},"Part 4 - ",Object(b.b)("a",Object(n.a)({parentName:"li"},{href:"/blog/fetching-data-with-swr"}),"Fetching Data with SWR"))),Object(b.b)(m.a,{title:"React 2025",description:"Build and deploy a modern Jamstack application using the most popular open-source software.",href:"https://react2025.com/",icon:"react2025",mdxType:"ProjectCard"}),Object(b.b)(m.a,{title:"jamstackfns",description:"The best serverless functions for JAMstack applications. Deploy to Vercel or Netlify for your static site.",href:"https://jamstackfns.com/",icon:"jamstackfns",mdxType:"ProjectCard"}))}O.isMDXComponent=!0},qh8W:function(e,a,t){"use strict";var n=t("q1tI"),c=t.n(n),s=t("hyUy"),o=t("mf32"),b=t("pboS"),p=t("Weur"),r=t("w0db"),m=t("Yn+B"),l=t("qWyU"),j=t("sK1y"),u=c.a.createElement;a.a=function(e){var a=e.title,t=e.description,n=e.href,c=e.icon,O=Object(o.b)().colorMode;return u(b.a,{mb:4,href:n,onClick:function(){return function(e){s.b({"React 2025":"5WGDOKV0","Mastering Next.js":"HV9HDL0O",jamstackfns:"LRXBPLZS"}[e],0)}(a)},title:a,isExternal:!0,_hover:{boxShadow:"0px 4px 20px rgba(0, 0, 0, 0.05)",textDecoration:"none"}},u(p.a,{align:"center",border:"1px solid",borderColor:{light:"gray.200",dark:"gray.600"}[O],borderRadius:4,p:4},u(r.a,{"aria-label":"LinkedIn",name:c,color:{light:"gray.1000",dark:"white"}[O],size:"32px",ml:2,mr:4}),u(m.a,null,u(l.a,{as:"h4",size:"md",fontWeight:"bold",mb:4,letterSpacing:"tighter"},a),u(j.a,{lineHeight:"1.3"},t))))}},tX2a:function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/blog/unsplash-api-nextjs",function(){return t("i3ol")}])}},[["tX2a",1,2,0,3,4,5,6,7,8]]]);