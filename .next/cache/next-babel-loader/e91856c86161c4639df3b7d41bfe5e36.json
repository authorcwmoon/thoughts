{"ast":null,"code":"// import { useState, useEffect } from 'react';\n// import format from 'comma-number';\n// import loadDb from '../lib/db';\n// const ViewCounter = ({ id }) => {\n//   const [views, setViews] = useState('');\n//   useEffect(() => {\n//     const onViews = (newViews) => setViews(newViews.val());\n//     let db;\n//     const fetchData = async () => {\n//       db = await loadDb();\n//       db.child(id).on('value', onViews);\n//     };\n//     fetchData();\n//     return () => {\n//       if (db) {\n//         db.child(id).off('value', onViews);\n//       }\n//     };\n//   }, [id]);\n//   useEffect(() => {\n//     const registerView = () =>\n//       fetch(`/api/increment-views?id=${encodeURIComponent(id)}`);\n//     registerView();\n//   }, [id]);\n//   return `${views ? format(views) : '–––'} views`;\n// };\n// export default ViewCounter;","map":{"version":3,"sources":["/Users/christian/thoughts/src/components/ViewCounter.js"],"names":[],"mappings":"AAAA;AACA;AAEA;AAEA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AAEA;AACA;AAEA","sourcesContent":["// import { useState, useEffect } from 'react';\n// import format from 'comma-number';\n\n// import loadDb from '../lib/db';\n\n// const ViewCounter = ({ id }) => {\n//   const [views, setViews] = useState('');\n\n//   useEffect(() => {\n//     const onViews = (newViews) => setViews(newViews.val());\n//     let db;\n\n//     const fetchData = async () => {\n//       db = await loadDb();\n//       db.child(id).on('value', onViews);\n//     };\n\n//     fetchData();\n\n//     return () => {\n//       if (db) {\n//         db.child(id).off('value', onViews);\n//       }\n//     };\n//   }, [id]);\n\n//   useEffect(() => {\n//     const registerView = () =>\n//       fetch(`/api/increment-views?id=${encodeURIComponent(id)}`);\n\n//     registerView();\n//   }, [id]);\n\n//   return `${views ? format(views) : '–––'} views`;\n// };\n\n// export default ViewCounter;"]},"metadata":{},"sourceType":"script"}