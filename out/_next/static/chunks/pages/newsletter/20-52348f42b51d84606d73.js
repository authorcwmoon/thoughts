_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[95],{"3xwk":function(e,a,t){"use strict";t.r(a),t.d(a,"frontMatter",(function(){return r})),t.d(a,"default",(function(){return l}));var n=t("wx14"),c=t("Ff2n"),s=t("q1tI"),o=t.n(s),b=t("7ljp"),p=t("MrJl"),r=(o.a.createElement,{title:"Learn how to fetch data with Jamstack (#20)",publishedAt:"2020-07-01",summary:"An archived verison of Lee Robinson's newsletter \u2013 subscribe to get early access.",image:"/static/images/og.jpg",layout:"newsletter",wordCount:2121,readingTime:{text:"11 min read",minutes:10.485,time:629099.9999999999,words:2097},__resourcePath:"newsletter/20.mdx",__scans:{}}),m={frontMatter:r},i=p.a;function l(e){var a=e.components,t=Object(c.a)(e,["components"]);return Object(b.b)(i,Object(n.a)({},m,t,{components:a,mdxType:"MDXLayout"}),Object(b.b)("p",null,Object(b.b)("em",{parentName:"p"},"Hey! You're getting this email because you signed up for updates from ",Object(b.b)("a",Object(n.a)({parentName:"em"},{href:"/"}),"my site"),". If you don't want to get these emails, definitely unsubscribe \u2014 I only want to send these to you if you look forward to getting them \u270c\ufe0f")),Object(b.b)("hr",null),Object(b.b)("p",null,"A few miscellaneous updates, plus a new article!"),Object(b.b)("ul",null,Object(b.b)("li",{parentName:"ul"},Object(b.b)("a",Object(n.a)({parentName:"li"},{href:"https://react2025.com"}),"React 2025")," has now surpassed more than ",Object(b.b)("em",{parentName:"li"},"100 pre-orders")," and ",Object(b.b)("strong",{parentName:"li"},"$10,000")," in revenue! Most of my time this past month has been spent recording ",Object(b.b)("a",Object(n.a)({parentName:"li"},{href:"https://www.youtube.com/watch?v=u8iv_yhSRI8"}),"live streams"),"."),Object(b.b)("li",{parentName:"ul"},"I announced the product I'll be building, ",Object(b.b)("a",Object(n.a)({parentName:"li"},{href:"https://buttondown.email/leerob/archive/abd265a0-c292-40a7-9d70-306ccb6f2004"}),"Fast Feedback"),", in a React 2025 update."),Object(b.b)("li",{parentName:"ul"},"Last week, I finished a week long roadtrip from Portland, OR to Yosemite National Park with my best friends. You can see some pictures ",Object(b.b)("a",Object(n.a)({parentName:"li"},{href:"https://photos.leerob.io/"}),"here"),".")),Object(b.b)("p",null,"The rest of this email is my latest blog post about fetching data with Next.js. Should I use client-side rendering? Server-side rendering? Find out below."),Object(b.b)("h2",{id:"data-fetching-with-jamstack"},"Data Fetching with Jamstack"),Object(b.b)("p",null,"When you're building a ",Object(b.b)("a",Object(n.a)({parentName:"p"},{href:"https://jamstack.org/"}),"Jamstack")," (",Object(b.b)("em",{parentName:"p"},"J"),"avaScript,\xa0",Object(b.b)("em",{parentName:"p"},"A"),"PIs, and\xa0",Object(b.b)("em",{parentName:"p"},"M"),"arkup) app, you need to decide on your ",Object(b.b)("strong",{parentName:"p"},"data fetching strategy"),". The simplest approach is to fetch data for ",Object(b.b)("strong",{parentName:"p"},"all")," pages at build time. Many ",Object(b.b)("a",Object(n.a)({parentName:"p"},{href:"https://www.staticgen.com/"}),"static site generators")," support this approach."),Object(b.b)("p",null,"However, not all pages are created equal. As your application scales, you may need to change your data fetching strategy on ",Object(b.b)("strong",{parentName:"p"},"a per-page basis"),". Maybe your landing page can be generated at build time, but your dashboard must be generated at request time. Some pages might also need to be generated after build time, but before request time."),Object(b.b)("p",null,"For example,\xa0",Object(b.b)("a",Object(n.a)({parentName:"p"},{href:"http://vercel.com/"}),"the Vercel website"),"\xa0uses three different data fetching strategies. I'll explain what each strategy means shortly."),Object(b.b)("ul",null,Object(b.b)("li",{parentName:"ul"},Object(b.b)("strong",{parentName:"li"},"Static Generation:")," Generate static marketing pages, blog posts, and documentation at build time."),Object(b.b)("li",{parentName:"ul"},Object(b.b)("strong",{parentName:"li"},"Incremental Static Generation:")," The blog posts are regenerated incrementally at a certain interval."),Object(b.b)("li",{parentName:"ul"},Object(b.b)("strong",{parentName:"li"},"Client-side Fetching:")," On a user dashboard, it first serves a static shell, then fetches user information at request time.")),Object(b.b)("p",null,"To do this, you need a frontend framework that's more flexible than traditional static site generators. With\xa0",Object(b.b)("a",Object(n.a)({parentName:"p"},{href:"https://nextjs.org/"}),"Next.js"),", you can change your data fetching strategy on a\xa0",Object(b.b)("a",Object(n.a)({parentName:"p"},{href:"https://nextjs.org/docs/basic-features/pages"}),"per-page basis"),"."),Object(b.b)("p",null,"In this email, I'll explain when to use each strategy, and how you can use Next.js to implement them."),Object(b.b)("h2",{id:"static-generation"},"Static Generation"),Object(b.b)("p",null,Object(b.b)("strong",{parentName:"p"},"Static Generation")," is about pre-rendering your page into a static HTML at build time. Static Generation is one of the core ideas of Jamstack and has several benefits:"),Object(b.b)("ul",null,Object(b.b)("li",{parentName:"ul"},Object(b.b)("strong",{parentName:"li"},"Faster:")," The pre-rendered HTML files can be cached on a global CDN for performance."),Object(b.b)("li",{parentName:"ul"},Object(b.b)("strong",{parentName:"li"},"Cheaper:")," On each request, the server does not need to render the page, which reduces the server load."),Object(b.b)("li",{parentName:"ul"},Object(b.b)("strong",{parentName:"li"},"Easier:")," No complicated deployments. Better developer experience.")),Object(b.b)("p",null,"Static Generation can be done with or without external data."),Object(b.b)("p",null,Object(b.b)("strong",{parentName:"p"},"Without data:")," In Next.js, if a page can be pre-rendered without external data, it will be pre-rendered into a HTML file at build time automatically."),Object(b.b)("pre",{className:"language-jsx"},Object(b.b)("code",Object(n.a)({parentName:"pre"},{className:"language-jsx"}),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token comment"}),"// pages/products/index.js"),"\n\n",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token comment"}),"// This page can can be pre-rendered without"),"\n",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token comment"}),"// external data: It will be pre-rendered"),"\n",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token comment"}),"// into a HTML file at build time."),"\n",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword module"}),"export")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword module"}),"default")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"function")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token function"}),Object(b.b)("span",Object(n.a)({parentName:"span"},{className:"token maybe-class-name"}),"Products")),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"("),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),")")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n  ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"return")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token tag"}),Object(b.b)("span",Object(n.a)({parentName:"span"},{className:"token tag"}),Object(b.b)("span",Object(n.a)({parentName:"span"},{className:"token punctuation"}),"<"),"h1"),Object(b.b)("span",Object(n.a)({parentName:"span"},{className:"token punctuation"}),">")),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token plain-text"}),"Products"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token tag"}),Object(b.b)("span",Object(n.a)({parentName:"span"},{className:"token tag"}),Object(b.b)("span",Object(n.a)({parentName:"span"},{className:"token punctuation"}),"</"),"h1"),Object(b.b)("span",Object(n.a)({parentName:"span"},{className:"token punctuation"}),">")),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),";"),"\n",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n")),Object(b.b)("p",null,Object(b.b)("strong",{parentName:"p"},"With data:")," Some pages might need to fetch external data before they can be pre-rendered into a HTML file. In Next.js, you can use the following functions to specify the data dependency for each page. These functions will be called at build time."),Object(b.b)("ul",null,Object(b.b)("li",{parentName:"ul"},Object(b.b)("inlineCode",{parentName:"li"},"getStaticProps")," \u2013 Fetch external data required to pre-render your page."),Object(b.b)("li",{parentName:"ul"},Object(b.b)("inlineCode",{parentName:"li"},"getStaticPaths")," (optional) \u2013 Specify which routes to generate, if you're using dynamic routes.")),Object(b.b)("h3",{id:"getstaticprops"},Object(b.b)("inlineCode",{parentName:"h3"},"getStaticProps")),Object(b.b)("p",null,"Let's consider an e-commerce site showing a list of all products. At build time, we want to fetch all products from a content management system (CMS) and use this data to pre-render the ",Object(b.b)("inlineCode",{parentName:"p"},"Products")," component. In Next.js, you can do so by exporting a ",Object(b.b)("inlineCode",{parentName:"p"},"getStaticProps")," function in a page component file. You can fetch external data in this function, and it will be used to pre-render the page component at build time."),Object(b.b)("pre",{className:"language-jsx"},Object(b.b)("code",Object(n.a)({parentName:"pre"},{className:"language-jsx"}),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword module"}),"export")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"async")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"function")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token function"}),"getStaticProps"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"("),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),")")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n  ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"return")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n    props",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),":")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n      ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token comment"}),"// getProductsFromCMS() will fetch() the CMS API"),"\n      products",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),":")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"await")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token function"}),"getProductsFromCMS"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"("),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),")"),"\n    ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n  ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),";"),"\n",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n\n",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token comment"}),"// Products receives products prop from getStaticProps"),"\n",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token comment"}),"// at build time"),"\n",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword module"}),"export")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword module"}),"default")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"function")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token function"}),Object(b.b)("span",Object(n.a)({parentName:"span"},{className:"token maybe-class-name"}),"Products")),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"("),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token parameter"}),Object(b.b)("span",Object(n.a)({parentName:"span"},{className:"token punctuation"}),"{")," products ",Object(b.b)("span",Object(n.a)({parentName:"span"},{className:"token punctuation"}),"}")),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),")")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n  ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"return")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"("),"\n    ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token tag"}),Object(b.b)("span",Object(n.a)({parentName:"span"},{className:"token tag"}),Object(b.b)("span",Object(n.a)({parentName:"span"},{className:"token punctuation"}),"<")),Object(b.b)("span",Object(n.a)({parentName:"span"},{className:"token punctuation"}),">")),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token plain-text"}),"\n      "),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token tag"}),Object(b.b)("span",Object(n.a)({parentName:"span"},{className:"token tag"}),Object(b.b)("span",Object(n.a)({parentName:"span"},{className:"token punctuation"}),"<"),"h1"),Object(b.b)("span",Object(n.a)({parentName:"span"},{className:"token punctuation"}),">")),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token plain-text"}),"Products"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token tag"}),Object(b.b)("span",Object(n.a)({parentName:"span"},{className:"token tag"}),Object(b.b)("span",Object(n.a)({parentName:"span"},{className:"token punctuation"}),"</"),"h1"),Object(b.b)("span",Object(n.a)({parentName:"span"},{className:"token punctuation"}),">")),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token plain-text"}),"\xa0\n      "),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token tag"}),Object(b.b)("span",Object(n.a)({parentName:"span"},{className:"token tag"}),Object(b.b)("span",Object(n.a)({parentName:"span"},{className:"token punctuation"}),"<"),"ul"),Object(b.b)("span",Object(n.a)({parentName:"span"},{className:"token punctuation"}),">")),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token plain-text"}),"\n        "),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"products",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"."),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token method function property-access"}),"map"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"("),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"("),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token parameter"}),"product"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),")")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token arrow operator"}),"=>")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"("),"\n          ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token tag"}),Object(b.b)("span",Object(n.a)({parentName:"span"},{className:"token tag"}),Object(b.b)("span",Object(n.a)({parentName:"span"},{className:"token punctuation"}),"<"),"li")," ",Object(b.b)("span",Object(n.a)({parentName:"span"},{className:"token attr-name"}),"key"),Object(b.b)("span",Object(n.a)({parentName:"span"},{className:"token script language-javascript"}),Object(b.b)("span",Object(n.a)({parentName:"span"},{className:"token script-punctuation punctuation"}),"="),Object(b.b)("span",Object(n.a)({parentName:"span"},{className:"token punctuation"}),"{"),"product",Object(b.b)("span",Object(n.a)({parentName:"span"},{className:"token punctuation"}),"."),Object(b.b)("span",Object(n.a)({parentName:"span"},{className:"token property-access"}),"id"),Object(b.b)("span",Object(n.a)({parentName:"span"},{className:"token punctuation"}),"}")),Object(b.b)("span",Object(n.a)({parentName:"span"},{className:"token punctuation"}),">")),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"product",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"."),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token property-access"}),"name"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token tag"}),Object(b.b)("span",Object(n.a)({parentName:"span"},{className:"token tag"}),Object(b.b)("span",Object(n.a)({parentName:"span"},{className:"token punctuation"}),"</"),"li"),Object(b.b)("span",Object(n.a)({parentName:"span"},{className:"token punctuation"}),">")),"\n        ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),")"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),")"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token plain-text"}),"\n      "),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token tag"}),Object(b.b)("span",Object(n.a)({parentName:"span"},{className:"token tag"}),Object(b.b)("span",Object(n.a)({parentName:"span"},{className:"token punctuation"}),"</"),"ul"),Object(b.b)("span",Object(n.a)({parentName:"span"},{className:"token punctuation"}),">")),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token plain-text"}),"\n    "),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token tag"}),Object(b.b)("span",Object(n.a)({parentName:"span"},{className:"token tag"}),Object(b.b)("span",Object(n.a)({parentName:"span"},{className:"token punctuation"}),"</")),Object(b.b)("span",Object(n.a)({parentName:"span"},{className:"token punctuation"}),">")),"\n  ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),")"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),";"),"\n",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n")),Object(b.b)("p",null,Object(b.b)("inlineCode",{parentName:"p"},"getStaticProps")," runs only in a build server (Node.js environment) and is\xa0",Object(b.b)("a",Object(n.a)({parentName:"p"},{href:"https://nextjs.org/docs/basic-features/data-fetching#technical-details"}),"not included"),"\xa0in the client-side JavaScript bundle, so you can directly query your database if necessary."),Object(b.b)("h3",{id:"getstaticpaths"},Object(b.b)("inlineCode",{parentName:"h3"},"getStaticPaths")),Object(b.b)("p",null,"Your e-commerce site also needs to pre-render each product page at build time. Each product needs to have its own route based on its ",Object(b.b)("inlineCode",{parentName:"p"},"id"),", i.e. ",Object(b.b)("inlineCode",{parentName:"p"},"/products/[id]"),". In Next.js, this can be done using\xa0",Object(b.b)("a",Object(n.a)({parentName:"p"},{href:"https://nextjs.org/docs/routing/dynamic-routes"}),"dynamic routes"),"\xa0and ",Object(b.b)("inlineCode",{parentName:"p"},"getStaticPaths"),"."),Object(b.b)("p",null,"We also need the product data for each page. In combination with ",Object(b.b)("inlineCode",{parentName:"p"},"getStaticProps"),", we can fetch the specific product data for that ",Object(b.b)("inlineCode",{parentName:"p"},"id"),". If a product is not found given the ",Object(b.b)("inlineCode",{parentName:"p"},"id"),", it will show a 404 page (this is because of ",Object(b.b)("inlineCode",{parentName:"p"},"fallback: false")," )."),Object(b.b)("pre",{className:"language-jsx"},Object(b.b)("code",Object(n.a)({parentName:"pre"},{className:"language-jsx"}),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token comment"}),"// pages/products/[id].js"),"\n\n",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword module"}),"export")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword module"}),"default")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"function")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token function"}),Object(b.b)("span",Object(n.a)({parentName:"span"},{className:"token maybe-class-name"}),"Product")),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"("),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token parameter"}),Object(b.b)("span",Object(n.a)({parentName:"span"},{className:"token punctuation"}),"{")," product ",Object(b.b)("span",Object(n.a)({parentName:"span"},{className:"token punctuation"}),"}")),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),")")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n  ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token comment"}),"// Render product"),"\n",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n\n",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token comment"}),"// In getStaticPaths(), you need to return the list of"),"\n",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token comment"}),"// ids of product pages (/products/[id]) that you'd"),"\n",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token comment"}),"// like to pre-render at build time. To do so,"),"\n",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token comment"}),"// you can fetch all products from your CMS."),"\n",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword module"}),"export")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"async")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"function")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token function"}),"getStaticPaths"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"("),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),")")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n  ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"const")," products ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),"=")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"await")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token function"}),"getProductsFromCMS"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"("),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),")"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),";"),"\n\n  ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"const")," paths ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),"=")," products",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"."),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token method function property-access"}),"map"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"("),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"("),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token parameter"}),"product"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),")")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token arrow operator"}),"=>")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"("),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n    params",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),":")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{")," id",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),":")," product",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"."),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token property-access"}),"id")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n  ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),")"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),")"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),";"),"\n\n  ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token comment"}),"// fallback: false means pages that don't have the"),"\n  ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token comment"}),"// correct id will 404."),"\n  ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"return")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{")," paths",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),",")," fallback",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),":")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token boolean"}),"false")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),";"),"\n",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n\n",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token comment"}),"// params will contain the id for each generated page."),"\n",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword module"}),"export")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"async")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"function")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token function"}),"getStaticProps"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"("),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token parameter"}),Object(b.b)("span",Object(n.a)({parentName:"span"},{className:"token punctuation"}),"{")," params ",Object(b.b)("span",Object(n.a)({parentName:"span"},{className:"token punctuation"}),"}")),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),")")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n  ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"return")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n    props",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),":")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n      product",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),":")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"await")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token function"}),"getProductFromCMS"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"("),"params",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"."),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token property-access"}),"id"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),")"),"\n    ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n  ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),";"),"\n",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n")),Object(b.b)("h2",{id:"incremental-static-generation"},"Incremental Static Generation"),Object(b.b)("p",null,"Now, suppose that your e-commerce platform has grown significantly. Instead of 100 products, you now have 100,000. Products get updated frequently. This poses two problems:"),Object(b.b)("ul",null,Object(b.b)("li",{parentName:"ul"},"Pre-rendering 100,000 pages at build time can be very slow."),Object(b.b)("li",{parentName:"ul"},"When product data is updated, you only want to modify the affected pages. We can't have a full site rebuild every time a product is modified.")),Object(b.b)("p",null,"Both of these problems can be solved by ",Object(b.b)("strong",{parentName:"p"},"Incremental Static Generation"),". Incremental Static Generation is about pre-rendering ",Object(b.b)("strong",{parentName:"p"},"a subset of pages incrementally after build time"),". It can be used to add pages or update existing pre-rendered pages. This allows you to keep\xa0",Object(b.b)("a",Object(n.a)({parentName:"p"},{href:"https://rauchg.com/2020/2019-in-review#static-is-the-new-dynamic"}),"the benefits of static"),"\xa0(always fast, always online, globally distributed) with dynamic data."),Object(b.b)("h3",{id:"adding-pages"},"Adding Pages"),Object(b.b)("p",null,"If you have 100,000 products, and pre-rendering all pages at build time is too slow, you can pre-render pages lazily."),Object(b.b)("p",null,"For example, suppose that one of those 100,000 products is called product X. Using Next.js, we can pre-render this page when a user requests the page for product X. Here's how it works:"),Object(b.b)("ol",null,Object(b.b)("li",{parentName:"ol"},"A user requests the page for product X."),Object(b.b)("li",{parentName:"ol"},'We haven\'t pre-rendered this page yet. Instead of rendering 404, Next.js can serve a "fallback" version of this page (for example, show a loading indicator).'),Object(b.b)("li",{parentName:"ol"},"In the background, Next.js will render the product X page. When that's done, the loading page will be swapped to the product X page."),Object(b.b)("li",{parentName:"ol"},"The next time someone else requests the page for product X, the pre-rendered product X page will be served, just like regular static generation.")),Object(b.b)("p",null,"To enable this behavior, you can specify ",Object(b.b)("inlineCode",{parentName:"p"},"fallback: true")," in ",Object(b.b)("inlineCode",{parentName:"p"},"getStaticPaths"),". Then, in the page itself, you can use ",Object(b.b)("inlineCode",{parentName:"p"},"router.isFallback")," to see if the loading indicator should be displayed."),Object(b.b)("pre",{className:"language-jsx"},Object(b.b)("code",Object(n.a)({parentName:"pre"},{className:"language-jsx"}),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword module"}),"export")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"async")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"function")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token function"}),"getStaticProps"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"("),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token parameter"}),Object(b.b)("span",Object(n.a)({parentName:"span"},{className:"token punctuation"}),"{")," params ",Object(b.b)("span",Object(n.a)({parentName:"span"},{className:"token punctuation"}),"}")),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),")")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n  ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token comment"}),"// ..."),"\n",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n\n",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword module"}),"export")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"async")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"function")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token function"}),"getStaticPaths"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"("),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),")")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n  ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token comment"}),"// ..."),"\n\n  ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token comment"}),"// fallback: true means that the missing pages"),"\n  ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token comment"}),"// will not 404, and instead can render a fallback."),"\n  ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"return")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{")," paths",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),",")," fallback",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),":")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token boolean"}),"true")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),";"),"\n",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n\n",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword module"}),"export")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword module"}),"default")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"function")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token function"}),Object(b.b)("span",Object(n.a)({parentName:"span"},{className:"token maybe-class-name"}),"Product")),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"("),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token parameter"}),Object(b.b)("span",Object(n.a)({parentName:"span"},{className:"token punctuation"}),"{")," product ",Object(b.b)("span",Object(n.a)({parentName:"span"},{className:"token punctuation"}),"}")),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),")")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n  ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"const")," router ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),"=")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token function"}),"useRouter"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"("),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),")"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),";"),"\n\n  ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"if")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"("),"router",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"."),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token property-access"}),"isFallback"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),")")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n    ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"return")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token tag"}),Object(b.b)("span",Object(n.a)({parentName:"span"},{className:"token tag"}),Object(b.b)("span",Object(n.a)({parentName:"span"},{className:"token punctuation"}),"<"),"div"),Object(b.b)("span",Object(n.a)({parentName:"span"},{className:"token punctuation"}),">")),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token plain-text"}),"Loading..."),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token tag"}),Object(b.b)("span",Object(n.a)({parentName:"span"},{className:"token tag"}),Object(b.b)("span",Object(n.a)({parentName:"span"},{className:"token punctuation"}),"</"),"div"),Object(b.b)("span",Object(n.a)({parentName:"span"},{className:"token punctuation"}),">")),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),";"),"\n  ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n\n  ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token comment"}),"// Render product..."),"\n",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n")),Object(b.b)("p",null,Object(b.b)("a",Object(n.a)({parentName:"p"},{href:"https://static-tweet.now.sh/"}),"Here's an example of this behavior using Twitter as the data source"),"."),Object(b.b)("h3",{id:"updating-existing-pages-incremental-static-regeneration"},'Updating Existing Pages: Incremental Static "Re"Generation'),Object(b.b)("p",null,"When a product data is updated, you wouldn't want to rebuild the entire app; only the affected pages should be updated."),Object(b.b)("p",null,"For example, suppose that at build time, we've pre-rendered the page for product Y. At some point, the data for product Y gets updated. Using Next.js, we can pre-render this page again after some interval. Here's how it works:"),Object(b.b)("ol",null,Object(b.b)("li",{parentName:"ol"},'Next.js can define a "timeout" for this page \u2013 let\'s set it at 60 seconds.'),Object(b.b)("li",{parentName:"ol"},"The data for product Y is updated."),Object(b.b)("li",{parentName:"ol"},"When the page for product Y is requested, the user will see the existing (out of date) page."),Object(b.b)("li",{parentName:"ol"},"When another request comes in 60 seconds after the previous request, this user will also see the existing (out of date) page, but in the background, Next.js pre-renders this page again, updating the existing HTML file."),Object(b.b)("li",{parentName:"ol"},"Once the pre-rendering is done, from then on Next.js serves the updated page for product Y.")),Object(b.b)("p",null,"To enable this behavior, you can specify ",Object(b.b)("inlineCode",{parentName:"p"},"unstable_revalidate: 60")," in ",Object(b.b)("inlineCode",{parentName:"p"},"getStaticProps"),". It has the ",Object(b.b)("inlineCode",{parentName:"p"},"unstable_")," prefix because as of writing, this feature is currently in beta (but ready for production)."),Object(b.b)("pre",{className:"language-jsx"},Object(b.b)("code",Object(n.a)({parentName:"pre"},{className:"language-jsx"}),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword module"}),"export")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"async")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"function")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token function"}),"getStaticProps"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"("),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),")")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n  ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"return")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n    products",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),":")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"await")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token function"}),"getProductsFromCMS"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"("),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),")"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),","),"\n    unstable_revalidate",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),":")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token number"}),"60"),"\n  ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),";"),"\n",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n")),Object(b.b)("p",null,"Inspired by\xa0",Object(b.b)("a",Object(n.a)({parentName:"p"},{href:"https://tools.ietf.org/html/rfc5861"}),"stale-while-revalidate"),", this ensures traffic is served statically, and new pages are pushed only after generating successfully."),Object(b.b)("p",null,"Incremental Static Generation is fully supported by both ",Object(b.b)("inlineCode",{parentName:"p"},"next start")," and the\xa0",Object(b.b)("a",Object(n.a)({parentName:"p"},{href:"https://vercel.com/"}),"Vercel edge platform"),"\xa0out of the box."),Object(b.b)("h2",{id:"client-side-fetching"},"Client-Side Fetching"),Object(b.b)("p",null,"Some pages, like a user dashboard, can only be partially pre-rendered ahead of a request at build time. Most items on such pages must be rendered at request time. In such cases, you can do Client-side Fetching:"),Object(b.b)("ol",null,Object(b.b)("li",{parentName:"ol"},"Pre-render the page without data and show a loading state."),Object(b.b)("li",{parentName:"ol"},"Then, fetch and display the data client-side.")),Object(b.b)("p",null,"For fetching data, I recommend using the data fetching library\xa0",Object(b.b)("a",Object(n.a)({parentName:"p"},{href:"https://swr.now.sh/"}),"SWR"),". It handles caching, revalidation, focus tracking, and more. For our e-commerce application, an example would be the shopping cart."),Object(b.b)("pre",{className:"language-jsx"},Object(b.b)("code",Object(n.a)({parentName:"pre"},{className:"language-jsx"}),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword module"}),"import")," useSWR ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword module"}),"from")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),"'swr'"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),";"),"\n\n",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"function")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token function"}),Object(b.b)("span",Object(n.a)({parentName:"span"},{className:"token maybe-class-name"}),"ShoppingCart")),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"("),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),")")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n  ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token comment"}),"// fetchAPI is the function to do data fetching"),"\n  ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"const")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{")," data",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),",")," error ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),"=")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token function"}),"useSWR"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"("),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),"'/api/cart'"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),",")," fetchAPI",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),")"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),";"),"\n\n  ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"if")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"("),"error",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),")")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"return")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token tag"}),Object(b.b)("span",Object(n.a)({parentName:"span"},{className:"token tag"}),Object(b.b)("span",Object(n.a)({parentName:"span"},{className:"token punctuation"}),"<"),"div"),Object(b.b)("span",Object(n.a)({parentName:"span"},{className:"token punctuation"}),">")),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token plain-text"}),"failed to load"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token tag"}),Object(b.b)("span",Object(n.a)({parentName:"span"},{className:"token tag"}),Object(b.b)("span",Object(n.a)({parentName:"span"},{className:"token punctuation"}),"</"),"div"),Object(b.b)("span",Object(n.a)({parentName:"span"},{className:"token punctuation"}),">")),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),";"),"\n  ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"if")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"("),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),"!"),"data",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),")")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"return")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token tag"}),Object(b.b)("span",Object(n.a)({parentName:"span"},{className:"token tag"}),Object(b.b)("span",Object(n.a)({parentName:"span"},{className:"token punctuation"}),"<"),"div"),Object(b.b)("span",Object(n.a)({parentName:"span"},{className:"token punctuation"}),">")),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token plain-text"}),"loading..."),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token tag"}),Object(b.b)("span",Object(n.a)({parentName:"span"},{className:"token tag"}),Object(b.b)("span",Object(n.a)({parentName:"span"},{className:"token punctuation"}),"</"),"div"),Object(b.b)("span",Object(n.a)({parentName:"span"},{className:"token punctuation"}),">")),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),";"),"\n  ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"return")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token tag"}),Object(b.b)("span",Object(n.a)({parentName:"span"},{className:"token tag"}),Object(b.b)("span",Object(n.a)({parentName:"span"},{className:"token punctuation"}),"<"),"div"),Object(b.b)("span",Object(n.a)({parentName:"span"},{className:"token punctuation"}),">")),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token plain-text"}),"Items in Cart: "),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"data",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"."),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token property-access"}),"products"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"."),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token property-access"}),"length"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token tag"}),Object(b.b)("span",Object(n.a)({parentName:"span"},{className:"token tag"}),Object(b.b)("span",Object(n.a)({parentName:"span"},{className:"token punctuation"}),"</"),"div"),Object(b.b)("span",Object(n.a)({parentName:"span"},{className:"token punctuation"}),">")),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),";"),"\n",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n")),Object(b.b)("h2",{id:"server-side-rendering"},"Server-Side Rendering"),Object(b.b)("p",null,"Next.js can also pre-render a page on the server on ",Object(b.b)("strong",{parentName:"p"},"every request")," \u2013 this is called Server-side Rendering. To use this feature, you can export a function called ",Object(b.b)("inlineCode",{parentName:"p"},"getServerSideProps")," from a page, just like ",Object(b.b)("inlineCode",{parentName:"p"},"getStaticProps"),"."),Object(b.b)("p",null,"However, I ",Object(b.b)("strong",{parentName:"p"},"do not recommend")," using this strategy if you can use Incremental Static Generation or Client-side Fetching. With server rendering, the\xa0",Object(b.b)("a",Object(n.a)({parentName:"p"},{href:"https://nextjs.org/docs/advanced-features/measuring-performance#web-vitals"}),"Time to First Byte (TTFB)"),"\xa0is slower than Static Generation because the server must pre-render the page on every request. Without extra configuration, the pre-rendered pages cannot be cached by a CDN. It's also slower than Client-side Fetching because with Client-side Fetching, you'll see the loading state immediately."),Object(b.b)("p",null,"Server rendering is not disappearing\xa0",Object(b.b)("a",Object(n.a)({parentName:"p"},{href:"https://rauchg.com/2020/2019-in-review#static-is-the-new-dynamic"}),"but evolving"),". Try Incremental Static Generation or Client-side Fetching and see if they fit your needs."),Object(b.b)("h2",{id:"also-writing-data"},"Also: Writing Data"),Object(b.b)("p",null,"Fetching data is only half the equation. Your app might need to write data back to your data source. Adding an item to the shopping cart is a good example of this."),Object(b.b)("p",null,"Next.js has a feature called ",Object(b.b)("strong",{parentName:"p"},"API Routes")," for this purpose. To use this feature, you can create a file inside the ",Object(b.b)("inlineCode",{parentName:"p"},"pages/api")," directory, which creates an API endpoint\xa0we can use to mutate our data source. For example, we can create ",Object(b.b)("inlineCode",{parentName:"p"},"pages/api/cart.js"),", which accepts a ",Object(b.b)("inlineCode",{parentName:"p"},"productId")," query parameter and adds that item to our cart."),Object(b.b)("p",null,"Inside our\xa0",Object(b.b)("a",Object(n.a)({parentName:"p"},{href:"https://nextjs.org/docs/api-routes/introduction"}),"API route"),", we export a request handler, which receives a request and returns a ",Object(b.b)("inlineCode",{parentName:"p"},"json")," response."),Object(b.b)("pre",{className:"language-jsx"},Object(b.b)("code",Object(n.a)({parentName:"pre"},{className:"language-jsx"}),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword module"}),"export")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword module"}),"default")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"async")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"("),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token parameter"}),"req",Object(b.b)("span",Object(n.a)({parentName:"span"},{className:"token punctuation"}),",")," res"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),")")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token arrow operator"}),"=>")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n  ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"const")," response ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),"=")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"await")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token function"}),"fetch"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"("),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token template-string"}),Object(b.b)("span",Object(n.a)({parentName:"span"},{className:"token template-punctuation string"}),"`"),Object(b.b)("span",Object(n.a)({parentName:"span"},{className:"token string"}),"https://.../cart"),Object(b.b)("span",Object(n.a)({parentName:"span"},{className:"token template-punctuation string"}),"`")),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),",")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n    body",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),":")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token known-class-name class-name"}),"JSON"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"."),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token method function property-access"}),"stringify"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"("),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n      productId",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),":")," req",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"."),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token property-access"}),"query"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"."),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token property-access"}),"productId"),"\n    ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),")"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),","),"\n    headers",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),":")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n      ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token maybe-class-name"}),"Authorization"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),":")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token template-string"}),Object(b.b)("span",Object(n.a)({parentName:"span"},{className:"token template-punctuation string"}),"`"),Object(b.b)("span",Object(n.a)({parentName:"span"},{className:"token string"}),"Token "),Object(b.b)("span",Object(n.a)({parentName:"span"},{className:"token interpolation"}),Object(b.b)("span",Object(n.a)({parentName:"span"},{className:"token interpolation-punctuation punctuation"}),"${"),"process",Object(b.b)("span",Object(n.a)({parentName:"span"},{className:"token punctuation"}),"."),Object(b.b)("span",Object(n.a)({parentName:"span"},{className:"token property-access"}),"env"),Object(b.b)("span",Object(n.a)({parentName:"span"},{className:"token punctuation"}),"."),Object(b.b)("span",Object(n.a)({parentName:"span"},{className:"token constant"}),"YOUR_API_KEY"),Object(b.b)("span",Object(n.a)({parentName:"span"},{className:"token interpolation-punctuation punctuation"}),"}")),Object(b.b)("span",Object(n.a)({parentName:"span"},{className:"token template-punctuation string"}),"`")),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),","),"\n      ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),"'Content-Type'"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),":")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),"'application/json'"),"\n    ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),","),"\n    method",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),":")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),"'POST'"),"\n  ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),")"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),";"),"\n\n  ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"const")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{")," products ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),"=")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"await")," response",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"."),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token method function property-access"}),"json"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"("),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),")"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),";"),"\n  ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"return")," res",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"."),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token method function property-access"}),"status"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"("),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token number"}),"200"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),")"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"."),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token method function property-access"}),"json"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"("),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{")," products ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),")"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),";"),"\n",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),";"),"\n")),Object(b.b)("p",null,"API routes allow us to write to an external data source securely. Using\xa0",Object(b.b)("a",Object(n.a)({parentName:"p"},{href:"https://nextjs.org/docs/basic-features/environment-variables"}),"environment variables"),", we can include secrets for authentication without exposing the values client-side."),Object(b.b)("p",null,"API routes can be deployed as ",Object(b.b)("a",Object(n.a)({parentName:"p"},{href:"https://vercel.com/docs/v2/serverless-functions/introduction"}),"Serverless Functions")," (which is the default when you deploy to Vercel)."),Object(b.b)("h2",{id:"conclusion"},"Conclusion"),Object(b.b)("p",null,"The hybrid approach of Next.js allows changing your data fetching strategy on a per-page basis."),Object(b.b)("ul",null,Object(b.b)("li",{parentName:"ul"},"Use Static Generation and Incremental Static Generation to pre-render pages ahead of a request."),Object(b.b)("li",{parentName:"ul"},"Use Client-side Fetching if you need to render a page at request time."),Object(b.b)("li",{parentName:"ul"},"Mutate data using API routes.")),Object(b.b)("p",null,"For more information, check out the Next.js documentation."),Object(b.b)("ul",null,Object(b.b)("li",{parentName:"ul"},Object(b.b)("a",Object(n.a)({parentName:"li"},{href:"https://nextjs.org/docs/basic-features/pages#pre-rendering"}),"Pre-Rendering")),Object(b.b)("li",{parentName:"ul"},Object(b.b)("a",Object(n.a)({parentName:"li"},{href:"https://nextjs.org/docs/basic-features/data-fetching"}),"Data Fetching")),Object(b.b)("li",{parentName:"ul"},Object(b.b)("a",Object(n.a)({parentName:"li"},{href:"https://nextjs.org/docs/api-routes/introduction"}),"API Routes"))),Object(b.b)("p",null,"If you'd like to follow along with React 2025, check out ",Object(b.b)("a",Object(n.a)({parentName:"p"},{href:"https://fastfeedback.io/"}),"Fast Feedback")," as well as the ",Object(b.b)("a",Object(n.a)({parentName:"p"},{href:"https://github.com/leerob/fastfeedback"}),"GitHub repo"),". It's not much yet, but it's growing quickly! Also, feel free to reach out if you have any questions. I look forward to hearing from you!"))}l.isMDXComponent=!0},"6CqR":function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/newsletter/20",function(){return t("3xwk")}])},"7ljp":function(e,a,t){"use strict";t.d(a,"a",(function(){return i})),t.d(a,"b",(function(){return O}));var n=t("q1tI"),c=t.n(n);function s(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}function o(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}function b(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?o(Object(t),!0).forEach((function(a){s(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}function p(e,a){if(null==e)return{};var t,n,c=function(e,a){if(null==e)return{};var t,n,c={},s=Object.keys(e);for(n=0;n<s.length;n++)t=s[n],a.indexOf(t)>=0||(c[t]=e[t]);return c}(e,a);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)t=s[n],a.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(c[t]=e[t])}return c}var r=c.a.createContext({}),m=function(e){var a=c.a.useContext(r),t=a;return e&&(t="function"===typeof e?e(a):b({},a,{},e)),t},i=function(e){var a=m(e.components);return c.a.createElement(r.Provider,{value:a},e.children)},l={inlineCode:"code",wrapper:function(e){var a=e.children;return c.a.createElement(c.a.Fragment,{},a)}},j=Object(n.forwardRef)((function(e,a){var t=e.components,n=e.mdxType,s=e.originalType,o=e.parentName,r=p(e,["components","mdxType","originalType","parentName"]),i=m(t),j=n,O=i["".concat(o,".").concat(j)]||i[j]||l[j]||s;return t?c.a.createElement(O,b({ref:a},r,{components:t})):c.a.createElement(O,b({ref:a},r))}));function O(e,a){var t=arguments,n=a&&a.mdxType;if("string"===typeof e||n){var s=t.length,o=new Array(s);o[0]=j;var b={};for(var p in a)hasOwnProperty.call(a,p)&&(b[p]=a[p]);b.originalType=e,b.mdxType="string"===typeof e?e:n,o[1]=b;for(var r=2;r<s;r++)o[r]=t[r];return c.a.createElement.apply(null,o)}return c.a.createElement.apply(null,t)}j.displayName="MDXCreateElement"},Ff2n:function(e,a,t){"use strict";t.d(a,"a",(function(){return c}));var n=t("zLVn");function c(e,a){if(null==e)return{};var t,c,s=Object(n.a)(e,a);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(c=0;c<o.length;c++)t=o[c],a.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(s[t]=e[t])}return s}},KHP3:function(e,a,t){"use strict";var n=t("q1tI"),c=t.n(n),s=t("9ixD"),o=c.a.createElement;a.a=function(e){var a=e.title,t=e.summary,n=e.publishedAt,b=e.url,p=e.image,r=new Date(n).toISOString(),m={url:"https://leerob.io".concat(p),alt:a};return o(c.a.Fragment,null,o(s.c,{title:"".concat(a," \u2013 Lee Robinson"),description:t,canonical:b,openGraph:{type:"article",article:{publishedTime:r},url:b,title:a,description:t,images:[m]}}),o(s.a,{authorName:"Lee Robinson",dateModified:r,datePublished:r,description:t,images:[m],publisherLogo:"/static/favicons/android-chrome-192x192.png",publisherName:"Lee Robinson",title:a,url:b}))}},L90x:function(e,a,t){"use strict";var n=t("8OQS"),c=t.n(n),s=t("pVnL"),o=t.n(s),b=t("qKvR"),p=t("lSNA"),r=t.n(p),m=t("CjxU"),i=t("mf32"),l=t("8hg0");function j(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}var O={"2xs":4,xs:6,sm:8,md:12,lg:16,xl:24,"2xl":32,full:"full"},u=function(e){var a=e.size,t=e.name,n=e.showBorder,c=e.borderColor,s=Object(m.b)().colors,o=Object(i.b)().colorMode,b=t?function(e){var a=0;if(0===e.length)return a;for(var t=0;t<e.length;t++)a=e.charCodeAt(t)+((a<<5)-a),a&=a;for(var n="#",c=0;c<3;c++)n+=("00"+(a>>8*c&255).toString(16)).substr(-2);return n}(t):s.gray[400],p=t?Object(l.e)(b)?"#fff":"gray.800":"#fff";return function(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?j(t,!0).forEach((function(a){r()(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):j(t).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}({},{display:"inline-flex",rounded:"full",alignItems:"center",flexShrink:"0",justifyContent:"center",position:"relative"},{size:O[a],bg:b,color:p},n&&{border:"2px",borderColor:c||{light:"#fff",dark:"gray.800"}[o]})},d=t("bQFp"),N=t("BMxC"),k=function(e){var a=e.name,t=c()(e,["name"]);return Object(b.d)(N.a,o()({textAlign:"center",textTransform:"uppercase",fontWeight:"medium","aria-label":a},t),a?function(e){var a=e.split(" "),t=a[0],n=a[1];return t&&n?""+t.charAt(0)+n.charAt(0):t.charAt(0)}(a):null)},h=function(e){return Object(b.d)(N.a,o()({size:"100%"},e),Object(b.d)("svg",{fill:"#fff",viewBox:"0 0 128 128",role:"img"},Object(b.d)("g",null,Object(b.d)("path",{d:"M103,102.1388 C93.094,111.92 79.3504,118 64.1638,118 C48.8056,118 34.9294,111.768 25,101.7892 L25,95.2 C25,86.8096 31.981,80 40.6,80 L87.4,80 C96.019,80 103,86.8096 103,95.2 L103,102.1388 Z"}),Object(b.d)("path",{d:"M63.9961647,24 C51.2938136,24 41,34.2938136 41,46.9961647 C41,59.7061864 51.2938136,70 63.9961647,70 C76.6985159,70 87,59.7061864 87,46.9961647 C87,34.2938136 76.6985159,24 63.9961647,24"}))))},g=function(e){var a=e.size,t=e.showBorder,n=e.name,s=e.src,p=e.borderColor,r=e.children,i=c()(e,["size","showBorder","name","src","borderColor","children"]),l=u({name:n,size:a,showBorder:t,borderColor:p}),j=Object(d.b)({src:s}),g=Object(m.b)(),f=O[a],y=g.sizes[f],w="calc("+y+" / 2.5)";return Object(b.d)(N.a,o()({fontSize:w,lineHeight:y,verticalAlign:"top"},l,i),s&&j?Object(b.d)(N.a,{as:"img",size:"100%",rounded:"full",objectFit:"cover",src:s,alt:n}):s&&!j?n?Object(b.d)(k,{size:y,name:n}):Object(b.d)(h,{"aria-label":n}):!s&&n?Object(b.d)(k,{size:y,name:n}):Object(b.d)(h,{"aria-label":n}),r)};g.defaultProps={size:"md"};a.a=g},MrJl:function(e,a,t){"use strict";t.d(a,"a",(function(){return k}));var n=t("wx14"),c=t("q1tI"),s=t.n(c),o=t("sWYD"),b=t("4+6U"),p=t("mf32"),r=t("Yn+B"),m=t("Weur"),i=t("qWyU"),l=t("L90x"),j=t("sK1y"),O=t("rQ2n"),u=t("ps1A"),d=t("KHP3"),N=s.a.createElement;function k(e){var a=e.children,t=e.frontMatter,c=t.__resourcePath.replace("newsletter/","").replace(".mdx",""),s=Object(p.b)().colorMode;return N(O.a,null,N(d.a,Object(n.a)({url:"https://leerob.io/newsletter/".concat(c)},t)),N(r.a,{as:"article",spacing:8,justifyContent:"center",alignItems:"flex-start",m:"0 auto 4rem auto",maxWidth:"700px",w:"100%"},N(m.a,{flexDirection:"column",justifyContent:"flex-start",alignItems:"flex-start",maxWidth:"700px",w:"100%"},N(i.a,{letterSpacing:"tight",mb:2,as:"h1",size:"2xl"},t.title),N(m.a,{justify:"space-between",align:["initial","center"],direction:["column","row"],mt:2,w:"100%",mb:4},N(m.a,{align:"center"},N(l.a,{size:"xs",name:"Lee Robinson",src:"https://bit.ly/33vEjhB",mr:2}),N(j.a,{fontSize:"sm",color:{light:"gray.700",dark:"gray.400"}[s]},t.by,"Lee Robinson / ",Object(o.a)(Object(b.a)(t.publishedAt),"MMMM dd, yyyy"))),N(j.a,{fontSize:"sm",color:"gray.500",minWidth:"100px",mt:[2,0]},t.readingTime.text))),a,N(u.a,null)))}}},[["6CqR",1,2,0,3,4,5,6,7]]]);