_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[34],{"137Z":function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/blog/google-yelp-foursquare-apis-python",function(){return t("cGuh")}])},cGuh:function(e,a,t){"use strict";t.r(a),t.d(a,"frontMatter",(function(){return r})),t.d(a,"default",(function(){return j}));var n=t("wx14"),c=t("Ff2n"),s=t("q1tI"),o=t.n(s),b=t("7ljp"),p=t("ZDfL"),r=(o.a.createElement,{title:"Harnessing the Google, Yelp, and Foursquare APIs with Python",publishedAt:"2015-12-15",summary:"A simple Python program to retrieve relevant data.",image:"/static/images/google-yelp-foursquare-apis-python/banner.png",wordCount:794,readingTime:{text:"4 min read",minutes:3.96,time:237600,words:792},__resourcePath:"blog/google-yelp-foursquare-apis-python.mdx",__scans:{},layout:"index"}),m={frontMatter:r},O=p.a;function j(e){var a=e.components,t=Object(c.a)(e,["components"]);return Object(b.b)(O,Object(n.a)({},m,t,{components:a,mdxType:"MDXLayout"}),Object(b.b)("p",null,"Data is a beautiful thing. Especially when we can sort, organize, and manipulate it to our needs. In this post, I\u2019m going to walk you through harnessing the power of the Google Places, Yelp, and Foursquare APIs to create a list of businesses in your area."),Object(b.b)("h2",{id:"development"},"Development"),Object(b.b)("p",null,"Let\u2019s create a Business model to represent the data we\u2019ll retrieve from our sources. Most of the parameters to create a Business are pretty straight forward. If you\u2019re comparing businesses between data sources, you\u2019ll find that the naming conventions aren\u2019t equal. To alleviate this issue, you can use the address as a constant between the businesses. You could also add other attributes to suit your needs, like a phone number or website link."),Object(b.b)("pre",{className:"language-python"},Object(b.b)("code",Object(n.a)({parentName:"pre"},{className:"language-python"}),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"class")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token class-name"}),"Business"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),":"),"\n  ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"def")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token function"}),"__init__"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"("),"self",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),",")," name",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),",")," address",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),",")," rating",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),","),"\n               rating_count",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),",")," checkin_count",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),")"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),":"),"\n    self",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"."),"name ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),"=")," name\n    self",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"."),"address ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),"=")," address\n    self",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"."),"rating ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),"=")," rating\n    self",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"."),"rating_count ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),"=")," rating_count\n    self",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"."),"checkin_count ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),"=")," checkin_count\n")),Object(b.b)("p",null,"We\u2019ll be using the urllib2 library to make HTTP requests. Let\u2019s create a helper function to reduce repeated code."),Object(b.b)("pre",{className:"language-python"},Object(b.b)("code",Object(n.a)({parentName:"pre"},{className:"language-python"}),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"def")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token function"}),"make_request"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"("),"url",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),")"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),":"),"\n    ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"with")," closing",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"("),"urlopen",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"("),"url",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),")"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),")")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"as")," response",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),":"),"\n        ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"return")," json",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"."),"loads",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"("),"response",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"."),"read",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"("),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),")"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),")"),"\n",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"return")," data\n")),Object(b.b)("p",null,"I\u2019ll be focusing on explaining code snippets in the following section. If you\u2019d like to jump straight to the completed code, here\u2019s the ",Object(b.b)("a",Object(n.a)({parentName:"p"},{href:"https://github.com/leerob/Guesstimator"}),"link"),"."),Object(b.b)("pre",{className:"language-python"},Object(b.b)("code",Object(n.a)({parentName:"pre"},{className:"language-python"}),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"def")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token function"}),"make_request"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"("),"url",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),")"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),":"),"\n    ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"with")," closing",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"("),"urlopen",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"("),"url",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),")"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),")")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"as")," response",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),":"),"\n        ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"return")," json",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"."),"loads",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"("),"response",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"."),"read",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"("),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),")"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),")"),"\n",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"return")," data\n")),Object(b.b)("h2",{id:"apis"},"APIs"),Object(b.b)("h3",{id:"foursquare"},"Foursquare"),Object(b.b)("p",null,"Before diving in, we must first obtain our client keys to access the ",Object(b.b)("a",Object(n.a)({parentName:"p"},{href:"https://developer.foursquare.com/"}),"API"),". You can find those ",Object(b.b)("a",Object(n.a)({parentName:"p"},{href:"https://developer.foursquare.com/docs/"}),"here")," after creating an application. Next, let\u2019s look at the different endpoints we can access. The ",Object(b.b)("a",Object(n.a)({parentName:"p"},{href:"https://developer.foursquare.com/docs/venues/explore"}),"explore")," endpoint allows us to find venues around a given location. This endpoint contains venue rating information as well as check-in counts."),Object(b.b)("pre",{className:"language-python"},Object(b.b)("code",Object(n.a)({parentName:"pre"},{className:"language-python"}),"https",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),":"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),"//"),"api",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"."),"foursquare",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"."),"com",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),"/"),"v2",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),"/"),"venues",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),"/"),"explore\n")),Object(b.b)("p",null,"Let\u2019s give it some parameters to narrow our search:"),Object(b.b)("ul",null,Object(b.b)("li",{parentName:"ul"},"ll: Latitude and longitude of the user\u2019s location."),Object(b.b)("li",{parentName:"ul"},"radius: Search radius in meters."),Object(b.b)("li",{parentName:"ul"},"categoryId: Limit results to a specific category (e.g. \u201cbars\u201d).")),Object(b.b)("p",null,"Combining these parameters with our client keys, we can make a request to our newly created URL and retrieve a list of venues:"),Object(b.b)("pre",{className:"language-python"},Object(b.b)("code",Object(n.a)({parentName:"pre"},{className:"language-python"}),"venue_list ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),"=")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"["),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"]"),"\n",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"try"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),":"),"\n    data ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),"=")," make_request",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"("),"url",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),")"),"\n",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"for")," item ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"in")," data",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"["),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),"'response'"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"]"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"["),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),"'groups'"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"]"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"["),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token number"}),"0"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"]"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"["),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),"'items'"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"]"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),":"),"\n    venue ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),"=")," item",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"["),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),"'venue'"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"]"),"\n    venue_list",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"."),"append",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"("),"Business",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"("),"\n        venue",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"["),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),"'name'"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"]"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),","),"\n        venue",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"["),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),"'location'"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"]"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"["),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),"'address'"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"]"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),","),"\n        venue",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"["),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),"'rating'"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"]"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),","),"\n        venue",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"["),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),"'ratingSignals'"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"]"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),","),"\n        venue",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"["),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),"'stats'"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"]"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"["),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),"'checkinsCount'"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"]"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),")"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),")"),"\n",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"except")," Exception",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),",")," e",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),":"),"\n    ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"print")," e\n")),Object(b.b)("p",null,"After receiving our JSON response, we can iterate through the dictionary to create our array of Business objects containing our desired information."),Object(b.b)("h3",{id:"yelp"},"Yelp"),Object(b.b)("p",null,"Following suite with Foursquare, we must first obtain our consumer keys before we can access the ",Object(b.b)("a",Object(n.a)({parentName:"p"},{href:"https://www.yelp.com/developers/documentation/v2/overview"}),"API"),". You can find those ",Object(b.b)("a",Object(n.a)({parentName:"p"},{href:"https://www.yelp.com/login?return_url=%2Fdevelopers%2Fmanage_api_keys"}),"here")," after logging in. I tried to refrain from using ",Object(b.b)("a",Object(n.a)({parentName:"p"},{href:"https://github.com/yelp/yelp-python"}),"external libraries")," to reduce installation requirements, but ultimately ended up needing ",Object(b.b)("a",Object(n.a)({parentName:"p"},{href:"https://rauth.readthedocs.io/en/latest/"}),"rauth"),".\nTo install simply run:"),Object(b.b)("pre",{className:"language-python"},Object(b.b)("code",Object(n.a)({parentName:"pre"},{className:"language-python"}),"pip install rauth\n")),Object(b.b)("p",null,"We\u2019ll be using the ",Object(b.b)("a",Object(n.a)({parentName:"p"},{href:"https://www.yelp.com/developers/documentation/v2/search_api"}),"Search API")," to obtain a list of businesses in our area."),Object(b.b)("pre",{className:"language-python"},Object(b.b)("code",Object(n.a)({parentName:"pre"},{className:"language-python"}),"https",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),":"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),"//"),"api",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"."),"yelp",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"."),"com",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),"/"),"v2",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),"/"),"search\n")),Object(b.b)("p",null,"Once again, let\u2019s give the URL some parameters to narrow our search:"),Object(b.b)("ul",null,Object(b.b)("li",{parentName:"ul"},"ll: Latitude and longitude of the user\u2019s location."),Object(b.b)("li",{parentName:"ul"},"radius_filter: Search radius in meters. Max distance 40000 meters."),Object(b.b)("li",{parentName:"ul"},"term: Limit results to a specific category (e.g. \u201cbars\u201d).")),Object(b.b)("p",null,"To obtain our desired information, we first need to create an authenticated session. Next, we make a request to our newly created URL and once again parse the JSON response."),Object(b.b)("pre",{className:"language-python"},Object(b.b)("code",Object(n.a)({parentName:"pre"},{className:"language-python"}),"session ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),"=")," rauth",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"."),"OAuth1Session",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"("),"\n    consumer_key ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),"=")," CONSUMER_KEY",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),","),"\n    consumer_secret ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),"=")," CONSUMER_SECRET",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),","),"\n    access_token ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),"=")," TOKEN",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),","),"\n    access_token_secret ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),"=")," TOKEN_SECRET",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),")"),"\n\nrequest ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),"=")," session",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"."),"get",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"("),"url",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),",")," params",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),"="),"params",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),")"),"\ndata ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),"=")," request",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"."),"json",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"("),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),")"),"\nsession",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"."),"close",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"("),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),")"),"\nbusiness_list ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),"=")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"["),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"]"),"\n",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"for")," business ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"in")," data",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"["),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),"'businesses'"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"]"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),":"),"\n    address ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),"=")," business",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"["),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),"'location'"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"]"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"["),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),"'display_address'"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"]"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"["),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token number"}),"0"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"]"),"\n    business_list",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"."),"append",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"("),"Business",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"("),"\n        business",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"["),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),"'name'"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"]"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),","),"\n        address",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),","),"\n        business",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"["),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),"'rating'"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"]"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),","),"\n        business",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"["),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),"'review_count'"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"]"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),","),"\n        ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),"'N/A'"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),")"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),")"),"\n")),Object(b.b)("h3",{id:"google-places"},"Google Places"),Object(b.b)("p",null,"You\u2019ve got the hang of this now, right? Obtain the ",Object(b.b)("a",Object(n.a)({parentName:"p"},{href:"https://developers.google.com/places/web-service/get-api-key"}),"keys"),", read the ",Object(b.b)("a",Object(n.a)({parentName:"p"},{href:"https://developers.google.com/places/"}),"documentation"),", and find our ",Object(b.b)("a",Object(n.a)({parentName:"p"},{href:"https://developers.google.com/places/web-service/search"}),"endpoint"),"."),Object(b.b)("pre",{className:"language-python"},Object(b.b)("code",Object(n.a)({parentName:"pre"},{className:"language-python"}),"pip install rauth\n")),Object(b.b)("p",null,"We\u2019ll be using the ",Object(b.b)("a",Object(n.a)({parentName:"p"},{href:"https://developers.google.com/places/web-service/search"}),"Search API")," to obtain a list of businesses in our area."),Object(b.b)("pre",{className:"language-python"},Object(b.b)("code",Object(n.a)({parentName:"pre"},{className:"language-python"}),"https",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),":"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),"//"),"maps",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"."),"googleapis",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"."),"com",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),"/"),"maps",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),"/"),"api",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),"/"),"place",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),"/"),"nearbysearch",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),"/"),"json?params\n")),Object(b.b)("p",null,"We need to supply these parameters:"),Object(b.b)("ul",null,Object(b.b)("li",{parentName:"ul"},"location: Latitude and longitude of the user\u2019s location."),Object(b.b)("li",{parentName:"ul"},"radius: Search radius in meters. Max distance 50000 meters."),Object(b.b)("li",{parentName:"ul"},"type: Limit results to a specific category (e.g. \u201cbars\u201d).")),Object(b.b)("pre",{className:"language-python"},Object(b.b)("code",Object(n.a)({parentName:"pre"},{className:"language-python"}),"place_list ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),"=")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"["),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"]"),"\n",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"try"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),":"),"\n    data ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),"=")," make_request",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"("),"url",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),")"),"\n    ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"for")," result ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"in")," data",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"["),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),"'results'"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"]"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),":"),"\n        place ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),"=")," search_google_place",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"("),"result",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"["),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),"'place_id'"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"]"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),")"),"\n        place_list",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"."),"append",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"("),"place",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),")"),"\n",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"except")," Exception",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),",")," e",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),":"),"\n  ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"print")," e\n")),Object(b.b)("p",null,"We\u2019ll need to make a request to an individual place using a new URL."),Object(b.b)("pre",{className:"language-python"},Object(b.b)("code",Object(n.a)({parentName:"pre"},{className:"language-python"}),"https",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),":"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),"//"),"maps",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"."),"googleapis",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"."),"com",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),"/"),"maps",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),"/"),"api",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),"/"),"place",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),"/"),"details",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),"/"),"json?placeid",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),"="),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token builtin"}),"id"),"\n")),Object(b.b)("p",null,"Finally, we\u2019ll once again parse the JSON result and retrieve the places."),Object(b.b)("pre",{className:"language-python"},Object(b.b)("code",Object(n.a)({parentName:"pre"},{className:"language-python"}),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"try"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),":"),"\n    data ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),"=")," make_request",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"("),"url",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),")"),"\n    place ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),"=")," data",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"["),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),"'result'"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"]"),"\n    ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"return")," Business",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"("),"\n        place",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"["),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),"'name'"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"]"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),","),"\n        place",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"["),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),"'formatted_address'"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"]"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"."),"split",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"("),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),"','"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),")"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"["),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token number"}),"0"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"]"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),","),"\n        place",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"["),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),"'rating'"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"]"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),","),"\n        place",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"["),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),"'user_ratings_total'"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"]"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),","),"\n        ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),"'N/A'"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),")"),"\n",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"except")," Exception",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),",")," e",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),":"),"\n  ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"print")," e\n")),Object(b.b)("blockquote",null,Object(b.b)("p",{parentName:"blockquote"},"Congratulations! You\u2019ve successfully retrieved all your local businesses from Foursquare, Yelp and Google.")),Object(b.b)("p",null,"Now that you\u2019ve obtained a list of Business objects, you\u2019re free to manipulate the data as you please. I chose to leverage the ratings to create a better ranking system for bars in my area, but the possibilities are endless. To view the entire source code for this article and to see my example, ",Object(b.b)("a",Object(n.a)({parentName:"p"},{href:"https://github.com/leerob/Guesstimator"}),"click this link"),". Thanks for reading!"))}j.isMDXComponent=!0}},[["137Z",1,2,0,3,4,5,6,7,8]]]);