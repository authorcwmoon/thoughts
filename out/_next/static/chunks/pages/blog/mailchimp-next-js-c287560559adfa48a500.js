_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[48],{"63rc":function(e,a,t){"use strict";t.r(a),t.d(a,"frontMatter",(function(){return m})),t.d(a,"default",(function(){return N}));var n=t("wx14"),c=t("Ff2n"),s=t("q1tI"),o=t.n(s),b=t("7ljp"),p=t("ZDfL"),r=t("qh8W"),m=(o.a.createElement,{title:"Create A Newsletter with Next.js API Routes and Mailchimp",publishedAt:"2019-11-10",summary:"Learn how to integrate Next.js and React with Mailchimp to build a newsletter subscription form.",image:"/static/images/mailchimp-next-js/banner.png",wordCount:979,readingTime:{text:"5 min read",minutes:4.885,time:293099.99999999994,words:977},__resourcePath:"blog/mailchimp-next-js.mdx",__scans:{},layout:"index"}),j={frontMatter:m},O=p.a;function N(e){var a=e.components,t=Object(c.a)(e,["components"]);return Object(b.b)(O,Object(n.a)({},j,t,{components:a,mdxType:"MDXLayout"}),Object(b.b)("p",null,Object(b.b)("img",Object(n.a)({parentName:"p"},{src:"/static/images/mailchimp-next-js/banner.png",alt:"Next.js and Mailchimp"}))),Object(b.b)("p",null,Object(b.b)("em",{parentName:"p"},"The year is 2030. Everyone has a newsletter. Email has overtaken social media. 95% of coding is done via drag-and-drop tools.")),Object(b.b)("p",null,"Okay, most of that probably isn't true. Except the ",Object(b.b)("a",Object(n.a)({parentName:"p"},{href:"https://webflow.com/"}),"no-code tools"),".\nUnless you've been living under a rock, you've probably noticed the rise of newsletters (especially in the developer community)."),Object(b.b)("p",null,Object(b.b)("em",{parentName:"p"},"Why?")," Well, they're an excellent way to promote content to those who really want to read it. If you've ever thought about starting a newsletter, then you've found the right article \ud83c\udf89"),Object(b.b)("h2",{id:"mailchimp-vs-the-world"},"Mailchimp Vs. The World"),Object(b.b)("p",null,"If you're just starting a newsletter, you probably want something with a free tier.\nThat was my rationale for adopting ",Object(b.b)("a",Object(n.a)({parentName:"p"},{href:"https://tinyletter.com/"}),"TinyLetter"),". It was simple, easy to set up, and didn't require an API route. Perfect!"),Object(b.b)("p",null,'However, it wasn\'t exactly a frictionless sign-up process. When a user clicked "subscribe", it launched a pop-up window where they had to confirm their email address again.\nAgain, ',Object(b.b)("em",{parentName:"p"},"it works"),", but we can do better."),Object(b.b)("p",null,"I started to explore using ",Object(b.b)("a",Object(n.a)({parentName:"p"},{href:"https://mailchimp.com/"}),"Mailchimp")," as an alternative. It also has a ",Object(b.b)("a",Object(n.a)({parentName:"p"},{href:"https://mailchimp.com/pricing/"}),"free tier")," if you have less than 2,000 subscribers. Perfect."),Object(b.b)("h2",{id:"why-nextjs"},"Why Next.JS?"),Object(b.b)("p",null,Object(b.b)("a",Object(n.a)({parentName:"p"},{href:"https://nextjs.org/"}),"Next.js")," is the ",Object(b.b)("a",Object(n.a)({parentName:"p"},{href:"https://masteringnextjs.com/learn-next-js"}),"easiest way")," to build applications in React. One of my favorite features is API routes."),Object(b.b)("p",null,"API routes provide a straightforward solution for building an API inside Next.js.\nAll you need to get started is an ",Object(b.b)("inlineCode",{parentName:"p"},"api/")," folder inside your main ",Object(b.b)("inlineCode",{parentName:"p"},"pages/")," folder where your routes live."),Object(b.b)("p",null,"Every file inside ",Object(b.b)("inlineCode",{parentName:"p"},"pages/api/")," is mapped to ",Object(b.b)("inlineCode",{parentName:"p"},"/api/*"),". This is where we'll communicate with Mailchimp.\nFirst, we need to set up an account."),Object(b.b)("h2",{id:"setting-up-mailchimp"},"Setting up Mailchimp"),Object(b.b)("p",null,"After ",Object(b.b)("a",Object(n.a)({parentName:"p"},{href:"https://mailchimp.com/help/create-an-account/"}),"creating an account"),", you'll need to fetch your ",Object(b.b)("a",Object(n.a)({parentName:"p"},{href:"https://mailchimp.com/help/about-api-keys/#find+or+generate+your+api+key"}),"API key"),". You can utilize their ",Object(b.b)("a",Object(n.a)({parentName:"p"},{href:"https://us1.api.mailchimp.com/playground/?_ga=2.231663199.1180055433.1567349670-195619933.1565803046"}),"API Playground")," to test requests."),Object(b.b)("p",null,'When a user clicks "subscribe", we\'ll want to add their email address to the mailing list. This is through the ',Object(b.b)("a",Object(n.a)({parentName:"p"},{href:"https://developer.mailchimp.com/documentation/mailchimp/reference/lists/members/#create-post_lists_list_id_members"}),"List Members POST")," endpoint."),Object(b.b)("p",null,"According to their ",Object(b.b)("a",Object(n.a)({parentName:"p"},{href:"https://developer.mailchimp.com/documentation/mailchimp/guides/get-started-with-mailchimp-api-3/"}),"API documentation"),", we'll need to send a request to:"),Object(b.b)("pre",{className:"language-bash"},Object(b.b)("code",Object(n.a)({parentName:"pre"},{className:"language-bash"}),"https://",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),"<"),"dc",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),">"),".api.mailchimp.com/3.0\n")),Object(b.b)("p",null,"Where ",Object(b.b)("inlineCode",{parentName:"p"},"dc")," is the datacenter. This is the last 3 characters of your API key we retrieved earlier. We'll also need to fetch the ",Object(b.b)("a",Object(n.a)({parentName:"p"},{href:"https://mailchimp.com/help/find-audience-id/"}),"Audience ID")," (or List ID) for the mailing list."),Object(b.b)("h2",{id:"environment-variables"},"Environment Variables"),Object(b.b)("p",null,"Let's make our secrets we've retrieved available without hardcoding them into our request. Since I'm deploying with ",Object(b.b)("a",Object(n.a)({parentName:"p"},{href:"https://vercel.com"}),"Vercel"),", I'll need to set up some ",Object(b.b)("a",Object(n.a)({parentName:"p"},{href:"https://zeit.co/docs/v2/build-step#using-environment-variables-and-secrets"}),"environment variables"),".\nYou can use similar a ",Object(b.b)("a",Object(n.a)({parentName:"p"},{href:"https://create-react-app.dev/docs/adding-custom-environment-variables"}),"similar approach")," for ",Object(b.b)("a",Object(n.a)({parentName:"p"},{href:"https://www.gatsbyjs.org/docs/environment-variables/"}),"any framework")," to add your secrets to ",Object(b.b)("inlineCode",{parentName:"p"},"process.env"),"."),Object(b.b)("pre",{className:"language-bash"},Object(b.b)("code",Object(n.a)({parentName:"pre"},{className:"language-bash"}),"$ vc secret ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token function"}),"add")," MAILCHIMP_LIST_ID ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),"<"),"secret-value",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),">"),"\n$ vc secret ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token function"}),"add")," MAILCHIMP_API_KEY ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),"<"),"secret-value",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),">"),"\n")),Object(b.b)("p",null,"Then, we can expose them via our ",Object(b.b)("inlineCode",{parentName:"p"},"vercel.json")," file."),Object(b.b)("div",{className:"remark-code-title"},"vercel.json"),Object(b.b)("pre",{className:"language-json"},Object(b.b)("code",Object(n.a)({parentName:"pre"},{className:"language-json"}),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n  ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token property"}),'"env"'),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),":")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n    ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token property"}),'"MAILCHIMP_LIST_ID"'),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),":")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'"@mailchimp-list-id"'),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),","),"\n    ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token property"}),'"MAILCHIMP_API_KEY"'),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),":")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'"@mailchimp-api-key"'),"\n  ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n")),Object(b.b)("p",null,"These variables will be available at build time. To test locally, we'll also want to create a ",Object(b.b)("inlineCode",{parentName:"p"},".env")," file since Vercel Secrets ",Object(b.b)("a",Object(n.a)({parentName:"p"},{href:"https://zeit.co/docs/v2/serverless-functions/env-and-secrets/"}),"aren't available")," locally running ",Object(b.b)("inlineCode",{parentName:"p"},"vc dev"),"."),Object(b.b)("div",{className:"remark-code-title"},".env"),Object(b.b)("pre",{className:"language-bash"},Object(b.b)("code",Object(n.a)({parentName:"pre"},{className:"language-bash"}),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token assign-left variable"}),"MAILCHIMP_LIST_ID"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),"="),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),"<"),"secret-value",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),">"),"\n",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token assign-left variable"}),"MAILCHIMP_API_KEY"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),"="),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),"<"),"secret-value",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),">"),"\n")),Object(b.b)("p",null,Object(b.b)("strong",{parentName:"p"},"Note:")," Don't forget to add ",Object(b.b)("inlineCode",{parentName:"p"},".env")," to your ",Object(b.b)("inlineCode",{parentName:"p"},".gitignore"),". We don't want to commit our secrets."),Object(b.b)("h2",{id:"creating-the-request"},"Creating the Request"),Object(b.b)("p",null,"Now that we have the API Key and the List ID available as environment variables, we can create an API route at ",Object(b.b)("inlineCode",{parentName:"p"},"pages/api/subscribe.js")," to add a member to our list."),Object(b.b)("div",{className:"remark-code-title"},"pages/api/subscribe.js"),Object(b.b)("pre",{className:"language-js"},Object(b.b)("code",Object(n.a)({parentName:"pre"},{className:"language-js"}),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword module"}),"export")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword module"}),"default")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"async")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"("),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token parameter"}),"req",Object(b.b)("span",Object(n.a)({parentName:"span"},{className:"token punctuation"}),",")," res"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),")")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token arrow operator"}),"=>")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n  ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token comment"}),"// 1. Destructure the email address from the request body."),"\n  ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"const")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{")," email ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),"=")," req",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"."),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token property-access"}),"body"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),";"),"\n\n  ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"if")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"("),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),"!"),"email",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),")")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n    ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token comment"}),"// 2. Throw an error if an email wasn't provided."),"\n    ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"return")," res",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"."),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token method function property-access"}),"status"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"("),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token number"}),"400"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),")"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"."),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token method function property-access"}),"json"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"("),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{")," error",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),":")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),"'Email is required'")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),")"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),";"),"\n  ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n\n  ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"try")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n    ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token comment"}),"// 3. Fetch the environment variables."),"\n    ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"const")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token constant"}),"LIST_ID")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),"=")," process",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"."),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token property-access"}),"env"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"."),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token constant"}),"MAILCHIMP_LIST_ID"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),";"),"\n    ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"const")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token constant"}),"API_KEY")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),"=")," process",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"."),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token property-access"}),"env"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"."),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token constant"}),"MAILCHIMP_API_KEY"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),";"),"\n    ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token comment"}),"// 4. API keys are in the form <key>-us3."),"\n    ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"const")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token constant"}),"DATACENTER")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),"=")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token constant"}),"API_KEY"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"."),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token method function property-access"}),"split"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"("),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),"'-'"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),")"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"["),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token number"}),"1"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"]"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),";"),"\n\n    ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token comment"}),"// 5. The status of 'subscribed' is equivalent to a double opt-in."),"\n    ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"const")," data ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),"=")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n      email_address",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),":")," email",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),","),"\n      status",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),":")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),"'subscribed'"),"\n    ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),";"),"\n\n    ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token comment"}),"// 6. Send a POST request to Mailchimp."),"\n    ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"const")," response ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),"=")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"await")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token function"}),"fetch"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"("),"\n      ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token template-string"}),Object(b.b)("span",Object(n.a)({parentName:"span"},{className:"token template-punctuation string"}),"`"),Object(b.b)("span",Object(n.a)({parentName:"span"},{className:"token string"}),"https://"),Object(b.b)("span",Object(n.a)({parentName:"span"},{className:"token interpolation"}),Object(b.b)("span",Object(n.a)({parentName:"span"},{className:"token interpolation-punctuation punctuation"}),"${"),Object(b.b)("span",Object(n.a)({parentName:"span"},{className:"token constant"}),"DATACENTER"),Object(b.b)("span",Object(n.a)({parentName:"span"},{className:"token interpolation-punctuation punctuation"}),"}")),Object(b.b)("span",Object(n.a)({parentName:"span"},{className:"token string"}),".api.mailchimp.com/3.0/lists/"),Object(b.b)("span",Object(n.a)({parentName:"span"},{className:"token interpolation"}),Object(b.b)("span",Object(n.a)({parentName:"span"},{className:"token interpolation-punctuation punctuation"}),"${"),Object(b.b)("span",Object(n.a)({parentName:"span"},{className:"token constant"}),"LIST_ID"),Object(b.b)("span",Object(n.a)({parentName:"span"},{className:"token interpolation-punctuation punctuation"}),"}")),Object(b.b)("span",Object(n.a)({parentName:"span"},{className:"token string"}),"/members"),Object(b.b)("span",Object(n.a)({parentName:"span"},{className:"token template-punctuation string"}),"`")),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),","),"\n      ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n        body",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),":")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token known-class-name class-name"}),"JSON"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"."),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token method function property-access"}),"stringify"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"("),"data",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),")"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),","),"\n        headers",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),":")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n          ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token maybe-class-name"}),"Authorization"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),":")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token template-string"}),Object(b.b)("span",Object(n.a)({parentName:"span"},{className:"token template-punctuation string"}),"`"),Object(b.b)("span",Object(n.a)({parentName:"span"},{className:"token string"}),"apikey "),Object(b.b)("span",Object(n.a)({parentName:"span"},{className:"token interpolation"}),Object(b.b)("span",Object(n.a)({parentName:"span"},{className:"token interpolation-punctuation punctuation"}),"${"),Object(b.b)("span",Object(n.a)({parentName:"span"},{className:"token constant"}),"API_KEY"),Object(b.b)("span",Object(n.a)({parentName:"span"},{className:"token interpolation-punctuation punctuation"}),"}")),Object(b.b)("span",Object(n.a)({parentName:"span"},{className:"token template-punctuation string"}),"`")),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),","),"\n          ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),"'Content-Type'"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),":")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),"'application/json'"),"\n        ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),","),"\n        method",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),":")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),"'POST'"),"\n      ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n    ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),")"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),";"),"\n\n    ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token comment"}),"// 7. Swallow any errors from Mailchimp and return a better error message."),"\n    ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"if")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"("),"response",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"."),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token property-access"}),"status")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),">=")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token number"}),"400"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),")")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n      ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"return")," res",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"."),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token method function property-access"}),"status"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"("),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token number"}),"400"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),")"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"."),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token method function property-access"}),"json"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"("),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n        error",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),":")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token template-string"}),Object(b.b)("span",Object(n.a)({parentName:"span"},{className:"token template-punctuation string"}),"`"),Object(b.b)("span",Object(n.a)({parentName:"span"},{className:"token string"}),"There was an error subscribing to the newsletter. Shoot me an email at [me@leerob.io] and I'll add you to the list."),Object(b.b)("span",Object(n.a)({parentName:"span"},{className:"token template-punctuation string"}),"`")),"\n      ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),")"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),";"),"\n    ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n\n    ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token comment"}),"// 8. If we made it this far, it was a success! \ud83c\udf89"),"\n    ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"return")," res",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"."),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token method function property-access"}),"status"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"("),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token number"}),"201"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),")"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"."),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token method function property-access"}),"json"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"("),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{")," error",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),":")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),"''")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),")"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),";"),"\n  ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"catch")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"("),"error",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),")")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n    ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"return")," res",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"."),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token method function property-access"}),"status"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"("),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token number"}),"500"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),")"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"."),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token method function property-access"}),"json"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"("),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{")," error",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),":")," error",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"."),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token property-access"}),"message")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),"||")," error",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"."),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token method function property-access"}),"toString"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"("),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),")")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),")"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),";"),"\n  ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),";"),"\n")),Object(b.b)("h2",{id:"creating-a-form-input"},"Creating a Form Input"),Object(b.b)("p",null,"Now that our API is created, we need a way to gather user input. Let's create a component to send a request to our API."),Object(b.b)("div",{className:"remark-code-title"},"components/Subscribe.js"),Object(b.b)("pre",{className:"language-js"},Object(b.b)("code",Object(n.a)({parentName:"pre"},{className:"language-js"}),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword module"}),"import")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token maybe-class-name"}),"React"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),",")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{")," useRef",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),",")," useState ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword module"}),"from")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),"'react'"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),";"),"\n\n",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"function")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token function"}),Object(b.b)("span",Object(n.a)({parentName:"span"},{className:"token maybe-class-name"}),"Subscribe")),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"("),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),")")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n  ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token comment"}),"// 1. Create a reference to the input so we can fetch/clear it's value."),"\n  ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"const")," inputEl ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),"=")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token function"}),"useRef"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"("),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword null nil"}),"null"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),")"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),";"),"\n  ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token comment"}),"// 2. Hold a message in state to handle the response from our API."),"\n  ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"const")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"["),"message",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),",")," setMessage",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"]")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),"=")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token function"}),"useState"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"("),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),"''"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),")"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),";"),"\n\n  ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"const")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token function-variable function"}),"subscribe")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),"=")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"async")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"("),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token parameter"}),"e"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),")")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token arrow operator"}),"=>")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n    e",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"."),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token method function property-access"}),"preventDefault"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"("),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),")"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),";"),"\n\n    ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token comment"}),"// 3. Send a request to our API with the user's email address."),"\n    ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"const")," res ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),"=")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"await")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token function"}),"fetch"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"("),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),"'/api/subscribe'"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),",")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n      body",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),":")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token known-class-name class-name"}),"JSON"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"."),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token method function property-access"}),"stringify"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"("),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n        email",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),":")," inputEl",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"."),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token property-access"}),"current"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"."),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token property-access"}),"value"),"\n      ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),")"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),","),"\n      headers",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),":")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n        ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),"'Content-Type'"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),":")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),"'application/json'"),"\n      ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),","),"\n      method",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),":")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),"'POST'"),"\n    ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),")"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),";"),"\n\n    ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"const")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{")," error ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),"=")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"await")," res",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"."),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token method function property-access"}),"json"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"("),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),")"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),";"),"\n\n    ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"if")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"("),"error",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),")")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n      ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token comment"}),"// 4. If there was an error, update the message in state."),"\n      ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token function"}),"setMessage"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"("),"error",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),")"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),";"),"\n\n      ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"return"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),";"),"\n    ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n\n    ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token comment"}),"// 5. Clear the input value and show a success message."),"\n    inputEl",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"."),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token property-access"}),"current"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"."),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token property-access"}),"value")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),"=")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),"''"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),";"),"\n    ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token function"}),"setMessage"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"("),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),"'Success! \ud83c\udf89 You are now subscribed to the newsletter.'"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),")"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),";"),"\n  ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),";"),"\n\n  ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"return")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"("),"\n    ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),"<"),"form onSubmit",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),"="),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"subscribe",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),">"),"\n      ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),"<"),"label htmlFor",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),"="),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'"email-input"'),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),">"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),"'Email Address'"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),"<"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),"/"),"label",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),">"),"\n      ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),"<"),"input\n        id",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),"="),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'"email-input"'),"\n        name",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),"="),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'"email"'),"\n        placeholder",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),"="),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'"you@awesome.com"'),"\n        ref",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),"="),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"inputEl",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n        type",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),"="),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'"email"'),"\n      ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),"/"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),">"),"\n      ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),"<"),"div",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),">"),"\n        ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"message\n          ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),"?")," message\n          ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),":")," ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token template-string"}),Object(b.b)("span",Object(n.a)({parentName:"span"},{className:"token template-punctuation string"}),"`"),Object(b.b)("span",Object(n.a)({parentName:"span"},{className:"token string"}),"I'll only send emails when new content is posted. No spam."),Object(b.b)("span",Object(n.a)({parentName:"span"},{className:"token template-punctuation string"}),"`")),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n      ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),"<"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),"/"),"div",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),">"),"\n      ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),"<"),"button type",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),"="),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'"submit"'),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),">"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),"'\u2728 Subscribe \ud83d\udc8c'"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),"<"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),"/"),"button",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),">"),"\n    ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),"<"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),"/"),"form",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),">"),"\n  ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),")"),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),";"),"\n",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n")),Object(b.b)("h2",{id:"conclusion"},"Conclusion"),Object(b.b)("p",null,"If you'd like to see a completed example, the entire source code for my blog is ",Object(b.b)("a",Object(n.a)({parentName:"p"},{href:"https://github.com/leerob/leerob.io/blob/bfbd33a822fbcbbafd4027aa45884446f6f8ff3c/pages/api/subscribe.js"}),"open source"),"."),Object(b.b)("p",null,"Curious if it actually works? Try out the form below \ud83d\ude09"),Object(b.b)(r.a,{title:"React 2025",description:"Build and deploy a modern Jamstack application using the most popular open-source software.",href:"https://react2025.com/",icon:"react2025",mdxType:"ProjectCard"}))}N.isMDXComponent=!0},RSEi:function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/blog/mailchimp-next-js",function(){return t("63rc")}])},qh8W:function(e,a,t){"use strict";var n=t("q1tI"),c=t.n(n),s=t("hyUy"),o=t("mf32"),b=t("pboS"),p=t("Weur"),r=t("w0db"),m=t("Yn+B"),j=t("qWyU"),O=t("sK1y"),N=c.a.createElement;a.a=function(e){var a=e.title,t=e.description,n=e.href,c=e.icon,l=Object(o.b)().colorMode;return N(b.a,{mb:4,href:n,onClick:function(){return function(e){s.b({"React 2025":"5WGDOKV0","Mastering Next.js":"HV9HDL0O",jamstackfns:"LRXBPLZS"}[e],0)}(a)},title:a,isExternal:!0,_hover:{boxShadow:"0px 4px 20px rgba(0, 0, 0, 0.05)",textDecoration:"none"}},N(p.a,{align:"center",border:"1px solid",borderColor:{light:"gray.200",dark:"gray.600"}[l],borderRadius:4,p:4},N(r.a,{"aria-label":"LinkedIn",name:c,color:{light:"gray.1000",dark:"white"}[l],size:"32px",ml:2,mr:4}),N(m.a,null,N(j.a,{as:"h4",size:"md",fontWeight:"bold",mb:4,letterSpacing:"tighter"},a),N(O.a,{lineHeight:"1.3"},t))))}}},[["RSEi",1,2,0,3,4,5,6,7,8]]]);